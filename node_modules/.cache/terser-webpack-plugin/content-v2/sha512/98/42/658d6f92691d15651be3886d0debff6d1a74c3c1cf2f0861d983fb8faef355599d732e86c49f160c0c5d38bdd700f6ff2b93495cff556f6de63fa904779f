{"code":"(this[\"webpackJsonptwitter-clone\"]=this[\"webpackJsonptwitter-clone\"]||[]).push([[13],{1300:function(e,t,n){\"use strict\";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&\"object\"==typeof t&&\"object\"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!==i--;){var o=a[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}},1301:function(e,t,n){\"use strict\";function r(e){return null!==e&&\"object\"===typeof e&&\"function\"===typeof e.pipe}function i(e){return function(e){return r(e)&&!1!==e.writable&&\"function\"===typeof e._write&&\"object\"===typeof e._writableState}(e)&&function(e){return r(e)&&!1!==e.readable&&\"function\"===typeof e._read&&\"object\"===typeof e._readableState}(e)}n.d(t,\"a\",(function(){return i}))},1400:function(e,t,n){\"use strict\";(function(e){n.d(t,\"a\",(function(){return ue}));var r=n(193),i=n(7),a=n(8),o=n(10),s=n(11),c=n(12),u=n(9),d=n(1),l=n.n(d),h=n(14),p=n.n(h),f=n(1329),v=n(1290),m=n(278),g=n(78),b=n(608),w=n(1301),y=n(265),O=n.n(y),k=n(25),_=n.n(k),j=n(1300),x=n.n(j),S={disconnected:function(){return\"Torus: Lost connection to Torus.\"},permanentlyDisconnected:function(){return\"Torus: Disconnected from iframe. Page reload required.\"},unsupportedSync:function(e){return\"Torus: The Torus Ethereum provider does not support synchronous methods like \".concat(e,\" without a callback parameter.\")},invalidDuplexStream:function(){return\"Must provide a Node.js-style duplex stream.\"},invalidOptions:function(e){return\"Invalid options. Received: { maxEventListeners: \".concat(e,\"}\")},invalidRequestArgs:function(){return\"Expected a single, non-array, object argument.\"},invalidRequestMethod:function(){return\"'args.method' must be a non-empty string.\"},invalidRequestParams:function(){return\"'args.params' must be an object or array if provided.\"},invalidLoggerObject:function(){return\"'args.logger' must be an object if provided.\"},invalidLoggerMethod:function(e){return\"'args.logger' must include required method '\".concat(e,\"'.\")}},C={connected:function(e){return'Torus: Connected to chain with ID \"'.concat(e,'\".')}},I=\"production\",P=\"bottom-left\",E=\"top-left\",A=\"bottom-right\",T=\"top-right\",R={supportedVerifierList:[\"google\",\"reddit\",\"discord\"],api:\"https://api.tor.us\",translations:{en:{embed:{continue:\"Continue\",actionRequired:\"Authorization required\",pendingAction:\"Click continue to proceed with your request in a popup\",cookiesRequired:\"Cookies Required\",enableCookies:\"Please enable cookies in your browser preferences to access Torus\",clickHere:\"More Info\"}},de:{embed:{continue:\"Fortsetzen\",actionRequired:\"Autorisierung erforderlich\",pendingAction:\"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren\",cookiesRequired:\"Cookies ben\\xf6tigt\",enableCookies:\"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen\",clickHere:\"Mehr Info\"}},ja:{embed:{continue:\"\\u7d99\\u7d9a\\u3059\\u308b\",actionRequired:\"\\u8a8d\\u8a3c\\u304c\\u5fc5\\u8981\\u3067\\u3059\",pendingAction:\"\\u7d9a\\u884c\\u3092\\u30af\\u30ea\\u30c3\\u30af\\u3057\\u3066\\u3001\\u30dd\\u30c3\\u30d7\\u30a2\\u30c3\\u30d7\\u3067\\u30ea\\u30af\\u30a8\\u30b9\\u30c8\\u3092\\u7d9a\\u884c\\u3057\\u307e\\u3059\",cookiesRequired:\"\\u5fc5\\u8981\\u306a\\u30af\\u30c3\\u30ad\\u30fc\",enableCookies:\"Torus\\u306b\\u30a2\\u30af\\u30bb\\u30b9\\u3059\\u308b\\u306b\\u306f\\u3001\\u30d6\\u30e9\\u30a6\\u30b6\\u306e\\u8a2d\\u5b9a\\u3067Cookie\\u3092\\u6709\\u52b9\\u306b\\u3057\\u3066\\u304f\\u3060\\u3055\\u3044\\u3002\",clickHere:\"\\u8a73\\u3057\\u304f\\u306f\"}},ko:{embed:{continue:\"\\uacc4\\uc18d\\ud558\\ub2e4\",actionRequired:\"\\uc2b9\\uc778 \\ud544\\uc694\",pendingAction:\"\\ud31d\\uc5c5\\uc5d0\\uc11c \\uc694\\uccad\\uc744 \\uc9c4\\ud589\\ud558\\ub824\\uba74 \\uacc4\\uc18d\\uc744 \\ud074\\ub9ad\\ud558\\uc2ed\\uc2dc\\uc624.\",cookiesRequired:\"\\ucfe0\\ud0a4 \\ud544\\uc694\",enableCookies:\"\\ube0c\\ub77c\\uc6b0\\uc800 \\ud658\\uacbd \\uc124\\uc815\\uc5d0\\uc11c \\ucfe0\\ud0a4\\ub97c \\ud65c\\uc131\\ud654\\ud558\\uc5ec Torus\\uc5d0 \\uc561\\uc138\\uc2a4\\ud558\\uc2ed\\uc2dc\\uc624.\",clickHere:\"\\ub354 \\ub9ce\\uc740 \\uc815\\ubcf4\"}},zh:{embed:{continue:\"\\u7ee7\\u7eed\",actionRequired:\"\\u9700\\u8981\\u6388\\u6743\",pendingAction:\"\\u5355\\u51fb\\u7ee7\\u7eed\\u4ee5\\u5728\\u5f39\\u51fa\\u7a97\\u53e3\\u4e2d\\u7ee7\\u7eed\\u60a8\\u7684\\u8bf7\\u6c42\",cookiesRequired:\"\\u5fc5\\u586bCookie\",enableCookies:\"\\u8bf7\\u5728\\u60a8\\u7684\\u6d4f\\u89c8\\u5668\\u9996\\u9009\\u9879\\u4e2d\\u542f\\u7528cookie\\u4ee5\\u8bbf\\u95eeTorus\\u3002\",clickHere:\"\\u66f4\\u591a\\u4fe1\\u606f\"}}},prodTorusUrl:\"\",localStorageKey:\"torus-\".concat(window.location.hostname)},L=_.a.getLogger(\"solana-embed\");var D=function(){return Math.random().toString(36).slice(2)},q=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=\"testing\"===e.t0?3:\"development\"===e.t0?6:9;break;case 3:return n=\"https://solana-testing.tor.us\",r=\"debug\",e.abrupt(\"break\",12);case 6:return n=\"http://localhost:8080\",r=\"debug\",e.abrupt(\"break\",12);case 9:return n=\"https://solana.tor.us\",r=\"error\",e.abrupt(\"break\",12);case 12:return e.abrupt(\"return\",{torusUrl:n,logLevel:r});case 13:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N={height:660,width:375},U={height:740,width:1315},W={height:700,width:1200},z={height:600,width:400};function F(e){var t=e.width,n=e.height,r=void 0!==window.screenLeft?window.screenLeft:window.screenX,i=void 0!==window.screenTop?window.screenTop:window.screenY,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,s=Math.abs((a-t)/2/1+r),c=Math.abs((o-n)/2/1+i);return\"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=\".concat(n/1,\",width=\").concat(t/1,\",top=\").concat(c,\",left=\").concat(s)}var K=function(e){switch(e){case\"mainnet-beta\":return{blockExplorerUrl:\"https://explorer.solana.com\",chainId:\"0x1\",displayName:\"Solana Mainnet\",logo:\"solana.svg\",rpcTarget:\"https://api.mainnet-beta.solana.com\",ticker:\"SOL\",tickerName:\"Solana Token\"};case\"testnet\":return{blockExplorerUrl:\"https://explorer.solana.com\",chainId:\"0x2\",displayName:\"Solana Testnet\",logo:\"solana.svg\",rpcTarget:\"https://api.testnet.solana.com\",ticker:\"SOL\",tickerName:\"Solana Token\"};case\"devnet\":return{blockExplorerUrl:\"https://explorer.solana.com\",chainId:\"0x3\",displayName:\"Solana Devnet\",logo:\"solana.svg\",rpcTarget:\"https://api.devnet.solana.com\",ticker:\"SOL\",tickerName:\"Solana Token\"};default:return}},H=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a;Object(i.a)(this,n);var s=r.maxEventListeners,c=void 0===s?100:s,u=r.jsonRpcStreamName,d=void 0===u?\"provider\":u;if(a=t.call(this),p()(Object(o.a)(a),\"isTorus\",void 0),p()(Object(o.a)(a),\"_rpcEngine\",void 0),p()(Object(o.a)(a),\"jsonRpcConnectionEvents\",void 0),p()(Object(o.a)(a),\"_state\",void 0),!Object(w.a)(e))throw new Error(S.invalidDuplexStream());a.isTorus=!0,a.setMaxListeners(c),a._handleConnect=a._handleConnect.bind(Object(o.a)(a)),a._handleDisconnect=a._handleDisconnect.bind(Object(o.a)(a)),a._handleStreamDisconnect=a._handleStreamDisconnect.bind(Object(o.a)(a)),a._rpcRequest=a._rpcRequest.bind(Object(o.a)(a)),a._initializeState=a._initializeState.bind(Object(o.a)(a)),a.request=a.request.bind(Object(o.a)(a)),a.sendAsync=a.sendAsync.bind(Object(o.a)(a));var l=new g.c;O()(e,l,e,a._handleStreamDisconnect.bind(Object(o.a)(a),\"Torus\")),l.ignoreStream(\"phishing\");var h=Object(g.i)();O()(h.stream,l.createStream(d),h.stream,a._handleStreamDisconnect.bind(Object(o.a)(a),\"Torus RpcProvider\"));var f=new g.b;return f.push(Object(g.g)()),f.push((function(e,t,n){\"string\"===typeof e.method&&e.method||(t.error=b.ethErrors.rpc.invalidRequest({message:\"The request 'method' must be a non-empty string.\",data:e})),n((function(e){var n=t.error;return n?(L.error(\"Torus - RPC Error: \".concat(n.message),n),e()):e()}))})),f.push(Object(v.h)({origin:location.origin})),f.push(h.middleware),a._rpcEngine=f,a.jsonRpcConnectionEvents=h.events,a}return Object(a.a)(n,[{key:\"request\",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,i=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&\"object\"===typeof t&&!Array.isArray(t)){e.next=2;break}throw b.ethErrors.rpc.invalidRequest({message:S.invalidRequestArgs(),data:t});case 2:if(n=t.method,r=t.params,\"string\"===typeof n&&0!==n.length){e.next=5;break}throw b.ethErrors.rpc.invalidRequest({message:S.invalidRequestMethod(),data:t});case 5:if(void 0===r||Array.isArray(r)||\"object\"===typeof r&&null!==r){e.next=7;break}throw b.ethErrors.rpc.invalidRequest({message:S.invalidRequestParams(),data:t});case 7:return e.abrupt(\"return\",new Promise((function(e,t){i._rpcRequest({method:n,params:r},Object(g.j)(e,t))})));case 8:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"send\",value:function(e,t){this._rpcRequest(e,t)}},{key:\"sendAsync\",value:function(e){var t=this;return new Promise((function(n,r){t._rpcRequest(e,Object(g.j)(n,r))}))}},{key:\"_handleStreamDisconnect\",value:function(e,t){!function(e,t,n){var r='Torus: Lost connection to \"'.concat(e,'\".');null!==t&&void 0!==t&&t.stack&&(r+=\"\\n\".concat(t.stack)),L.warn(r),n&&n.listenerCount(\"error\")>0&&n.emit(\"error\",r)}(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}]),n}(g.e),M=function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o=function r(){n.apply(void 0,i),e.removeEventListener(t,r)};e.addEventListener(t,o)};function B(){return G.apply(this,arguments)}function G(){return(G=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",new Promise((function(e){\"loading\"!==document.readyState?e():M(document,\"DOMContentLoaded\",e)})));case 1:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(e){var t=window.document.createElement(\"template\"),n=e.trim();return t.innerHTML=n,t.content.firstChild},Y=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var r;Object(i.a)(this,n);var a=e.url,s=e.target,c=e.features;return r=t.call(this),p()(Object(o.a)(r),\"url\",void 0),p()(Object(o.a)(r),\"target\",void 0),p()(Object(o.a)(r),\"features\",void 0),p()(Object(o.a)(r),\"window\",void 0),p()(Object(o.a)(r),\"windowTimer\",void 0),p()(Object(o.a)(r),\"iClosedWindow\",void 0),r.url=a,r.target=s||\"_blank\",r.features=c||F(W),r.window=void 0,r.windowTimer=void 0,r.iClosedWindow=!1,r._setupTimer(),r}return Object(a.a)(n,[{key:\"_setupTimer\",value:function(){var e=this;this.windowTimer=Number(setInterval((function(){e.window&&e.window.closed&&(clearInterval(e.windowTimer),e.iClosedWindow||e.emit(\"close\"),e.iClosedWindow=!1,e.window=void 0),void 0===e.window&&clearInterval(e.windowTimer)}),500))}},{key:\"open\",value:function(){var e;return this.window=window.open(this.url.href,this.target,this.features),null!==(e=this.window)&&void 0!==e&&e.focus&&this.window.focus(),Promise.resolve()}},{key:\"close\",value:function(){this.iClosedWindow=!0,this.window&&this.window.close()}},{key:\"redirect\",value:function(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}]),n}(g.e);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var J=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a;Object(i.a)(this,n);var s=r.maxEventListeners,c=void 0===s?100:s,u=r.jsonRpcStreamName,d=void 0===u?\"provider\":u;a=t.call(this,e,{maxEventListeners:c,jsonRpcStreamName:d}),p()(Object(o.a)(a),\"embedTranslations\",void 0),p()(Object(o.a)(a),\"torusUrl\",void 0),p()(Object(o.a)(a),\"dappStorageKey\",void 0),p()(Object(o.a)(a),\"windowRefs\",void 0),p()(Object(o.a)(a),\"tryWindowHandle\",void 0),p()(Object(o.a)(a),\"torusAlertContainer\",void 0),p()(Object(o.a)(a),\"torusIframe\",void 0),a._state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n._defaultState),a.torusUrl=\"\",a.dappStorageKey=\"\";var l=R.translations[function(){var e=window.navigator.language||\"en-US\",t=e.split(\"-\");return Object.prototype.hasOwnProperty.call(R.translations,t[0])?t[0]:\"en\"}()];a.embedTranslations=l.embed,a.windowRefs={},a.on(\"connect\",(function(){a._state.isConnected=!0}));return a.jsonRpcConnectionEvents.on(\"notification\",(function(e){var t=e.method,n=e.params;if(t===v.c.IFRAME_STATUS){var r=n.isFullScreen,i=n.rid;a._displayIframe({isFull:r,rid:i})}else if(t===v.c.CREATE_WINDOW){var o=n.windowId,s=n.url;a._createPopupBlockAlert(o,s)}else if(t===v.c.CLOSE_WINDOW)a._handleCloseWindow(n);else if(t===v.c.USER_LOGGED_IN){var c=n.currentLoginProvider;a._state.isLoggedIn=!0,a._state.currentLoginProvider=c}else t===v.c.USER_LOGGED_OUT&&(a._state.isLoggedIn=!1,a._state.currentLoginProvider=null,a._displayIframe())})),a}return Object(a.a)(n,[{key:\"isLoggedIn\",get:function(){return this._state.isLoggedIn}},{key:\"isIFrameFullScreen\",get:function(){return this._state.isIFrameFullScreen}},{key:\"isConnected\",value:function(){return this._state.isConnected}},{key:\"_initializeState\",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,i,a,o,s,c,u=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.torusUrl,r=t.dappStorageKey,i=t.torusAlertContainer,a=t.torusIframe,this.torusUrl=n,this.dappStorageKey=r,this.torusAlertContainer=i,this.torusIframe=a,this.torusIframe.addEventListener(\"load\",(function(){u._state.isIFrameFullScreen||u._displayIframe()})),e.next=9,this.request({method:v.b.GET_PROVIDER_STATE,params:[]});case 9:o=e.sent,s=o.currentLoginProvider,c=o.isLoggedIn,this._handleConnect(s,c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),L.error(\"Torus: Failed to get initial state. Please report this bug.\",e.t0);case 18:return e.prev=18,L.info(\"initialized communication state\"),this._state.initialized=!0,this.emit(\"_initialized\"),e.finish(18);case 23:case\"end\":return e.stop()}}),e,this,[[0,15,18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"_handleWindow\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.url,i=n.target,a=n.features,o=new URL(r||\"\".concat(this.torusUrl,\"/redirect?windowId=\").concat(e));this.dappStorageKey&&(o.hash?o.hash+=\"&dappStorageKey=\".concat(this.dappStorageKey):o.hash=\"#dappStorageKey=\".concat(this.dappStorageKey));var s=new Y({url:o,target:i,features:a});s.open(),s.window?(this.windowRefs[e]=s,this.request({method:v.b.OPENED_WINDOW,params:{windowId:e}}),s.once(\"close\",(function(){delete t.windowRefs[e],t.request({method:v.b.CLOSED_WINDOW,params:{windowId:e}})}))):this._createPopupBlockAlert(e,o.href)}},{key:\"_displayIframe\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFull,n=void 0!==t&&t,r=e.rid,i=void 0===r?\"\":r,a={};if(n)a.display=\"block\",a.width=\"100%\",a.height=\"100%\",a.top=\"0px\",a.right=\"0px\",a.left=\"0px\",a.bottom=\"0px\";else switch(a.display=this._state.torusWidgetVisibility?\"block\":\"none\",a.height=\"70px\",a.width=\"70px\",this._state.buttonPosition){case E:a.top=\"0px\",a.left=\"0px\",a.right=\"auto\",a.bottom=\"auto\";break;case T:a.top=\"0px\",a.right=\"0px\",a.left=\"auto\",a.bottom=\"auto\";break;case A:a.bottom=\"0px\",a.right=\"0px\",a.top=\"auto\",a.left=\"auto\";break;default:a.bottom=\"0px\",a.left=\"0px\",a.top=\"auto\",a.right=\"auto\"}Object.assign(this.torusIframe.style,a),this._state.isIFrameFullScreen=n,this.request({method:v.b.IFRAME_STATUS,params:{isIFrameFullScreen:n,rid:i}})}},{key:\"hideTorusButton\",value:function(){this._state.torusWidgetVisibility=!1,this._displayIframe()}},{key:\"showTorusButton\",value:function(){this._state.torusWidgetVisibility=!0,this._displayIframe()}},{key:\"_rpcRequest\",value:function(e,t){var n=t,r=e;Array.isArray(r)||r.jsonrpc||(r.jsonrpc=\"2.0\"),this.tryWindowHandle(r,n)}},{key:\"_handleConnect\",value:function(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit(\"connect\",{currentLoginProvider:e,isLoggedIn:t}),L.debug(C.connected(e)))}},{key:\"_handleDisconnect\",value:function(e,t){var n;(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e)&&(this._state.isConnected=!1,e?(n=new b.EthereumRpcError(1013,t||S.disconnected()),L.debug(n)):(n=new b.EthereumRpcError(1011,t||S.permanentlyDisconnected()),L.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit(\"disconnect\",n))}},{key:\"_handleCloseWindow\",value:function(e){var t=e.windowId;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}},{key:\"_createPopupBlockAlert\",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,i,a,o,s,c,u=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getLogoUrl(),i=V('<div id=\"torusAlert\" class=\"torus-alert--v2\">'+'<div id=\"torusAlert__logo\"><img src=\"'.concat(r,'\" /></div>')+\"<div>\"+'<h1 id=\"torusAlert__title\">'.concat(this.embedTranslations.actionRequired,\"</h1>\")+'<p id=\"torusAlert__desc\">'.concat(this.embedTranslations.pendingAction,\"</p>\")+\"</div></div>\"),a=V('<div><a id=\"torusAlert__btn\">'.concat(this.embedTranslations.continue,\"</a></div>\")),(o=V('<div id=\"torusAlert__btn-container\"></div>')).appendChild(a),i.appendChild(o),s=function(){a.addEventListener(\"click\",(function(){u._handleWindow(t,{url:n,target:\"_blank\",features:F(z)}),i.remove(),0===u.torusAlertContainer.children.length&&(u.torusAlertContainer.style.display=\"none\")}))},c=function(){u.torusAlertContainer.appendChild(i)},e.next=10,B();case 10:c(),s(),this.torusAlertContainer.style.display=\"block\";case 13:case\"end\":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:\"getLogoUrl\",value:function(){return\"\".concat(this.torusUrl,\"/images/torus_icon-blue.svg\")}}]),n}(H);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}p()(J,\"_defaultState\",{buttonPosition:\"bottom-left\",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});var X=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e,r){var a;Object(i.a)(this,n);var s=r.maxEventListeners,c=void 0===s?100:s,u=r.jsonRpcStreamName,d=void 0===u?\"provider\":u;a=t.call(this,e,{maxEventListeners:c,jsonRpcStreamName:d}),p()(Object(o.a)(a),\"chainId\",void 0),p()(Object(o.a)(a),\"selectedAddress\",void 0),p()(Object(o.a)(a),\"tryWindowHandle\",void 0),a._state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n._defaultState),a.selectedAddress=null,a.chainId=null,a._handleAccountsChanged=a._handleAccountsChanged.bind(Object(o.a)(a)),a._handleChainChanged=a._handleChainChanged.bind(Object(o.a)(a)),a._handleUnlockStateChanged=a._handleUnlockStateChanged.bind(Object(o.a)(a)),a.on(\"connect\",(function(){a._state.isConnected=!0}));return a.jsonRpcConnectionEvents.on(\"notification\",(function(e){var t=e.method,n=e.params;t===v.e.ACCOUNTS_CHANGED?a._handleAccountsChanged(n):t===v.e.UNLOCK_STATE_CHANGED?a._handleUnlockStateChanged(n):t===v.e.CHAIN_CHANGED&&a._handleChainChanged(n)})),a}return Object(a.a)(n,[{key:\"isConnected\",value:function(){return this._state.isConnected}},{key:\"_initializeState\",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.request({method:v.d.GET_PROVIDER_STATE,params:[]});case 3:t=e.sent,n=t.accounts,r=t.chainId,i=t.isUnlocked,this.emit(\"connect\",{chainId:r}),this._handleChainChanged({chainId:r}),this._handleUnlockStateChanged({accounts:n,isUnlocked:i}),this._handleAccountsChanged(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),L.error(\"Torus: Failed to get initial state. Please report this bug.\",e.t0);case 16:return e.prev=16,L.info(\"initialized provider state\"),this._state.initialized=!0,this.emit(\"_initialized\"),e.finish(16);case 21:case\"end\":return e.stop()}}),e,this,[[0,13,16,21]])})));return function(){return e.apply(this,arguments)}}()},{key:\"_rpcRequest\",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t,a=e;if(!Array.isArray(a))if(a.jsonrpc||(a.jsonrpc=\"2.0\"),\"solana_accounts\"===a.method||\"solana_requestAccounts\"===a.method)i=function(e,i){n._handleAccountsChanged(i.result||[],\"solana_accounts\"===a.method,r),t(e,i)};else if(\"wallet_getProviderState\"===a.method)return void this._rpcEngine.handle(e,i);this.tryWindowHandle(a,i)}},{key:\"_handleConnect\",value:function(e){this._state.isConnected||(this._state.isConnected=!0,this.emit(\"connect\",{chainId:e}),L.debug(C.connected(e)))}},{key:\"_handleDisconnect\",value:function(e,t){var n;(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e)&&(this._state.isConnected=!1,e?(n=new b.EthereumRpcError(1013,t||S.disconnected()),L.debug(n)):(n=new b.EthereumRpcError(1011,t||S.permanentlyDisconnected()),L.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit(\"disconnect\",n))}},{key:\"_handleAccountsChanged\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e;Array.isArray(i)||(L.error(\"Torus: Received non-array accounts parameter. Please report this bug.\",i),i=[]);var a,o=Object(r.a)(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(\"string\"!==typeof s){L.error(\"Torus: Received non-string account. Please report this bug.\",e),i=[];break}}}catch(c){o.e(c)}finally{o.f()}x()(this._state.accounts,i)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&L.error('Torus: \"solana_accounts\" unexpectedly updated accounts. Please report this bug.',i),this._state.accounts=i,this.emit(\"accountsChanged\",i)),this.selectedAddress!==i[0]&&(this.selectedAddress=i[0]||null)}},{key:\"_handleChainChanged\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.chainId;t?\"loading\"===t?this._handleDisconnect(!0):(this._handleConnect(t),t!==this.chainId&&(this.chainId=t,this._state.initialized&&this.emit(\"chainChanged\",this.chainId))):L.error(\"Torus: Received invalid network parameters. Please report this bug.\",{chainId:t})}},{key:\"_handleUnlockStateChanged\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.accounts,n=e.isUnlocked;\"boolean\"===typeof n?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(t||[])):L.error(\"Torus: Received invalid isUnlocked parameter. Please report this bug.\",{isUnlocked:n})}}]),n}(H);function $(e){return new Promise((function(t,n){try{var r=document.createElement(\"img\");r.onload=function(){return t(!0)},r.onerror=function(){return t(!1)},r.src=e}catch(i){n(i)}}))}p()(X,\"_defaultState\",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});var ee=function(e){var t=e.document,n=t.querySelector('head > meta[property=\"og:site_name\"]');if(n)return n.content;var r=t.querySelector('head > meta[name=\"title\"]');return r?r.content:t.title&&t.title.length>0?t.title:e.location.hostname};function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.document,r=n.querySelector('head > link[rel=\"shortcut icon\"]'),e.t0=r,!e.t0){e.next=8;break}return e.next=7,$(r.href);case 7:e.t0=e.sent;case 8:if(!e.t0){e.next=10;break}return e.abrupt(\"return\",r.href);case 10:if(r=Array.from(n.querySelectorAll('head > link[rel=\"icon\"]')).find((function(e){return Boolean(e.href)})),e.t1=r,!e.t1){e.next=16;break}return e.next=15,$(r.href);case 15:e.t1=e.sent;case 16:if(!e.t1){e.next=18;break}return e.abrupt(\"return\",r.href);case 18:return e.abrupt(\"return\",\"\");case 21:return e.prev=21,e.t2=e.catch(0),e.abrupt(\"return\",\"\");case 24:case\"end\":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}var re=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ee(window),e.next=3,te(window);case 3:return e.t1=e.sent,e.abrupt(\"return\",{name:e.t0,icon:e.t1});case 5:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=[\"send_transaction\",\"sign_transaction\",\"sign_all_transactions\",\"sign_message\",\"connect\"],se=[v.b.SET_PROVIDER],ce=function(e){var t;try{t=window[e];var n=\"__storage_test__\";return t.setItem(n,n),t.removeItem(n),!0}catch(r){return r&&(22===r.code||1014===r.code||\"QuotaExceededError\"===r.name||\"NS_ERROR_DOM_QUOTA_REACHED\"===r.name)&&t&&0!==t.length}}(\"localStorage\");!function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,\"undefined\"!==typeof document){e.next=3;break}return e.abrupt(\"return\");case 3:return t=document.createElement(\"link\"),e.next=6,q(\"production\");case 6:n=e.sent,r=n.torusUrl,t.href=\"\".concat(r,\"/frame\"),t.crossOrigin=\"anonymous\",t.type=\"text/html\",t.rel=\"prefetch\",t.relList&&t.relList.supports&&t.relList.supports(\"prefetch\")&&document.head.appendChild(t),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),L.warn(e.t0);case 18:case\"end\":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}()();var ue=function(){function t(){Object(i.a)(this,t);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.modalZIndex,r=void 0===n?99999:n;p()(this,\"isInitialized\",void 0),p()(this,\"torusAlert\",void 0),p()(this,\"modalZIndex\",void 0),p()(this,\"alertZIndex\",void 0),p()(this,\"requestedLoginProvider\",void 0),p()(this,\"provider\",void 0),p()(this,\"communicationProvider\",void 0),p()(this,\"dappStorageKey\",void 0),p()(this,\"torusAlertContainer\",void 0),p()(this,\"torusUrl\",void 0),p()(this,\"torusIframe\",void 0),p()(this,\"styleLink\",void 0),this.torusUrl=\"\",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=r,this.alertZIndex=r+1e3,this.dappStorageKey=\"\"}return Object(a.a)(t,[{key:\"isLoggedIn\",get:function(){return!!this.communicationProvider&&this.communicationProvider.isLoggedIn}},{key:\"init\",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r,i,a,o,s,c,d,h,p,f,v,g,b,w,y,O,k,_,j,x,S,C=this,E=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=E.length>0&&void 0!==E[0]?E[0]:{},n=t.buildEnv,r=void 0===n?I:n,i=t.enableLogging,a=void 0!==i&&i,o=t.network,s=t.showTorusButton,c=void 0!==s&&s,d=t.useLocalStorage,h=void 0!==d&&d,p=t.buttonPosition,f=void 0===p?P:p,v=t.apiKey,g=void 0===v?\"torus-default\":v,b=t.extraParams,w=void 0===b?{}:b,!this.isInitialized){e.next=3;break}throw new Error(\"Already initialized\");case 3:return Object(m.f)(g),e.next=6,q(r);case 6:return y=e.sent,O=y.torusUrl,k=y.logLevel,L.info(O,\"url loaded\"),this.torusUrl=O,L.setDefaultLevel(k),a?L.enableAll():L.disableAll(),_=this.handleDappStorageKey(h),(j=new URL(O)).pathname.endsWith(\"/\")?j.pathname+=\"frame\":j.pathname+=\"/frame\",x=new URLSearchParams,_&&x.append(\"dappStorageKey\",_),x.append(\"origin\",window.location.origin),j.hash=x.toString(),this.torusIframe=V('<iframe\\n        id=\"torusIframe\"\\n        class=\"torusIframe\"\\n        src=\"'.concat(j.href,'\"\\n        style=\"display: none; position: fixed; top: 0; right: 0; width: 100%;\\n        height: 100%; border: none; border-radius: 0; z-index: ').concat(this.modalZIndex.toString(),'\"\\n      ></iframe>')),this.torusAlertContainer=V('<div id=\"torusAlertContainer\" style=\"display:none; z-index: '.concat(this.alertZIndex.toString(),'\"></div>')),this.styleLink=V('<link href=\"'.concat(O,'/css/widget.css\" rel=\"stylesheet\" type=\"text/css\">')),S=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",new Promise((function(e,t){try{window.document.head.appendChild(C.styleLink),window.document.body.appendChild(C.torusIframe),window.document.body.appendChild(C.torusAlertContainer),C.torusIframe.addEventListener(\"load\",Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re();case 2:return n=t.sent,C.torusIframe.contentWindow.postMessage({buttonPosition:f,apiKey:g,network:\"string\"===typeof o?K(o):o,dappMetadata:n,extraParams:w},j.origin),t.next=6,C._setupWeb3({torusUrl:O});case 6:c?C.showTorusButton():C.hideTorusButton(),C.isInitialized=!0,window.torus=C,e();case 10:case\"end\":return t.stop()}}),t)}))))}catch(n){t(n)}})));case 1:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=26,B();case 26:return e.next=28,S();case 28:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"login\",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r=this,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},this.isInitialized){e.next=3;break}throw new Error(\"Call init() first\");case 3:return e.prev=3,this.requestedLoginProvider=t.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0}),e.next=8,new Promise((function(e,n){r.provider._rpcRequest({method:\"solana_requestAccounts\",params:[r.requestedLoginProvider,t.login_hint]},Object(g.j)(e,n))}));case 8:if(n=e.sent,!(Array.isArray(n)&&n.length>0)){e.next=11;break}return e.abrupt(\"return\",n);case 11:throw new Error(\"Login failed\");case 14:throw e.prev=14,e.t0=e.catch(3),L.error(\"login failed\",e.t0),e.t0;case 18:return e.prev=18,this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe(),e.finish(18);case 21:case\"end\":return e.stop()}}),e,this,[[3,14,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:\"logout\",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.communicationProvider.isLoggedIn){e.next=2;break}throw new Error(\"Not logged in\");case 2:return e.next=4,this.communicationProvider.request({method:v.b.LOGOUT,params:[]});case 4:this.requestedLoginProvider=null;case 5:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"cleanUp\",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.communicationProvider.isLoggedIn){e.next=3;break}return e.next=3,this.logout();case 3:this.clearInit();case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"clearInit\",value:function(){function e(e){return e instanceof Element||e instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}},{key:\"hideTorusButton\",value:function(){this.communicationProvider.hideTorusButton()}},{key:\"showTorusButton\",value:function(){this.communicationProvider.showTorusButton()}},{key:\"setProvider\",value:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.communicationProvider.request({method:v.b.SET_PROVIDER,params:ae({},t)});case 2:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"showWallet\",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,i,a,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.communicationProvider.request({method:v.b.WALLET_INSTANCE_ID,params:[]});case 3:r=e.sent,i=t?\"/\".concat(t):\"\",(a=new URL(\"\".concat(this.torusUrl,\"/wallet\").concat(i))).searchParams.append(\"instanceId\",r),Object.keys(n).forEach((function(e){a.searchParams.append(e,n[e])})),this.dappStorageKey&&(a.hash=\"#dappStorageKey=\".concat(this.dappStorageKey)),new Y({url:a,features:F(U)}).open();case 11:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"getUserInfo\",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.communicationProvider.request({method:v.b.USER_INFO,params:[]});case 2:return t=e.sent,e.abrupt(\"return\",t);case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"initiateTopup\",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isInitialized){e.next=2;break}throw new Error(\"Torus is not initialized\");case 2:return r=D(),this.communicationProvider._handleWindow(r),e.next=6,this.communicationProvider.request({method:v.b.TOPUP,params:{provider:t,params:n,windowId:r}});case 6:return i=e.sent,e.abrupt(\"return\",i);case 8:case\"end\":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:\"sendTransaction\",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:\"send_transaction\",params:{message:t.serialize({requireAllSignatures:!1}).toString(\"hex\")}});case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"signTransaction\",value:function(){var t=Object(u.a)(l.a.mark((function t(n){var r,i,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.provider.request({method:\"sign_transaction\",params:{message:n.serialize({requireAllSignatures:!1}).toString(\"hex\")}});case 2:return r=t.sent,i=e.from(r,\"hex\"),a=f.c.from(i),t.abrupt(\"return\",a);case 6:case\"end\":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:\"signAllTransactions\",value:function(){var t=Object(u.a)(l.a.mark((function t(n){var r,i,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.map((function(e){return e.serialize({requireAllSignatures:!1}).toString(\"hex\")})),t.next=3,this.provider.request({method:\"sign_all_transactions\",params:{message:r}});case 3:return i=t.sent,a=i.map((function(t){return f.c.from(e.from(t,\"hex\"))})),t.abrupt(\"return\",a);case 6:case\"end\":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:\"signMessage\",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:\"sign_message\",params:{data:t}});case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:\"getGaslessPublicKey\",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.request({method:\"get_gasless_public_key\",params:[]});case 2:return t=e.sent,e.abrupt(\"return\",t);case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"handleDappStorageKey\",value:function(e){var t=\"\";if(ce&&e){var n=window.localStorage.getItem(R.localStorageKey);if(n)t=n;else{var r=\"torus-app-\".concat(D());window.localStorage.setItem(R.localStorageKey,r),t=r}}return this.dappStorageKey=t,t}},{key:\"_setupWeb3\",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,i,a,o,s,c,u=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.info(\"setupWeb3 running\"),n=new g.a({name:\"embed_torus\",target:\"iframe_torus\",targetWindow:this.torusIframe.contentWindow}),r=new g.a({name:\"embed_communication\",target:\"iframe_communication\",targetWindow:this.torusIframe.contentWindow}),i=new X(n,{}),a=new J(r,{}),i.tryWindowHandle=function(e,t){var n=e;if(!Array.isArray(n)&&oe.includes(n.method)){if(!u.communicationProvider.isLoggedIn)throw new Error(\"User Not Logged In\");var r=D();a._handleWindow(r,{target:\"_blank\",features:F(z)}),n.windowId=r}i._rpcEngine.handle(n,t)},a.tryWindowHandle=function(e,t){var n=e;if(!Array.isArray(n)&&se.includes(n.method)){var r=D();a._handleWindow(r,{target:\"_blank\",features:F(N)}),n.params.windowId=r}a._rpcEngine.handle(n,t)},(o=function(e){var t=i[e],n=u;i[e]=function(e,r){var i=e.method,a=e.params,o=void 0===a?[]:a;if(\"solana_requestAccounts\"===i){if(!r)return n.login({loginProvider:o[0]});n.login({loginProvider:o[0]}).then((function(e){return r(null,e)})).catch((function(e){return r(e)}))}return t.apply(this,[e,r])}})(\"request\"),o(\"sendAsync\"),o(\"send\"),s=new Proxy(i,{deleteProperty:function(){return!0}}),c=new Proxy(a,{deleteProperty:function(){return!0}}),this.provider=s,this.communicationProvider=c,e.next=17,Promise.all([i._initializeState(),a._initializeState(ae(ae({},t),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]);case 17:L.debug(\"Torus - injected provider\");case 18:case\"end\":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}()}).call(this,n(23).Buffer)},1519:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"SolanaWalletAdapter\",(function(){return k}));var r=n(9),i=n(7),a=n(8),o=n(10),s=n(53),c=n(38),u=n(11),d=n(12),l=n(1),h=n.n(l),p=n(14),f=n.n(p),v=n(1400),m=n(13),g=n(1309),b=n(25),w=n.n(b);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=t.call(this),f()(Object(o.a)(e),\"name\",m.i.TORUS_SOLANA),f()(Object(o.a)(e),\"adapterNamespace\",m.c.SOLANA),f()(Object(o.a)(e),\"currentChainNamespace\",m.f.SOLANA),f()(Object(o.a)(e),\"type\",m.a.EXTERNAL),f()(Object(o.a)(e),\"status\",m.d.NOT_READY),f()(Object(o.a)(e),\"torusInstance\",null),f()(Object(o.a)(e),\"torusWalletOptions\",void 0),f()(Object(o.a)(e),\"initParams\",void 0),f()(Object(o.a)(e),\"loginSettings\",{}),f()(Object(o.a)(e),\"solanaProvider\",null),f()(Object(o.a)(e),\"rehydrated\",!1),e.torusWalletOptions=r.adapterSettings||{},e.initParams=r.initParams||{},e.loginSettings=r.loginSettings||{},e.chainConfig=r.chainConfig||null,e}return Object(a.a)(n,[{key:\"provider\",get:function(){var e;return this.status===m.d.CONNECTED&&this.solanaProvider&&(null===(e=this.solanaProvider)||void 0===e?void 0:e.provider)||null},set:function(e){throw new Error(\"Not implemented\")}},{key:\"init\",value:function(){var e=Object(r.a)(h.a.mark((function e(t){var r,i,a,o,u,d,l,p,f,b,y,k,_,j,x;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(s.a)(Object(c.a)(n.prototype),\"checkInitializationRequirements\",this).call(this),this.chainConfig?(f=this.chainConfig,b=f.chainId,y=f.blockExplorer,k=f.displayName,_=f.rpcTarget,j=f.ticker,x=f.tickerName,r={chainId:b,rpcTarget:_,blockExplorerUrl:y,displayName:k,tickerName:x,ticker:j,logo:\"\"}):(this.chainConfig=Object(m.m)(m.f.SOLANA,\"0x1\"),i=this.chainConfig,a=i.blockExplorer,o=i.displayName,u=i.ticker,d=i.tickerName,l=i.rpcTarget,p=i.chainId,r={chainId:p,rpcTarget:l,blockExplorerUrl:a,displayName:o,ticker:u,tickerName:d,logo:\"\"}),this.torusInstance=new v.a(this.torusWalletOptions),e.next=5,this.torusInstance.init(O(O({showTorusButton:!1},this.initParams),{},{network:r}));case 5:if(this.solanaProvider=new g.TorusInjectedProvider({config:{chainConfig:this.chainConfig}}),this.status=m.d.READY,this.emit(m.b.READY,m.i.TORUS_SOLANA),e.prev=8,!t.autoConnect){e.next=13;break}return this.rehydrated=!0,e.next=13,this.connect();case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(8),w.a.error(\"Failed to connect with cached torus solana provider\",e.t0),this.emit(m.b.ERRORED,e.t0);case 19:case\"end\":return e.stop()}}),e,this,[[8,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"connect\",value:function(){var e=Object(r.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(s.a)(Object(c.a)(n.prototype),\"checkConnectionRequirements\",this).call(this),this.torusInstance){e.next=3;break}throw m.j.notReady(\"Torus wallet is not initialized\");case 3:if(this.solanaProvider){e.next=5;break}throw m.j.notReady(\"Torus wallet is not initialized\");case 5:return this.status=m.d.CONNECTING,this.emit(m.b.CONNECTING,{adapter:m.i.TORUS_SOLANA}),e.prev=7,e.next=10,this.torusInstance.login(this.loginSettings);case 10:return e.next=12,this.solanaProvider.setupProvider(this.torusInstance.provider);case 12:return this.status=m.d.CONNECTED,this.torusInstance.showTorusButton(),this.emit(m.d.CONNECTED,{adapter:m.i.TORUS_SOLANA,reconnected:this.rehydrated}),e.abrupt(\"return\",this.provider);case 18:throw e.prev=18,e.t0=e.catch(7),this.status=m.d.READY,this.rehydrated=!1,this.emit(m.b.ERRORED,e.t0),m.k.connectionError(\"Failed to login with torus solana wallet\");case 24:case\"end\":return e.stop()}}),e,this,[[7,18]])})));return function(){return e.apply(this,arguments)}}()},{key:\"disconnect\",value:function(){var e=Object(r.a)(h.a.mark((function e(){var t,n=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{cleanup:!1},this.status===m.d.CONNECTED){e.next=3;break}throw m.k.notConnectedError(\"Not connected with wallet\");case 3:if(this.torusInstance){e.next=5;break}throw m.j.notReady(\"Torus wallet is not initialized\");case 5:return e.next=7,this.torusInstance.logout();case 7:t.cleanup?(this.status=m.d.NOT_READY,this.torusInstance=null,this.solanaProvider=null):this.status=m.d.READY,this.emit(m.b.DISCONNECTED);case 9:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"getUserInfo\",value:function(){var e=Object(r.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===m.d.CONNECTED){e.next=2;break}throw m.k.notConnectedError(\"Not connected with wallet\");case 2:if(this.torusInstance){e.next=4;break}throw m.j.notReady(\"Torus wallet is not initialized\");case 4:return e.next=6,this.torusInstance.getUserInfo();case 6:return t=e.sent,e.abrupt(\"return\",t);case 8:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"setAdapterSettings\",value:function(e){}}]),n}(m.e)}}]);","name":"static/js/13.f4708c05.chunk.js","map":{"version":3,"sources":["static/js/13.f4708c05.chunk.js"],"names":["this","push","module","exports","__webpack_require__","equal","a","b","constructor","length","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","__webpack_exports__","isStream","stream","pipe","isDuplexStream","writable","_write","_writableState","isWritableStream","readable","_read","_readableState","isReadableStream","d","Buffer","Torus","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default","n","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default","_solana_web3_js__WEBPACK_IMPORTED_MODULE_9__","_toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__","_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_11__","_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__","eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__","is_stream__WEBPACK_IMPORTED_MODULE_14__","pump__WEBPACK_IMPORTED_MODULE_15__","pump__WEBPACK_IMPORTED_MODULE_15___default","loglevel__WEBPACK_IMPORTED_MODULE_16__","loglevel__WEBPACK_IMPORTED_MODULE_16___default","fast_deep_equal__WEBPACK_IMPORTED_MODULE_17__","fast_deep_equal__WEBPACK_IMPORTED_MODULE_17___default","messages","disconnected","permanentlyDisconnected","unsupportedSync","method","concat","invalidDuplexStream","invalidOptions","maxEventListeners","invalidRequestArgs","invalidRequestMethod","invalidRequestParams","invalidLoggerObject","invalidLoggerMethod","connected","chainId","TORUS_BUILD_ENV","BUTTON_POSITION","configuration","supportedVerifierList","api","translations","en","embed","continue","actionRequired","pendingAction","cookiesRequired","enableCookies","clickHere","de","ja","ko","zh","prodTorusUrl","localStorageKey","window","location","hostname","log","getLogger","getWindowId","Math","random","slice","getTorusUrl","_ref2","mark","_callee","buildEnv","torusUrl","logLevel","wrap","_context","prev","next","t0","abrupt","stop","_x","apply","arguments","FEATURES_PROVIDER_CHANGE_WINDOW","height","width","FEATURES_DEFAULT_WALLET_WINDOW","FEATURES_DEFAULT_POPUP_WINDOW","FEATURES_CONFIRM_WINDOW","getPopupFeatures","_ref","w","h","dualScreenLeft","undefined","screenLeft","screenX","dualScreenTop","screenTop","screenY","innerWidth","document","documentElement","clientWidth","screen","innerHeight","clientHeight","left","abs","top","getNetworkConfig","label","blockExplorerUrl","displayName","logo","rpcTarget","ticker","tickerName","BaseProvider","_SafeEventEmitter","_super","connectionStream","_this","_ref$maxEventListener","_ref$jsonRpcStreamNam","jsonRpcStreamName","Error","isTorus","setMaxListeners","_handleConnect","bind","_handleDisconnect","_handleStreamDisconnect","_rpcRequest","_initializeState","request","sendAsync","mux","ignoreStream","jsonRpcConnection","createStream","rpcEngine","req","res","error","rpc","invalidRequest","message","data","done","origin","middleware","_rpcEngine","jsonRpcConnectionEvents","events","value","_request","_callee2","args","params","_this2","_context2","Promise","resolve","reject","_x2","payload","callback","_this3","streamName","remoteLabel","emitter","warningMsg","stack","warn","listenerCount","emit","logStreamDisconnectWarning","handleEvent","handle","eventName","handler","_len","handlerArgs","_key","handlerWrapper","removeEventListener","addEventListener","documentReady","_documentReady","_callee24","_context24","readyState","htmlToElement","html","template","createElement","trimmedHtml","trim","innerHTML","content","firstChild","PopupHandler","_SafeEventEmitter2","_super2","_this4","url","target","features","windowTimer","iClosedWindow","_setupTimer","_this5","Number","setInterval","closed","clearInterval","_this$window","open","href","focus","close","locationReplaceOnRedirect","replace","ownKeys$2","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","TorusCommunicationProvider","_BaseProvider","_super3","_this6","_ref$maxEventListener2","_ref$jsonRpcStreamNam2","_state","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","_objectSpread$2","_defaultState","dappStorageKey","languageTranslations","userLanguage","navigator","language","userLanguages","split","getUserLanguage","embedTranslations","windowRefs","on","isConnected","IFRAME_STATUS","isFullScreen","rid","_displayIframe","isFull","CREATE_WINDOW","windowId","_createPopupBlockAlert","CLOSE_WINDOW","_handleCloseWindow","USER_LOGGED_IN","currentLoginProvider","isLoggedIn","USER_LOGGED_OUT","get","isIFrameFullScreen","_initializeState2","_callee3","torusAlertContainer","torusIframe","_yield$this$request","_this7","_context3","GET_PROVIDER_STATE","sent","info","initialized","finish","_x3","_this8","_ref3","finalUrl","URL","hash","handledWindow","OPENED_WINDOW","once","CLOSED_WINDOW","_ref4","_ref4$isFull","_ref4$rid","style","display","right","bottom","torusWidgetVisibility","buttonPosition","assign","cb","_payload","jsonrpc","tryWindowHandle","debug","isRecoverable","errorMessage","isPermanentlyDisconnected","_createPopupBlockAlert2","_callee4","logoUrl","torusAlert","successAlert","btnContainer","bindOnLoad","attachOnLoad","_this9","_context4","getLogoUrl","appendChild","_handleWindow","remove","children","_x4","_x5","ownKeys$1","hasEmittedConnection","TorusInPageProvider","_BaseProvider2","_super4","_this10","_ref$maxEventListener3","_ref$jsonRpcStreamNam3","_objectSpread$1","selectedAddress","_handleAccountsChanged","_handleChainChanged","_handleUnlockStateChanged","ACCOUNTS_CHANGED","UNLOCK_STATE_CHANGED","CHAIN_CHANGED","_initializeState3","_callee5","_yield$this$request2","accounts","isUnlocked","_context5","_this11","isInternal","err","result","isEthAccounts","finalAccounts","_step","_iterator","s","account","e","f","_ref5","_ref6","imgExists","img","onload","onerror","src","getSiteName","siteName","querySelector","metaTitle","title","getSiteIcon","_x6","_getSiteIcon","_callee25","_document","icon","_context25","from","querySelectorAll","find","_icon","Boolean","t1","t2","getSiteMetadata","_ref7","_callee6","_context6","name","ownKeys","_objectSpread","PROVIDER_UNSAFE_METHODS","COMMUNICATION_UNSAFE_METHODS","SET_PROVIDER","isLocalStorageAvailable","type","storage","x","setItem","removeItem","code","storageAvailable","_preLoadIframe","_callee7","torusIframeHtml","_yield$getTorusUrl","_context7","crossOrigin","rel","relList","supports","head","_ref8","_ref8$modalZIndex","modalZIndex","isInitialized","requestedLoginProvider","alertZIndex","communicationProvider","_init","_callee10","_ref9","_ref9$buildEnv","_ref9$enableLogging","enableLogging","network","_ref9$showTorusButton","showTorusButton","_ref9$useLocalStorage","useLocalStorage","_ref9$buttonPosition","_ref9$apiKey","apiKey","_ref9$extraParams","extraParams","_yield$getTorusUrl2","torusIframeUrl","hashParams","handleSetup","_this12","_args10","_context10","setDefaultLevel","enableAll","disableAll","handleDappStorageKey","pathname","endsWith","URLSearchParams","append","styleLink","_ref10","_callee9","_context9","body","_callee8","dappMetadata","_context8","contentWindow","postMessage","_setupWeb3","hideTorusButton","torus","_login","_callee11","_this13","_args11","_context11","loginProvider","provider","login_hint","_logout","_callee12","_context12","LOGOUT","_cleanUp","_callee13","_context13","logout","clearInit","isElement","element","Element","Document","contains","_setProvider","_callee14","_context14","_x7","_showWallet","_callee15","path","instanceId","finalPath","_args15","_context15","WALLET_INSTANCE_ID","searchParams","_x8","_getUserInfo","_callee16","userInfoResponse","_context16","USER_INFO","_initiateTopup","_callee17","topupResponse","_context17","TOPUP","_x9","_x10","_sendTransaction","_callee18","transaction","response","_context18","serialize","requireAllSignatures","_x11","_signTransaction","_callee19","buf","sendTx","_context19","_x12","_signAllTransactions","_callee20","transactions","encodedTransactions","allSignedTransaction","_context20","map","msg","_x13","_signMessage","_callee21","_context21","_x14","_getGaslessPublicKey","_callee22","_context22","storedKey","localStorage","getItem","generatedKey","_setupWeb","_callee23","providerParams","providerStream","communicationStream","inPageProvider","detectAccountRequestPrototypeModifier","proxiedInPageProvider","proxiedCommunicationProvider","_this14","_context23","targetWindow","includes","m","originalMethod","self","_request$params","login","then","catch","Proxy","deleteProperty","all","_x15","r","SolanaWalletAdapter","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_4__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_8__","_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_8___default","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default","_toruslabs_solana_embed__WEBPACK_IMPORTED_MODULE_10__","_web3auth_base__WEBPACK_IMPORTED_MODULE_11__","_web3auth_solana_provider__WEBPACK_IMPORTED_MODULE_12__","loglevel__WEBPACK_IMPORTED_MODULE_13__","loglevel__WEBPACK_IMPORTED_MODULE_13___default","_BaseAdapter","TORUS_SOLANA","SOLANA","EXTERNAL","NOT_READY","torusWalletOptions","adapterSettings","initParams","loginSettings","chainConfig","_this$solanaProvider","status","CONNECTED","solanaProvider","set","_","options","_this$chainConfig","blockExplorer","_this$chainConfig2","_chainId","_blockExplorer","_displayName","_rpcTarget","_ticker","_tickerName","torusInstance","init","config","READY","autoConnect","rehydrated","connect","ERRORED","_connect","notReady","CONNECTING","adapter","setupProvider","reconnected","connectionError","_disconnect","_args3","cleanup","notConnectedError","DISCONNECTED","userInfo","getUserInfo"],"mappings":"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"},"input":"(this[\"webpackJsonptwitter-clone\"] = this[\"webpackJsonptwitter-clone\"] || []).push([[13],{\n\n/***/ 1300:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n // do not edit .js files directly - edit src/index.jst\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) {\n        if (!equal(a[i], b[i])) return false;\n      }\n\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;) {\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    }\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  } // true if both NaN, false otherwise\n\n\n  return a !== a && b !== b;\n};\n\n/***/ }),\n\n/***/ 1301:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export isStream */\n/* unused harmony export isWritableStream */\n/* unused harmony export isReadableStream */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return isDuplexStream; });\n/* unused harmony export isTransformStream */\nfunction isStream(stream) {\n  return stream !== null && typeof stream === 'object' && typeof stream.pipe === 'function';\n}\nfunction isWritableStream(stream) {\n  return isStream(stream) && stream.writable !== false && typeof stream._write === 'function' && typeof stream._writableState === 'object';\n}\nfunction isReadableStream(stream) {\n  return isStream(stream) && stream.readable !== false && typeof stream._read === 'function' && typeof stream._readableState === 'object';\n}\nfunction isDuplexStream(stream) {\n  return isWritableStream(stream) && isReadableStream(stream);\n}\nfunction isTransformStream(stream) {\n  return isDuplexStream(stream) && typeof stream._transform === 'function';\n}\n\n/***/ }),\n\n/***/ 1400:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(Buffer) {/* unused harmony export BUTTON_POSITION */\n/* unused harmony export LOGIN_PROVIDER */\n/* unused harmony export PAYMENT_PROVIDER */\n/* unused harmony export TORUS_BUILD_ENV */\n/* unused harmony export TorusInPageProvider */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Torus; });\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(193);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(10);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(11);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(9);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(14);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _solana_web3_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1329);\n/* harmony import */ var _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1290);\n/* harmony import */ var _toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(278);\n/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(78);\n/* harmony import */ var eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(608);\n/* harmony import */ var eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var is_stream__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(1301);\n/* harmony import */ var pump__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(265);\n/* harmony import */ var pump__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(pump__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(25);\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(1300);\n/* harmony import */ var fast_deep_equal__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(fast_deep_equal__WEBPACK_IMPORTED_MODULE_17__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar messages = {\n  errors: {\n    disconnected: function disconnected() {\n      return \"Torus: Lost connection to Torus.\";\n    },\n    permanentlyDisconnected: function permanentlyDisconnected() {\n      return \"Torus: Disconnected from iframe. Page reload required.\";\n    },\n    unsupportedSync: function unsupportedSync(method) {\n      return \"Torus: The Torus Ethereum provider does not support synchronous methods like \".concat(method, \" without a callback parameter.\");\n    },\n    invalidDuplexStream: function invalidDuplexStream() {\n      return \"Must provide a Node.js-style duplex stream.\";\n    },\n    invalidOptions: function invalidOptions(maxEventListeners) {\n      return \"Invalid options. Received: { maxEventListeners: \".concat(maxEventListeners, \"}\");\n    },\n    invalidRequestArgs: function invalidRequestArgs() {\n      return \"Expected a single, non-array, object argument.\";\n    },\n    invalidRequestMethod: function invalidRequestMethod() {\n      return \"'args.method' must be a non-empty string.\";\n    },\n    invalidRequestParams: function invalidRequestParams() {\n      return \"'args.params' must be an object or array if provided.\";\n    },\n    invalidLoggerObject: function invalidLoggerObject() {\n      return \"'args.logger' must be an object if provided.\";\n    },\n    invalidLoggerMethod: function invalidLoggerMethod(method) {\n      return \"'args.logger' must include required method '\".concat(method, \"'.\");\n    }\n  },\n  info: {\n    connected: function connected(chainId) {\n      return \"Torus: Connected to chain with ID \\\"\".concat(chainId, \"\\\".\");\n    }\n  },\n  warnings: {}\n};\nvar PAYMENT_PROVIDER = {\n  MOONPAY: \"moonpay\",\n  WYRE: \"wyre\",\n  RAMPNETWORK: \"rampnetwork\",\n  XANPOOL: \"xanpool\",\n  MERCURYO: \"mercuryo\",\n  TRANSAK: \"transak\"\n};\nvar TORUS_BUILD_ENV = {\n  PRODUCTION: \"production\",\n  DEVELOPMENT: \"development\",\n  TESTING: \"testing\"\n};\nvar BUTTON_POSITION = {\n  BOTTOM_LEFT: \"bottom-left\",\n  TOP_LEFT: \"top-left\",\n  BOTTOM_RIGHT: \"bottom-right\",\n  TOP_RIGHT: \"top-right\"\n};\nvar LOGIN_PROVIDER = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\",\n  TWITCH: \"twitch\",\n  APPLE: \"apple\",\n  LINE: \"line\",\n  GITHUB: \"github\",\n  KAKAO: \"kakao\",\n  LINKEDIN: \"linkedin\",\n  TWITTER: \"twitter\",\n  WEIBO: \"weibo\",\n  WECHAT: \"wechat\",\n  EMAIL_PASSWORDLESS: \"email_passwordless\"\n};\nvar translations = {\n  en: {\n    embed: {\n      continue: \"Continue\",\n      actionRequired: \"Authorization required\",\n      pendingAction: \"Click continue to proceed with your request in a popup\",\n      cookiesRequired: \"Cookies Required\",\n      enableCookies: \"Please enable cookies in your browser preferences to access Torus\",\n      clickHere: \"More Info\"\n    }\n  },\n  de: {\n    embed: {\n      continue: \"Fortsetzen\",\n      actionRequired: \"Autorisierung erforderlich\",\n      pendingAction: \"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren\",\n      cookiesRequired: \"Cookies benötigt\",\n      enableCookies: \"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen\",\n      clickHere: \"Mehr Info\"\n    }\n  },\n  ja: {\n    embed: {\n      continue: \"継続する\",\n      actionRequired: \"認証が必要です\",\n      pendingAction: \"続行をクリックして、ポップアップでリクエストを続行します\",\n      cookiesRequired: \"必要なクッキー\",\n      enableCookies: \"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。\",\n      clickHere: \"詳しくは\"\n    }\n  },\n  ko: {\n    embed: {\n      continue: \"계속하다\",\n      actionRequired: \"승인 필요\",\n      pendingAction: \"팝업에서 요청을 진행하려면 계속을 클릭하십시오.\",\n      cookiesRequired: \"쿠키 필요\",\n      enableCookies: \"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.\",\n      clickHere: \"더 많은 정보\"\n    }\n  },\n  zh: {\n    embed: {\n      continue: \"继续\",\n      actionRequired: \"需要授权\",\n      pendingAction: \"单击继续以在弹出窗口中继续您的请求\",\n      cookiesRequired: \"必填Cookie\",\n      enableCookies: \"请在您的浏览器首选项中启用cookie以访问Torus。\",\n      clickHere: \"更多信息\"\n    }\n  }\n};\nvar configuration = {\n  supportedVerifierList: [LOGIN_PROVIDER.GOOGLE, LOGIN_PROVIDER.REDDIT, LOGIN_PROVIDER.DISCORD],\n  api: \"https://api.tor.us\",\n  translations: translations,\n  prodTorusUrl: \"\",\n  localStorageKey: \"torus-\".concat(window.location.hostname)\n};\nvar log = loglevel__WEBPACK_IMPORTED_MODULE_16___default.a.getLogger(\"solana-embed\");\n/**\n * json-rpc-engine middleware that logs RPC errors and and validates req.method.\n *\n * @param log - The logging API to use.\n * @returns  json-rpc-engine middleware function\n */\n\nfunction createErrorMiddleware() {\n  return function (req, res, next) {\n    // json-rpc-engine will terminate the request when it notices this error\n    if (typeof req.method !== \"string\" || !req.method) {\n      res.error = eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"ethErrors\"].rpc.invalidRequest({\n        message: \"The request 'method' must be a non-empty string.\",\n        data: req\n      });\n    }\n\n    next(function (done) {\n      var error = res.error;\n\n      if (!error) {\n        return done();\n      }\n\n      log.error(\"Torus - RPC Error: \".concat(error.message), error);\n      return done();\n    });\n  };\n}\n/**\n * Logs a stream disconnection error. Emits an 'error' if given an\n * EventEmitter that has listeners for the 'error' event.\n *\n * @param log - The logging API to use.\n * @param remoteLabel - The label of the disconnected stream.\n * @param error - The associated error to log.\n * @param emitter - The logging API to use.\n */\n\n\nfunction logStreamDisconnectWarning(remoteLabel, error, emitter) {\n  var warningMsg = \"Torus: Lost connection to \\\"\".concat(remoteLabel, \"\\\".\");\n\n  if (error !== null && error !== void 0 && error.stack) {\n    warningMsg += \"\\n\".concat(error.stack);\n  }\n\n  log.warn(warningMsg);\n\n  if (emitter && emitter.listenerCount(\"error\") > 0) {\n    emitter.emit(\"error\", warningMsg);\n  }\n}\n\nvar getWindowId = function getWindowId() {\n  return Math.random().toString(36).slice(2);\n};\n\nvar getTorusUrl = /*#__PURE__*/function () {\n  var _ref2 = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee(buildEnv) {\n    var torusUrl, logLevel;\n    return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.t0 = buildEnv;\n            _context.next = _context.t0 === \"testing\" ? 3 : _context.t0 === \"development\" ? 6 : 9;\n            break;\n\n          case 3:\n            torusUrl = \"https://solana-testing.tor.us\";\n            logLevel = \"debug\";\n            return _context.abrupt(\"break\", 12);\n\n          case 6:\n            torusUrl = \"http://localhost:8080\";\n            logLevel = \"debug\";\n            return _context.abrupt(\"break\", 12);\n\n          case 9:\n            torusUrl = \"https://solana.tor.us\";\n            logLevel = \"error\";\n            return _context.abrupt(\"break\", 12);\n\n          case 12:\n            return _context.abrupt(\"return\", {\n              torusUrl: torusUrl,\n              logLevel: logLevel\n            });\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getTorusUrl(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar getUserLanguage = function getUserLanguage() {\n  var userLanguage = window.navigator.language || \"en-US\";\n  var userLanguages = userLanguage.split(\"-\");\n  userLanguage = Object.prototype.hasOwnProperty.call(configuration.translations, userLanguages[0]) ? userLanguages[0] : \"en\";\n  return userLanguage;\n};\n\nvar FEATURES_PROVIDER_CHANGE_WINDOW = {\n  height: 660,\n  width: 375\n};\nvar FEATURES_DEFAULT_WALLET_WINDOW = {\n  height: 740,\n  width: 1315\n};\nvar FEATURES_DEFAULT_POPUP_WINDOW = {\n  height: 700,\n  width: 1200\n};\nvar FEATURES_CONFIRM_WINDOW = {\n  height: 600,\n  width: 400\n};\n\nfunction storageAvailable(type) {\n  var storage;\n\n  try {\n    storage = window[type];\n    var x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return e && ( // everything except Firefox\n    e.code === 22 || // Firefox\n    e.code === 1014 || // test name field too, because code might not be present\n    // everything except Firefox\n    e.name === \"QuotaExceededError\" || // Firefox\n    e.name === \"NS_ERROR_DOM_QUOTA_REACHED\") && // acknowledge QuotaExceededError only if there's something already stored\n    storage && storage.length !== 0;\n  }\n}\n/**\n * popup handler utils\n */\n\n\nfunction getPopupFeatures(_ref) {\n  var w = _ref.width,\n      h = _ref.height; // Fixes dual-screen position                             Most browsers      Firefox\n\n  var dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  var dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n  var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : window.screen.width;\n  var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : window.screen.height;\n  var systemZoom = 1; // No reliable estimate\n\n  var left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  var top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  var features = \"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=\".concat(h / systemZoom, \",width=\").concat(w / systemZoom, \",top=\").concat(top, \",left=\").concat(left);\n  return features;\n}\n\nvar getNetworkConfig = function getNetworkConfig(label) {\n  switch (label) {\n    case \"mainnet-beta\":\n      return {\n        blockExplorerUrl: \"https://explorer.solana.com\",\n        chainId: \"0x1\",\n        displayName: \"Solana Mainnet\",\n        logo: \"solana.svg\",\n        rpcTarget: \"https://api.mainnet-beta.solana.com\",\n        ticker: \"SOL\",\n        tickerName: \"Solana Token\"\n      };\n\n    case \"testnet\":\n      return {\n        blockExplorerUrl: \"https://explorer.solana.com\",\n        chainId: \"0x2\",\n        displayName: \"Solana Testnet\",\n        logo: \"solana.svg\",\n        rpcTarget: \"https://api.testnet.solana.com\",\n        ticker: \"SOL\",\n        tickerName: \"Solana Token\"\n      };\n\n    case \"devnet\":\n      return {\n        blockExplorerUrl: \"https://explorer.solana.com\",\n        chainId: \"0x3\",\n        displayName: \"Solana Devnet\",\n        logo: \"solana.svg\",\n        rpcTarget: \"https://api.devnet.solana.com\",\n        ticker: \"SOL\",\n        tickerName: \"Solana Token\"\n      };\n\n    default:\n      return undefined;\n  }\n};\n\nvar BaseProvider = /*#__PURE__*/function (_SafeEventEmitter) {\n  Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(BaseProvider, _SafeEventEmitter);\n\n  var _super = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(BaseProvider);\n\n  /**\n   * Indicating that this provider is a Torus provider.\n   */\n  function BaseProvider(connectionStream, _ref) {\n    var _this;\n\n    Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(this, BaseProvider);\n\n    var _ref$maxEventListener = _ref.maxEventListeners,\n        maxEventListeners = _ref$maxEventListener === void 0 ? 100 : _ref$maxEventListener,\n        _ref$jsonRpcStreamNam = _ref.jsonRpcStreamName,\n        jsonRpcStreamName = _ref$jsonRpcStreamNam === void 0 ? \"provider\" : _ref$jsonRpcStreamNam;\n    _this = _super.call(this);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"isTorus\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"_rpcEngine\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"jsonRpcConnectionEvents\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"_state\", void 0);\n\n    if (!Object(is_stream__WEBPACK_IMPORTED_MODULE_14__[/* isDuplexStream */ \"a\"])(connectionStream)) {\n      throw new Error(messages.errors.invalidDuplexStream());\n    }\n\n    _this.isTorus = true;\n\n    _this.setMaxListeners(maxEventListeners);\n\n    _this._handleConnect = _this._handleConnect.bind(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this));\n    _this._handleDisconnect = _this._handleDisconnect.bind(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this));\n    _this._handleStreamDisconnect = _this._handleStreamDisconnect.bind(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this));\n    _this._rpcRequest = _this._rpcRequest.bind(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this));\n    _this._initializeState = _this._initializeState.bind(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this));\n    _this.request = _this.request.bind(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this));\n    _this.sendAsync = _this.sendAsync.bind(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this)); // this.enable = this.enable.bind(this);\n    // setup connectionStream multiplexing\n\n    var mux = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* ObjectMultiplex */ \"c\"]();\n    pump__WEBPACK_IMPORTED_MODULE_15___default()(connectionStream, mux, connectionStream, _this._handleStreamDisconnect.bind(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"Torus\")); // ignore phishing warning message (handled elsewhere)\n\n    mux.ignoreStream(\"phishing\"); // setup own event listeners\n    // connect to async provider\n\n    var jsonRpcConnection = Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* createStreamMiddleware */ \"i\"])();\n    pump__WEBPACK_IMPORTED_MODULE_15___default()(jsonRpcConnection.stream, mux.createStream(jsonRpcStreamName), jsonRpcConnection.stream, _this._handleStreamDisconnect.bind(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"Torus RpcProvider\")); // handle RPC requests via dapp-side rpc engine\n\n    var rpcEngine = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* JRPCEngine */ \"b\"]();\n    rpcEngine.push(Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* createIdRemapMiddleware */ \"g\"])());\n    rpcEngine.push(createErrorMiddleware());\n    rpcEngine.push(Object(_toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* createLoggerMiddleware */ \"h\"])({\n      origin: location.origin\n    }));\n    rpcEngine.push(jsonRpcConnection.middleware);\n    _this._rpcEngine = rpcEngine;\n    _this.jsonRpcConnectionEvents = jsonRpcConnection.events;\n    return _this;\n  }\n  /**\n   * Submits an RPC request for the given method, with the given params.\n   * Resolves with the result of the method call, or rejects on error.\n   */\n\n\n  Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(BaseProvider, [{\n    key: \"request\",\n    value: function () {\n      var _request = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee2(args) {\n        var _this2 = this;\n\n        var method, params;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(!args || typeof args !== \"object\" || Array.isArray(args))) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"ethErrors\"].rpc.invalidRequest({\n                  message: messages.errors.invalidRequestArgs(),\n                  data: args\n                });\n\n              case 2:\n                method = args.method, params = args.params;\n\n                if (!(typeof method !== \"string\" || method.length === 0)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"ethErrors\"].rpc.invalidRequest({\n                  message: messages.errors.invalidRequestMethod(),\n                  data: args\n                });\n\n              case 5:\n                if (!(params !== undefined && !Array.isArray(params) && (typeof params !== \"object\" || params === null))) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"ethErrors\"].rpc.invalidRequest({\n                  message: messages.errors.invalidRequestParams(),\n                  data: args\n                });\n\n              case 7:\n                return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this2._rpcRequest({\n                    method: method,\n                    params: params\n                  }, Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* getRpcPromiseCallback */ \"j\"])(resolve, reject));\n                }));\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function request(_x2) {\n        return _request.apply(this, arguments);\n      }\n\n      return request;\n    }()\n    /**\n     * Submits an RPC request per the given JSON-RPC request object.\n     */\n\n  }, {\n    key: \"send\",\n    value: function send(payload, callback) {\n      this._rpcRequest(payload, callback);\n    }\n    /**\n     * Submits an RPC request per the given JSON-RPC request object.\n     */\n\n  }, {\n    key: \"sendAsync\",\n    value: function sendAsync(payload) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this3._rpcRequest(payload, Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* getRpcPromiseCallback */ \"j\"])(resolve, reject));\n      });\n    }\n    /**\n     * Called when connection is lost to critical streams.\n     *\n     * emits TorusInpageProvider#disconnect\n     */\n\n  }, {\n    key: \"_handleStreamDisconnect\",\n    value: function _handleStreamDisconnect(streamName, error) {\n      logStreamDisconnectWarning(streamName, error, this);\n\n      this._handleDisconnect(false, error ? error.message : undefined);\n    }\n  }]);\n\n  return BaseProvider;\n}(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* SafeEventEmitter */ \"e\"]);\n\nvar handleEvent = function handleEvent(handle, eventName, handler) {\n  for (var _len = arguments.length, handlerArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    handlerArgs[_key - 3] = arguments[_key];\n  }\n\n  var handlerWrapper = function handlerWrapper() {\n    handler.apply(void 0, handlerArgs);\n    handle.removeEventListener(eventName, handlerWrapper);\n  };\n\n  handle.addEventListener(eventName, handlerWrapper);\n};\n\nfunction documentReady() {\n  return _documentReady.apply(this, arguments);\n}\n\nfunction _documentReady() {\n  _documentReady = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee24() {\n    return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee24$(_context24) {\n      while (1) {\n        switch (_context24.prev = _context24.next) {\n          case 0:\n            return _context24.abrupt(\"return\", new Promise(function (resolve) {\n              if (document.readyState !== \"loading\") {\n                resolve();\n              } else {\n                handleEvent(document, \"DOMContentLoaded\", resolve);\n              }\n            }));\n\n          case 1:\n          case \"end\":\n            return _context24.stop();\n        }\n      }\n    }, _callee24);\n  }));\n  return _documentReady.apply(this, arguments);\n}\n\nvar htmlToElement = function htmlToElement(html) {\n  var template = window.document.createElement(\"template\");\n  var trimmedHtml = html.trim(); // Never return a text node of whitespace as the result\n\n  template.innerHTML = trimmedHtml;\n  return template.content.firstChild;\n};\n\nvar PopupHandler = /*#__PURE__*/function (_SafeEventEmitter2) {\n  Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(PopupHandler, _SafeEventEmitter2);\n\n  var _super2 = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(PopupHandler);\n\n  function PopupHandler(_ref) {\n    var _this4;\n\n    Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(this, PopupHandler);\n\n    var url = _ref.url,\n        target = _ref.target,\n        features = _ref.features;\n    _this4 = _super2.call(this);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this4), \"url\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this4), \"target\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this4), \"features\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this4), \"window\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this4), \"windowTimer\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this4), \"iClosedWindow\", void 0);\n\n    _this4.url = url;\n    _this4.target = target || \"_blank\";\n    _this4.features = features || getPopupFeatures(FEATURES_DEFAULT_POPUP_WINDOW);\n    _this4.window = undefined;\n    _this4.windowTimer = undefined;\n    _this4.iClosedWindow = false;\n\n    _this4._setupTimer();\n\n    return _this4;\n  }\n\n  Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(PopupHandler, [{\n    key: \"_setupTimer\",\n    value: function _setupTimer() {\n      var _this5 = this;\n\n      this.windowTimer = Number(setInterval(function () {\n        if (_this5.window && _this5.window.closed) {\n          clearInterval(_this5.windowTimer);\n\n          if (!_this5.iClosedWindow) {\n            _this5.emit(\"close\");\n          }\n\n          _this5.iClosedWindow = false;\n          _this5.window = undefined;\n        }\n\n        if (_this5.window === undefined) clearInterval(_this5.windowTimer);\n      }, 500));\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      var _this$window;\n\n      this.window = window.open(this.url.href, this.target, this.features);\n      if ((_this$window = this.window) !== null && _this$window !== void 0 && _this$window.focus) this.window.focus();\n      return Promise.resolve();\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.iClosedWindow = true;\n      if (this.window) this.window.close();\n    }\n  }, {\n    key: \"redirect\",\n    value: function redirect(locationReplaceOnRedirect) {\n      if (locationReplaceOnRedirect) {\n        window.location.replace(this.url.href);\n      } else {\n        window.location.href = this.url.href;\n      }\n    }\n  }]);\n\n  return PopupHandler;\n}(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* SafeEventEmitter */ \"e\"]);\n\nfunction ownKeys$2(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys$2(Object(source), !0).forEach(function (key) {\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$2(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar TorusCommunicationProvider = /*#__PURE__*/function (_BaseProvider) {\n  Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(TorusCommunicationProvider, _BaseProvider);\n\n  var _super3 = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(TorusCommunicationProvider);\n\n  function TorusCommunicationProvider(connectionStream, _ref) {\n    var _this6;\n\n    Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(this, TorusCommunicationProvider);\n\n    var _ref$maxEventListener2 = _ref.maxEventListeners,\n        maxEventListeners = _ref$maxEventListener2 === void 0 ? 100 : _ref$maxEventListener2,\n        _ref$jsonRpcStreamNam2 = _ref.jsonRpcStreamName,\n        jsonRpcStreamName = _ref$jsonRpcStreamNam2 === void 0 ? \"provider\" : _ref$jsonRpcStreamNam2;\n    _this6 = _super3.call(this, connectionStream, {\n      maxEventListeners: maxEventListeners,\n      jsonRpcStreamName: jsonRpcStreamName\n    }); // private state\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"embedTranslations\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"torusUrl\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"dappStorageKey\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"windowRefs\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"tryWindowHandle\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"torusAlertContainer\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this6), \"torusIframe\", void 0);\n\n    _this6._state = _objectSpread$2({}, TorusCommunicationProvider._defaultState); // public state\n\n    _this6.torusUrl = \"\";\n    _this6.dappStorageKey = \"\";\n    var languageTranslations = configuration.translations[getUserLanguage()];\n    _this6.embedTranslations = languageTranslations.embed;\n    _this6.windowRefs = {}; // setup own event listeners\n    // EIP-1193 connect\n\n    _this6.on(\"connect\", function () {\n      _this6._state.isConnected = true;\n    });\n\n    var notificationHandler = function notificationHandler(payload) {\n      var method = payload.method,\n          params = payload.params;\n\n      if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_NOTIFICATIONS */ \"c\"].IFRAME_STATUS) {\n        var isFullScreen = params.isFullScreen,\n            rid = params.rid;\n\n        _this6._displayIframe({\n          isFull: isFullScreen,\n          rid: rid\n        });\n      } else if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_NOTIFICATIONS */ \"c\"].CREATE_WINDOW) {\n        var windowId = params.windowId,\n            url = params.url;\n\n        _this6._createPopupBlockAlert(windowId, url);\n      } else if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_NOTIFICATIONS */ \"c\"].CLOSE_WINDOW) {\n        _this6._handleCloseWindow(params);\n      } else if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_NOTIFICATIONS */ \"c\"].USER_LOGGED_IN) {\n        var currentLoginProvider = params.currentLoginProvider;\n        _this6._state.isLoggedIn = true;\n        _this6._state.currentLoginProvider = currentLoginProvider;\n      } else if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_NOTIFICATIONS */ \"c\"].USER_LOGGED_OUT) {\n        _this6._state.isLoggedIn = false;\n        _this6._state.currentLoginProvider = null;\n\n        _this6._displayIframe();\n      }\n    };\n\n    _this6.jsonRpcConnectionEvents.on(\"notification\", notificationHandler);\n\n    return _this6;\n  }\n\n  Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(TorusCommunicationProvider, [{\n    key: \"isLoggedIn\",\n    get: function get() {\n      return this._state.isLoggedIn;\n    }\n  }, {\n    key: \"isIFrameFullScreen\",\n    get: function get() {\n      return this._state.isIFrameFullScreen;\n    }\n    /**\n     * Returns whether the inPage provider is connected to Torus.\n     */\n\n  }, {\n    key: \"isConnected\",\n    value: function isConnected() {\n      return this._state.isConnected;\n    }\n  }, {\n    key: \"_initializeState\",\n    value: function () {\n      var _initializeState2 = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee3(params) {\n        var _this7 = this;\n\n        var torusUrl, dappStorageKey, torusAlertContainer, torusIframe, _yield$this$request, currentLoginProvider, isLoggedIn;\n\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                torusUrl = params.torusUrl, dappStorageKey = params.dappStorageKey, torusAlertContainer = params.torusAlertContainer, torusIframe = params.torusIframe;\n                this.torusUrl = torusUrl;\n                this.dappStorageKey = dappStorageKey;\n                this.torusAlertContainer = torusAlertContainer;\n                this.torusIframe = torusIframe;\n                this.torusIframe.addEventListener(\"load\", function () {\n                  // only do this if iframe is not full screen\n                  if (!_this7._state.isIFrameFullScreen) _this7._displayIframe();\n                });\n                _context3.next = 9;\n                return this.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].GET_PROVIDER_STATE,\n                  params: []\n                });\n\n              case 9:\n                _yield$this$request = _context3.sent;\n                currentLoginProvider = _yield$this$request.currentLoginProvider;\n                isLoggedIn = _yield$this$request.isLoggedIn;\n\n                // indicate that we've connected, for EIP-1193 compliance\n                this._handleConnect(currentLoginProvider, isLoggedIn);\n\n                _context3.next = 18;\n                break;\n\n              case 15:\n                _context3.prev = 15;\n                _context3.t0 = _context3[\"catch\"](0);\n                log.error(\"Torus: Failed to get initial state. Please report this bug.\", _context3.t0);\n\n              case 18:\n                _context3.prev = 18;\n                log.info(\"initialized communication state\");\n                this._state.initialized = true;\n                this.emit(\"_initialized\");\n                return _context3.finish(18);\n\n              case 23:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 15, 18, 23]]);\n      }));\n\n      function _initializeState(_x3) {\n        return _initializeState2.apply(this, arguments);\n      }\n\n      return _initializeState;\n    }()\n  }, {\n    key: \"_handleWindow\",\n    value: function _handleWindow(windowId) {\n      var _this8 = this;\n\n      var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          url = _ref3.url,\n          target = _ref3.target,\n          features = _ref3.features;\n\n      var finalUrl = new URL(url || \"\".concat(this.torusUrl, \"/redirect?windowId=\").concat(windowId));\n\n      if (this.dappStorageKey) {\n        // If multiple instances, it returns the first one\n        if (finalUrl.hash) finalUrl.hash += \"&dappStorageKey=\".concat(this.dappStorageKey);else finalUrl.hash = \"#dappStorageKey=\".concat(this.dappStorageKey);\n      }\n\n      var handledWindow = new PopupHandler({\n        url: finalUrl,\n        target: target,\n        features: features\n      });\n      handledWindow.open();\n\n      if (!handledWindow.window) {\n        this._createPopupBlockAlert(windowId, finalUrl.href);\n\n        return;\n      } // Add to collection only if window is opened\n\n\n      this.windowRefs[windowId] = handledWindow; // We tell the iframe that the window has been successfully opened\n\n      this.request({\n        method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].OPENED_WINDOW,\n        params: {\n          windowId: windowId\n        }\n      });\n      handledWindow.once(\"close\", function () {\n        // user closed the window\n        delete _this8.windowRefs[windowId];\n\n        _this8.request({\n          method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].CLOSED_WINDOW,\n          params: {\n            windowId: windowId\n          }\n        });\n      });\n    }\n  }, {\n    key: \"_displayIframe\",\n    value: function _displayIframe() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$isFull = _ref4.isFull,\n          isFull = _ref4$isFull === void 0 ? false : _ref4$isFull,\n          _ref4$rid = _ref4.rid,\n          rid = _ref4$rid === void 0 ? \"\" : _ref4$rid;\n\n      var style = {}; // set phase\n\n      if (!isFull) {\n        style.display = this._state.torusWidgetVisibility ? \"block\" : \"none\";\n        style.height = \"70px\";\n        style.width = \"70px\";\n\n        switch (this._state.buttonPosition) {\n          case BUTTON_POSITION.TOP_LEFT:\n            style.top = \"0px\";\n            style.left = \"0px\";\n            style.right = \"auto\";\n            style.bottom = \"auto\";\n            break;\n\n          case BUTTON_POSITION.TOP_RIGHT:\n            style.top = \"0px\";\n            style.right = \"0px\";\n            style.left = \"auto\";\n            style.bottom = \"auto\";\n            break;\n\n          case BUTTON_POSITION.BOTTOM_RIGHT:\n            style.bottom = \"0px\";\n            style.right = \"0px\";\n            style.top = \"auto\";\n            style.left = \"auto\";\n            break;\n\n          case BUTTON_POSITION.BOTTOM_LEFT:\n          default:\n            style.bottom = \"0px\";\n            style.left = \"0px\";\n            style.top = \"auto\";\n            style.right = \"auto\";\n            break;\n        }\n      } else {\n        style.display = \"block\";\n        style.width = \"100%\";\n        style.height = \"100%\";\n        style.top = \"0px\";\n        style.right = \"0px\";\n        style.left = \"0px\";\n        style.bottom = \"0px\";\n      }\n\n      Object.assign(this.torusIframe.style, style);\n      this._state.isIFrameFullScreen = isFull;\n      this.request({\n        method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].IFRAME_STATUS,\n        params: {\n          isIFrameFullScreen: isFull,\n          rid: rid\n        }\n      });\n    }\n  }, {\n    key: \"hideTorusButton\",\n    value: function hideTorusButton() {\n      this._state.torusWidgetVisibility = false;\n\n      this._displayIframe();\n    }\n  }, {\n    key: \"showTorusButton\",\n    value: function showTorusButton() {\n      this._state.torusWidgetVisibility = true;\n\n      this._displayIframe();\n    }\n    /**\n     * Internal RPC method. Forwards requests to background via the RPC engine.\n     * Also remap ids inbound and outbound\n     */\n\n  }, {\n    key: \"_rpcRequest\",\n    value: function _rpcRequest(payload, callback) {\n      var cb = callback;\n      var _payload = payload;\n\n      if (!Array.isArray(_payload)) {\n        if (!_payload.jsonrpc) {\n          _payload.jsonrpc = \"2.0\";\n        }\n      }\n\n      this.tryWindowHandle(_payload, cb);\n    }\n    /**\n     * When the provider becomes connected, updates internal state and emits\n     * required events. Idempotent.\n     *\n     * @param currentLoginProvider - The login Provider\n     * emits TorusInpageProvider#connect\n     */\n\n  }, {\n    key: \"_handleConnect\",\n    value: function _handleConnect(currentLoginProvider, isLoggedIn) {\n      if (!this._state.isConnected) {\n        this._state.isConnected = true;\n        this.emit(\"connect\", {\n          currentLoginProvider: currentLoginProvider,\n          isLoggedIn: isLoggedIn\n        });\n        log.debug(messages.info.connected(currentLoginProvider));\n      }\n    }\n    /**\n     * When the provider becomes disconnected, updates internal state and emits\n     * required events. Idempotent with respect to the isRecoverable parameter.\n     *\n     * Error codes per the CloseEvent status codes as required by EIP-1193:\n     * https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\n     *\n     * @param isRecoverable - Whether the disconnection is recoverable.\n     * @param errorMessage - A custom error message.\n     * emits TorusInpageProvider#disconnect\n     */\n\n  }, {\n    key: \"_handleDisconnect\",\n    value: function _handleDisconnect(isRecoverable, errorMessage) {\n      if (this._state.isConnected || !this._state.isPermanentlyDisconnected && !isRecoverable) {\n        this._state.isConnected = false;\n        var error;\n\n        if (isRecoverable) {\n          error = new eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"EthereumRpcError\"](1013, // Try again later\n          errorMessage || messages.errors.disconnected());\n          log.debug(error);\n        } else {\n          error = new eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"EthereumRpcError\"](1011, // Internal error\n          errorMessage || messages.errors.permanentlyDisconnected());\n          log.error(error);\n          this._state.currentLoginProvider = null;\n          this._state.isLoggedIn = false;\n          this._state.torusWidgetVisibility = false;\n          this._state.isIFrameFullScreen = false;\n          this._state.isPermanentlyDisconnected = true;\n        }\n\n        this.emit(\"disconnect\", error);\n      }\n    } // Called if the iframe wants to close the window cause it is done processing the request\n\n  }, {\n    key: \"_handleCloseWindow\",\n    value: function _handleCloseWindow(params) {\n      var windowId = params.windowId;\n\n      if (this.windowRefs[windowId]) {\n        this.windowRefs[windowId].close();\n        delete this.windowRefs[windowId];\n      }\n    }\n  }, {\n    key: \"_createPopupBlockAlert\",\n    value: function () {\n      var _createPopupBlockAlert2 = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee4(windowId, url) {\n        var _this9 = this;\n\n        var logoUrl, torusAlert, successAlert, btnContainer, bindOnLoad, attachOnLoad;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                logoUrl = this.getLogoUrl();\n                torusAlert = htmlToElement('<div id=\"torusAlert\" class=\"torus-alert--v2\">' + \"<div id=\\\"torusAlert__logo\\\"><img src=\\\"\".concat(logoUrl, \"\\\" /></div>\") + \"<div>\" + \"<h1 id=\\\"torusAlert__title\\\">\".concat(this.embedTranslations.actionRequired, \"</h1>\") + \"<p id=\\\"torusAlert__desc\\\">\".concat(this.embedTranslations.pendingAction, \"</p>\") + \"</div>\" + \"</div>\");\n                successAlert = htmlToElement(\"<div><a id=\\\"torusAlert__btn\\\">\".concat(this.embedTranslations.continue, \"</a></div>\"));\n                btnContainer = htmlToElement('<div id=\"torusAlert__btn-container\"></div>');\n                btnContainer.appendChild(successAlert);\n                torusAlert.appendChild(btnContainer);\n\n                bindOnLoad = function bindOnLoad() {\n                  successAlert.addEventListener(\"click\", function () {\n                    _this9._handleWindow(windowId, {\n                      url: url,\n                      target: \"_blank\",\n                      features: getPopupFeatures(FEATURES_CONFIRM_WINDOW)\n                    });\n\n                    torusAlert.remove();\n                    if (_this9.torusAlertContainer.children.length === 0) _this9.torusAlertContainer.style.display = \"none\";\n                  });\n                };\n\n                attachOnLoad = function attachOnLoad() {\n                  _this9.torusAlertContainer.appendChild(torusAlert);\n                };\n\n                _context4.next = 10;\n                return documentReady();\n\n              case 10:\n                attachOnLoad();\n                bindOnLoad();\n                this.torusAlertContainer.style.display = \"block\";\n\n              case 13:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function _createPopupBlockAlert(_x4, _x5) {\n        return _createPopupBlockAlert2.apply(this, arguments);\n      }\n\n      return _createPopupBlockAlert;\n    }()\n  }, {\n    key: \"getLogoUrl\",\n    value: function getLogoUrl() {\n      var logoUrl = \"\".concat(this.torusUrl, \"/images/torus_icon-blue.svg\");\n      return logoUrl;\n    }\n  }]);\n\n  return TorusCommunicationProvider;\n}(BaseProvider);\n\n_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(TorusCommunicationProvider, \"_defaultState\", {\n  buttonPosition: \"bottom-left\",\n  currentLoginProvider: null,\n  isIFrameFullScreen: false,\n  hasEmittedConnection: false,\n  torusWidgetVisibility: false,\n  initialized: false,\n  isLoggedIn: false,\n  isPermanentlyDisconnected: false,\n  isConnected: false\n});\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) {\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar TorusInPageProvider = /*#__PURE__*/function (_BaseProvider2) {\n  Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(TorusInPageProvider, _BaseProvider2);\n\n  var _super4 = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(TorusInPageProvider);\n\n  /**\n   * The chain ID of the currently connected Solana chain.\n   * See [chainId.network]{@link https://chainid.network} for more information.\n   */\n\n  /**\n   * The user's currently selected Solana address.\n   * If null, Torus is either locked or the user has not permitted any\n   * addresses to be viewed.\n   */\n  function TorusInPageProvider(connectionStream, _ref) {\n    var _this10;\n\n    Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(this, TorusInPageProvider);\n\n    var _ref$maxEventListener3 = _ref.maxEventListeners,\n        maxEventListeners = _ref$maxEventListener3 === void 0 ? 100 : _ref$maxEventListener3,\n        _ref$jsonRpcStreamNam3 = _ref.jsonRpcStreamName,\n        jsonRpcStreamName = _ref$jsonRpcStreamNam3 === void 0 ? \"provider\" : _ref$jsonRpcStreamNam3;\n    _this10 = _super4.call(this, connectionStream, {\n      maxEventListeners: maxEventListeners,\n      jsonRpcStreamName: jsonRpcStreamName\n    }); // private state\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this10), \"chainId\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this10), \"selectedAddress\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this10), \"tryWindowHandle\", void 0);\n\n    _this10._state = _objectSpread$1({}, TorusInPageProvider._defaultState); // public state\n\n    _this10.selectedAddress = null;\n    _this10.chainId = null;\n    _this10._handleAccountsChanged = _this10._handleAccountsChanged.bind(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this10));\n    _this10._handleChainChanged = _this10._handleChainChanged.bind(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this10));\n    _this10._handleUnlockStateChanged = _this10._handleUnlockStateChanged.bind(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this10)); // setup own event listeners\n    // EIP-1193 connect\n\n    _this10.on(\"connect\", function () {\n      _this10._state.isConnected = true;\n    });\n\n    var jsonRpcNotificationHandler = function jsonRpcNotificationHandler(payload) {\n      var method = payload.method,\n          params = payload.params;\n\n      if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* PROVIDER_NOTIFICATIONS */ \"e\"].ACCOUNTS_CHANGED) {\n        _this10._handleAccountsChanged(params);\n      } else if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* PROVIDER_NOTIFICATIONS */ \"e\"].UNLOCK_STATE_CHANGED) {\n        _this10._handleUnlockStateChanged(params);\n      } else if (method === _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* PROVIDER_NOTIFICATIONS */ \"e\"].CHAIN_CHANGED) {\n        _this10._handleChainChanged(params);\n      }\n    }; // json rpc notification listener\n\n\n    _this10.jsonRpcConnectionEvents.on(\"notification\", jsonRpcNotificationHandler);\n\n    return _this10;\n  }\n  /**\n   * Returns whether the inpage provider is connected to Torus.\n   */\n\n\n  Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(TorusInPageProvider, [{\n    key: \"isConnected\",\n    value: function isConnected() {\n      return this._state.isConnected;\n    } // Private Methods\n    //= ===================\n\n    /**\n     * Constructor helper.\n     * Populates initial state by calling 'wallet_getProviderState' and emits\n     * necessary events.\n     */\n\n  }, {\n    key: \"_initializeState\",\n    value: function () {\n      var _initializeState3 = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee5() {\n        var _yield$this$request2, accounts, chainId, isUnlocked;\n\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return this.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* PROVIDER_JRPC_METHODS */ \"d\"].GET_PROVIDER_STATE,\n                  params: []\n                });\n\n              case 3:\n                _yield$this$request2 = _context5.sent;\n                accounts = _yield$this$request2.accounts;\n                chainId = _yield$this$request2.chainId;\n                isUnlocked = _yield$this$request2.isUnlocked;\n                // indicate that we've connected, for EIP-1193 compliance\n                this.emit(\"connect\", {\n                  chainId: chainId\n                });\n\n                this._handleChainChanged({\n                  chainId: chainId\n                });\n\n                this._handleUnlockStateChanged({\n                  accounts: accounts,\n                  isUnlocked: isUnlocked\n                });\n\n                this._handleAccountsChanged(accounts);\n\n                _context5.next = 16;\n                break;\n\n              case 13:\n                _context5.prev = 13;\n                _context5.t0 = _context5[\"catch\"](0);\n                log.error(\"Torus: Failed to get initial state. Please report this bug.\", _context5.t0);\n\n              case 16:\n                _context5.prev = 16;\n                log.info(\"initialized provider state\");\n                this._state.initialized = true;\n                this.emit(\"_initialized\");\n                return _context5.finish(16);\n\n              case 21:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 13, 16, 21]]);\n      }));\n\n      function _initializeState() {\n        return _initializeState3.apply(this, arguments);\n      }\n\n      return _initializeState;\n    }()\n    /**\n     * Internal RPC method. Forwards requests to background via the RPC engine.\n     * Also remap ids inbound and outbound\n     */\n\n  }, {\n    key: \"_rpcRequest\",\n    value: function _rpcRequest(payload, callback) {\n      var _this11 = this;\n\n      var isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var cb = callback;\n      var _payload = payload;\n\n      if (!Array.isArray(_payload)) {\n        if (!_payload.jsonrpc) {\n          _payload.jsonrpc = \"2.0\";\n        }\n\n        if (_payload.method === \"solana_accounts\" || _payload.method === \"solana_requestAccounts\") {\n          // handle accounts changing\n          cb = function cb(err, res) {\n            _this11._handleAccountsChanged(res.result || [], _payload.method === \"solana_accounts\", isInternal);\n\n            callback(err, res);\n          };\n        } else if (_payload.method === \"wallet_getProviderState\") {\n          this._rpcEngine.handle(payload, cb);\n\n          return;\n        }\n      }\n\n      this.tryWindowHandle(_payload, cb);\n    }\n    /**\n     * When the provider becomes connected, updates internal state and emits\n     * required events. Idempotent.\n     *\n     * @param chainId - The ID of the newly connected chain.\n     * emits TorusInpageProvider#connect\n     */\n\n  }, {\n    key: \"_handleConnect\",\n    value: function _handleConnect(chainId) {\n      if (!this._state.isConnected) {\n        this._state.isConnected = true;\n        this.emit(\"connect\", {\n          chainId: chainId\n        });\n        log.debug(messages.info.connected(chainId));\n      }\n    }\n    /**\n     * When the provider becomes disconnected, updates internal state and emits\n     * required events. Idempotent with respect to the isRecoverable parameter.\n     *\n     * Error codes per the CloseEvent status codes as required by EIP-1193:\n     * https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\n     *\n     * @param isRecoverable - Whether the disconnection is recoverable.\n     * @param errorMessage - A custom error message.\n     * emits TorusInpageProvider#disconnect\n     */\n\n  }, {\n    key: \"_handleDisconnect\",\n    value: function _handleDisconnect(isRecoverable, errorMessage) {\n      if (this._state.isConnected || !this._state.isPermanentlyDisconnected && !isRecoverable) {\n        this._state.isConnected = false;\n        var error;\n\n        if (isRecoverable) {\n          error = new eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"EthereumRpcError\"](1013, // Try again later\n          errorMessage || messages.errors.disconnected());\n          log.debug(error);\n        } else {\n          error = new eth_rpc_errors__WEBPACK_IMPORTED_MODULE_13__[\"EthereumRpcError\"](1011, // Internal error\n          errorMessage || messages.errors.permanentlyDisconnected());\n          log.error(error);\n          this.chainId = null;\n          this._state.accounts = null;\n          this.selectedAddress = null;\n          this._state.isUnlocked = false;\n          this._state.isPermanentlyDisconnected = true;\n        }\n\n        this.emit(\"disconnect\", error);\n      }\n    }\n    /**\n     * Called when accounts may have changed.\n     */\n\n  }, {\n    key: \"_handleAccountsChanged\",\n    value: function _handleAccountsChanged(accounts) {\n      var isEthAccounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false; // defensive programming\n\n      var finalAccounts = accounts;\n\n      if (!Array.isArray(finalAccounts)) {\n        log.error(\"Torus: Received non-array accounts parameter. Please report this bug.\", finalAccounts);\n        finalAccounts = [];\n      }\n\n      var _iterator = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(accounts),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var account = _step.value;\n\n          if (typeof account !== \"string\") {\n            log.error(\"Torus: Received non-string account. Please report this bug.\", accounts);\n            finalAccounts = [];\n            break;\n          }\n        } // emit accountsChanged if anything about the accounts array has changed\n\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      if (!fast_deep_equal__WEBPACK_IMPORTED_MODULE_17___default()(this._state.accounts, finalAccounts)) {\n        // we should always have the correct accounts even before solana_accounts\n        // returns, except in cases where isInternal is true\n        if (isEthAccounts && Array.isArray(this._state.accounts) && this._state.accounts.length > 0 && !isInternal) {\n          log.error('Torus: \"solana_accounts\" unexpectedly updated accounts. Please report this bug.', finalAccounts);\n        }\n\n        this._state.accounts = finalAccounts;\n        this.emit(\"accountsChanged\", finalAccounts);\n      } // handle selectedAddress\n\n\n      if (this.selectedAddress !== finalAccounts[0]) {\n        this.selectedAddress = finalAccounts[0] || null;\n      }\n    }\n    /**\n     * Upon receipt of a new chainId and networkVersion, emits corresponding\n     * events and sets relevant public state.\n     * Does nothing if neither the chainId nor the networkVersion are different\n     * from existing values.\n     *\n     * emits TorusInpageProvider#chainChanged\n     * @param networkInfo - An object with network info.\n     */\n\n  }, {\n    key: \"_handleChainChanged\",\n    value: function _handleChainChanged() {\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          chainId = _ref5.chainId;\n\n      if (!chainId) {\n        log.error(\"Torus: Received invalid network parameters. Please report this bug.\", {\n          chainId: chainId\n        });\n        return;\n      }\n\n      if (chainId === \"loading\") {\n        this._handleDisconnect(true);\n      } else {\n        this._handleConnect(chainId);\n\n        if (chainId !== this.chainId) {\n          this.chainId = chainId;\n\n          if (this._state.initialized) {\n            this.emit(\"chainChanged\", this.chainId);\n          }\n        }\n      }\n    }\n    /**\n     * Upon receipt of a new isUnlocked state, sets relevant public state.\n     * Calls the accounts changed handler with the received accounts, or an empty\n     * array.\n     *\n     * Does nothing if the received value is equal to the existing value.\n     * There are no lock/unlock events.\n     *\n     * @param opts - Options bag.\n     */\n\n  }, {\n    key: \"_handleUnlockStateChanged\",\n    value: function _handleUnlockStateChanged() {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          accounts = _ref6.accounts,\n          isUnlocked = _ref6.isUnlocked;\n\n      if (typeof isUnlocked !== \"boolean\") {\n        log.error(\"Torus: Received invalid isUnlocked parameter. Please report this bug.\", {\n          isUnlocked: isUnlocked\n        });\n        return;\n      }\n\n      if (isUnlocked !== this._state.isUnlocked) {\n        this._state.isUnlocked = isUnlocked;\n\n        this._handleAccountsChanged(accounts || []);\n      }\n    }\n  }]);\n\n  return TorusInPageProvider;\n}(BaseProvider);\n\n_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(TorusInPageProvider, \"_defaultState\", {\n  accounts: null,\n  isConnected: false,\n  isUnlocked: false,\n  initialized: false,\n  isPermanentlyDisconnected: false,\n  hasEmittedConnection: false\n});\n/**\n * Returns whether the given image URL exists\n */\n\n\nfunction imgExists(url) {\n  return new Promise(function (resolve, reject) {\n    try {\n      var img = document.createElement(\"img\");\n\n      img.onload = function () {\n        return resolve(true);\n      };\n\n      img.onerror = function () {\n        return resolve(false);\n      };\n\n      img.src = url;\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n/**\n * Extracts a name for the site from the DOM\n */\n\n\nvar getSiteName = function getSiteName(window) {\n  var document = window.document;\n  var siteName = document.querySelector('head > meta[property=\"og:site_name\"]');\n\n  if (siteName) {\n    return siteName.content;\n  }\n\n  var metaTitle = document.querySelector('head > meta[name=\"title\"]');\n\n  if (metaTitle) {\n    return metaTitle.content;\n  }\n\n  if (document.title && document.title.length > 0) {\n    return document.title;\n  }\n\n  return window.location.hostname;\n};\n/**\n * Extracts an icon for the site from the DOM\n */\n\n\nfunction getSiteIcon(_x6) {\n  return _getSiteIcon.apply(this, arguments);\n}\n/**\n * Gets site metadata and returns it\n *\n */\n\n\nfunction _getSiteIcon() {\n  _getSiteIcon = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee25(window) {\n    var _document, icon;\n\n    return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee25$(_context25) {\n      while (1) {\n        switch (_context25.prev = _context25.next) {\n          case 0:\n            _context25.prev = 0;\n            _document = window.document; // Use the site's favicon if it exists\n\n            icon = _document.querySelector('head > link[rel=\"shortcut icon\"]');\n            _context25.t0 = icon;\n\n            if (!_context25.t0) {\n              _context25.next = 8;\n              break;\n            }\n\n            _context25.next = 7;\n            return imgExists(icon.href);\n\n          case 7:\n            _context25.t0 = _context25.sent;\n\n          case 8:\n            if (!_context25.t0) {\n              _context25.next = 10;\n              break;\n            }\n\n            return _context25.abrupt(\"return\", icon.href);\n\n          case 10:\n            // Search through available icons in no particular order\n            icon = Array.from(_document.querySelectorAll('head > link[rel=\"icon\"]')).find(function (_icon) {\n              return Boolean(_icon.href);\n            });\n            _context25.t1 = icon;\n\n            if (!_context25.t1) {\n              _context25.next = 16;\n              break;\n            }\n\n            _context25.next = 15;\n            return imgExists(icon.href);\n\n          case 15:\n            _context25.t1 = _context25.sent;\n\n          case 16:\n            if (!_context25.t1) {\n              _context25.next = 18;\n              break;\n            }\n\n            return _context25.abrupt(\"return\", icon.href);\n\n          case 18:\n            return _context25.abrupt(\"return\", \"\");\n\n          case 21:\n            _context25.prev = 21;\n            _context25.t2 = _context25[\"catch\"](0);\n            return _context25.abrupt(\"return\", \"\");\n\n          case 24:\n          case \"end\":\n            return _context25.stop();\n        }\n      }\n    }, _callee25, null, [[0, 21]]);\n  }));\n  return _getSiteIcon.apply(this, arguments);\n}\n\nvar getSiteMetadata = /*#__PURE__*/function () {\n  var _ref7 = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee6() {\n    return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.t0 = getSiteName(window);\n            _context6.next = 3;\n            return getSiteIcon(window);\n\n          case 3:\n            _context6.t1 = _context6.sent;\n            return _context6.abrupt(\"return\", {\n              name: _context6.t0,\n              icon: _context6.t1\n            });\n\n          case 5:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function getSiteMetadata() {\n    return _ref7.apply(this, arguments);\n  };\n}();\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar PROVIDER_UNSAFE_METHODS = [\"send_transaction\", \"sign_transaction\", \"sign_all_transactions\", \"sign_message\", \"connect\"];\nvar COMMUNICATION_UNSAFE_METHODS = [_toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].SET_PROVIDER];\nvar isLocalStorageAvailable = storageAvailable(\"localStorage\"); // preload for iframe doesn't work https://bugs.chromium.org/p/chromium/issues/detail?id=593267\n\n(function () {\n  var _preLoadIframe = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee7() {\n    var torusIframeHtml, _yield$getTorusUrl, torusUrl;\n\n    return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.prev = 0;\n\n            if (!(typeof document === \"undefined\")) {\n              _context7.next = 3;\n              break;\n            }\n\n            return _context7.abrupt(\"return\");\n\n          case 3:\n            torusIframeHtml = document.createElement(\"link\");\n            _context7.next = 6;\n            return getTorusUrl(\"production\");\n\n          case 6:\n            _yield$getTorusUrl = _context7.sent;\n            torusUrl = _yield$getTorusUrl.torusUrl;\n            torusIframeHtml.href = \"\".concat(torusUrl, \"/frame\");\n            torusIframeHtml.crossOrigin = \"anonymous\";\n            torusIframeHtml.type = \"text/html\";\n            torusIframeHtml.rel = \"prefetch\";\n\n            if (torusIframeHtml.relList && torusIframeHtml.relList.supports) {\n              if (torusIframeHtml.relList.supports(\"prefetch\")) {\n                document.head.appendChild(torusIframeHtml);\n              }\n            }\n\n            _context7.next = 18;\n            break;\n\n          case 15:\n            _context7.prev = 15;\n            _context7.t0 = _context7[\"catch\"](0);\n            log.warn(_context7.t0);\n\n          case 18:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7, null, [[0, 15]]);\n  }));\n\n  function preLoadIframe() {\n    return _preLoadIframe.apply(this, arguments);\n  }\n\n  return preLoadIframe;\n})()();\n\nvar Torus = /*#__PURE__*/function () {\n  function Torus() {\n    Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(this, Torus);\n\n    var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref8$modalZIndex = _ref8.modalZIndex,\n        modalZIndex = _ref8$modalZIndex === void 0 ? 99999 : _ref8$modalZIndex;\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"isInitialized\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"torusAlert\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"modalZIndex\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"alertZIndex\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"requestedLoginProvider\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"provider\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"communicationProvider\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"dappStorageKey\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"torusAlertContainer\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"torusUrl\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"torusIframe\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default()(this, \"styleLink\", void 0);\n\n    this.torusUrl = \"\";\n    this.isInitialized = false; // init done\n\n    this.requestedLoginProvider = null;\n    this.modalZIndex = modalZIndex;\n    this.alertZIndex = modalZIndex + 1000;\n    this.dappStorageKey = \"\";\n  }\n\n  Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(Torus, [{\n    key: \"isLoggedIn\",\n    get: function get() {\n      if (!this.communicationProvider) return false;\n      return this.communicationProvider.isLoggedIn;\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee10() {\n        var _this12 = this;\n\n        var _ref9,\n            _ref9$buildEnv,\n            buildEnv,\n            _ref9$enableLogging,\n            enableLogging,\n            network,\n            _ref9$showTorusButton,\n            showTorusButton,\n            _ref9$useLocalStorage,\n            useLocalStorage,\n            _ref9$buttonPosition,\n            buttonPosition,\n            _ref9$apiKey,\n            apiKey,\n            _ref9$extraParams,\n            extraParams,\n            _yield$getTorusUrl2,\n            torusUrl,\n            logLevel,\n            dappStorageKey,\n            torusIframeUrl,\n            hashParams,\n            handleSetup,\n            _args10 = arguments;\n\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _ref9 = _args10.length > 0 && _args10[0] !== undefined ? _args10[0] : {}, _ref9$buildEnv = _ref9.buildEnv, buildEnv = _ref9$buildEnv === void 0 ? TORUS_BUILD_ENV.PRODUCTION : _ref9$buildEnv, _ref9$enableLogging = _ref9.enableLogging, enableLogging = _ref9$enableLogging === void 0 ? false : _ref9$enableLogging, network = _ref9.network, _ref9$showTorusButton = _ref9.showTorusButton, showTorusButton = _ref9$showTorusButton === void 0 ? false : _ref9$showTorusButton, _ref9$useLocalStorage = _ref9.useLocalStorage, useLocalStorage = _ref9$useLocalStorage === void 0 ? false : _ref9$useLocalStorage, _ref9$buttonPosition = _ref9.buttonPosition, buttonPosition = _ref9$buttonPosition === void 0 ? BUTTON_POSITION.BOTTOM_LEFT : _ref9$buttonPosition, _ref9$apiKey = _ref9.apiKey, apiKey = _ref9$apiKey === void 0 ? \"torus-default\" : _ref9$apiKey, _ref9$extraParams = _ref9.extraParams, extraParams = _ref9$extraParams === void 0 ? {} : _ref9$extraParams;\n\n                if (!this.isInitialized) {\n                  _context10.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Already initialized\");\n\n              case 3:\n                Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_11__[/* setAPIKey */ \"f\"])(apiKey);\n                _context10.next = 6;\n                return getTorusUrl(buildEnv);\n\n              case 6:\n                _yield$getTorusUrl2 = _context10.sent;\n                torusUrl = _yield$getTorusUrl2.torusUrl;\n                logLevel = _yield$getTorusUrl2.logLevel;\n                log.info(torusUrl, \"url loaded\");\n                this.torusUrl = torusUrl;\n                log.setDefaultLevel(logLevel);\n                if (enableLogging) log.enableAll();else log.disableAll();\n                dappStorageKey = this.handleDappStorageKey(useLocalStorage);\n                torusIframeUrl = new URL(torusUrl);\n                if (torusIframeUrl.pathname.endsWith(\"/\")) torusIframeUrl.pathname += \"frame\";else torusIframeUrl.pathname += \"/frame\";\n                hashParams = new URLSearchParams();\n                if (dappStorageKey) hashParams.append(\"dappStorageKey\", dappStorageKey);\n                hashParams.append(\"origin\", window.location.origin);\n                torusIframeUrl.hash = hashParams.toString(); // Iframe code\n\n                this.torusIframe = htmlToElement(\"<iframe\\n        id=\\\"torusIframe\\\"\\n        class=\\\"torusIframe\\\"\\n        src=\\\"\".concat(torusIframeUrl.href, \"\\\"\\n        style=\\\"display: none; position: fixed; top: 0; right: 0; width: 100%;\\n        height: 100%; border: none; border-radius: 0; z-index: \").concat(this.modalZIndex.toString(), \"\\\"\\n      ></iframe>\"));\n                this.torusAlertContainer = htmlToElement(\"<div id=\\\"torusAlertContainer\\\" style=\\\"display:none; z-index: \".concat(this.alertZIndex.toString(), \"\\\"></div>\"));\n                this.styleLink = htmlToElement(\"<link href=\\\"\".concat(torusUrl, \"/css/widget.css\\\" rel=\\\"stylesheet\\\" type=\\\"text/css\\\">\"));\n\n                handleSetup = /*#__PURE__*/function () {\n                  var _ref10 = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee9() {\n                    return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee9$(_context9) {\n                      while (1) {\n                        switch (_context9.prev = _context9.next) {\n                          case 0:\n                            return _context9.abrupt(\"return\", new Promise(function (resolve, reject) {\n                              try {\n                                window.document.head.appendChild(_this12.styleLink);\n                                window.document.body.appendChild(_this12.torusIframe);\n                                window.document.body.appendChild(_this12.torusAlertContainer);\n\n                                _this12.torusIframe.addEventListener(\"load\", /*#__PURE__*/Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee8() {\n                                  var dappMetadata;\n                                  return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee8$(_context8) {\n                                    while (1) {\n                                      switch (_context8.prev = _context8.next) {\n                                        case 0:\n                                          _context8.next = 2;\n                                          return getSiteMetadata();\n\n                                        case 2:\n                                          dappMetadata = _context8.sent;\n\n                                          // send init params here\n                                          _this12.torusIframe.contentWindow.postMessage({\n                                            buttonPosition: buttonPosition,\n                                            apiKey: apiKey,\n                                            network: typeof network === \"string\" ? getNetworkConfig(network) : network,\n                                            dappMetadata: dappMetadata,\n                                            extraParams: extraParams\n                                          }, torusIframeUrl.origin);\n\n                                          _context8.next = 6;\n                                          return _this12._setupWeb3({\n                                            torusUrl: torusUrl\n                                          });\n\n                                        case 6:\n                                          if (showTorusButton) _this12.showTorusButton();else _this12.hideTorusButton();\n                                          _this12.isInitialized = true;\n                                          window.torus = _this12;\n                                          resolve();\n\n                                        case 10:\n                                        case \"end\":\n                                          return _context8.stop();\n                                      }\n                                    }\n                                  }, _callee8);\n                                })));\n                              } catch (error) {\n                                reject(error);\n                              }\n                            }));\n\n                          case 1:\n                          case \"end\":\n                            return _context9.stop();\n                        }\n                      }\n                    }, _callee9);\n                  }));\n\n                  return function handleSetup() {\n                    return _ref10.apply(this, arguments);\n                  };\n                }();\n\n                _context10.next = 26;\n                return documentReady();\n\n              case 26:\n                _context10.next = 28;\n                return handleSetup();\n\n              case 28:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee11() {\n        var _this13 = this;\n\n        var params,\n            res,\n            _args11 = arguments;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                params = _args11.length > 0 && _args11[0] !== undefined ? _args11[0] : {};\n\n                if (this.isInitialized) {\n                  _context11.next = 3;\n                  break;\n                }\n\n                throw new Error(\"Call init() first\");\n\n              case 3:\n                _context11.prev = 3;\n                this.requestedLoginProvider = params.loginProvider || null;\n\n                if (!this.requestedLoginProvider) {\n                  this.communicationProvider._displayIframe({\n                    isFull: true\n                  });\n                } // If user is already logged in, we assume they have given access to the website\n\n\n                _context11.next = 8;\n                return new Promise(function (resolve, reject) {\n                  // We use this method because we want to update inPage provider state with account info\n                  _this13.provider._rpcRequest({\n                    method: \"solana_requestAccounts\",\n                    params: [_this13.requestedLoginProvider, params.login_hint]\n                  }, Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* getRpcPromiseCallback */ \"j\"])(resolve, reject));\n                });\n\n              case 8:\n                res = _context11.sent;\n\n                if (!(Array.isArray(res) && res.length > 0)) {\n                  _context11.next = 11;\n                  break;\n                }\n\n                return _context11.abrupt(\"return\", res);\n\n              case 11:\n                throw new Error(\"Login failed\");\n\n              case 14:\n                _context11.prev = 14;\n                _context11.t0 = _context11[\"catch\"](3);\n                log.error(\"login failed\", _context11.t0);\n                throw _context11.t0;\n\n              case 18:\n                _context11.prev = 18;\n                if (this.communicationProvider.isIFrameFullScreen) this.communicationProvider._displayIframe();\n                return _context11.finish(18);\n\n              case 21:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this, [[3, 14, 18, 21]]);\n      }));\n\n      function login() {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }, {\n    key: \"logout\",\n    value: function () {\n      var _logout = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee12() {\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                if (this.communicationProvider.isLoggedIn) {\n                  _context12.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Not logged in\");\n\n              case 2:\n                _context12.next = 4;\n                return this.communicationProvider.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].LOGOUT,\n                  params: []\n                });\n\n              case 4:\n                this.requestedLoginProvider = null;\n\n              case 5:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function logout() {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }()\n  }, {\n    key: \"cleanUp\",\n    value: function () {\n      var _cleanUp = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee13() {\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                if (!this.communicationProvider.isLoggedIn) {\n                  _context13.next = 3;\n                  break;\n                }\n\n                _context13.next = 3;\n                return this.logout();\n\n              case 3:\n                this.clearInit();\n\n              case 4:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function cleanUp() {\n        return _cleanUp.apply(this, arguments);\n      }\n\n      return cleanUp;\n    }()\n  }, {\n    key: \"clearInit\",\n    value: function clearInit() {\n      function isElement(element) {\n        return element instanceof Element || element instanceof Document;\n      }\n\n      if (isElement(this.styleLink) && window.document.body.contains(this.styleLink)) {\n        this.styleLink.remove();\n        this.styleLink = undefined;\n      }\n\n      if (isElement(this.torusIframe) && window.document.body.contains(this.torusIframe)) {\n        this.torusIframe.remove();\n        this.torusIframe = undefined;\n      }\n\n      if (isElement(this.torusAlertContainer) && window.document.body.contains(this.torusAlertContainer)) {\n        this.torusAlert = undefined;\n        this.torusAlertContainer.remove();\n        this.torusAlertContainer = undefined;\n      }\n\n      this.isInitialized = false;\n    }\n  }, {\n    key: \"hideTorusButton\",\n    value: function hideTorusButton() {\n      this.communicationProvider.hideTorusButton();\n    }\n  }, {\n    key: \"showTorusButton\",\n    value: function showTorusButton() {\n      this.communicationProvider.showTorusButton();\n    }\n  }, {\n    key: \"setProvider\",\n    value: function () {\n      var _setProvider = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee14(params) {\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                _context14.next = 2;\n                return this.communicationProvider.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].SET_PROVIDER,\n                  params: _objectSpread({}, params)\n                });\n\n              case 2:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function setProvider(_x7) {\n        return _setProvider.apply(this, arguments);\n      }\n\n      return setProvider;\n    }()\n  }, {\n    key: \"showWallet\",\n    value: function () {\n      var _showWallet = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee15(path) {\n        var params,\n            instanceId,\n            finalPath,\n            finalUrl,\n            walletWindow,\n            _args15 = arguments;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                params = _args15.length > 1 && _args15[1] !== undefined ? _args15[1] : {};\n                _context15.next = 3;\n                return this.communicationProvider.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].WALLET_INSTANCE_ID,\n                  params: []\n                });\n\n              case 3:\n                instanceId = _context15.sent;\n                finalPath = path ? \"/\".concat(path) : \"\";\n                finalUrl = new URL(\"\".concat(this.torusUrl, \"/wallet\").concat(finalPath)); // Using URL constructor to prevent js injection and allow parameter validation.!\n\n                finalUrl.searchParams.append(\"instanceId\", instanceId);\n                Object.keys(params).forEach(function (x) {\n                  finalUrl.searchParams.append(x, params[x]);\n                });\n\n                if (this.dappStorageKey) {\n                  finalUrl.hash = \"#dappStorageKey=\".concat(this.dappStorageKey);\n                } // No need to track this window state. Hence, no _handleWindow call.\n\n\n                walletWindow = new PopupHandler({\n                  url: finalUrl,\n                  features: getPopupFeatures(FEATURES_DEFAULT_WALLET_WINDOW)\n                });\n                walletWindow.open();\n\n              case 11:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this);\n      }));\n\n      function showWallet(_x8) {\n        return _showWallet.apply(this, arguments);\n      }\n\n      return showWallet;\n    }()\n  }, {\n    key: \"getUserInfo\",\n    value: function () {\n      var _getUserInfo = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee16() {\n        var userInfoResponse;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                _context16.next = 2;\n                return this.communicationProvider.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].USER_INFO,\n                  params: []\n                });\n\n              case 2:\n                userInfoResponse = _context16.sent;\n                return _context16.abrupt(\"return\", userInfoResponse);\n\n              case 4:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n\n      function getUserInfo() {\n        return _getUserInfo.apply(this, arguments);\n      }\n\n      return getUserInfo;\n    }()\n  }, {\n    key: \"initiateTopup\",\n    value: function () {\n      var _initiateTopup = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee17(provider, params) {\n        var windowId, topupResponse;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee17$(_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                if (this.isInitialized) {\n                  _context17.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Torus is not initialized\");\n\n              case 2:\n                windowId = getWindowId();\n\n                this.communicationProvider._handleWindow(windowId);\n\n                _context17.next = 6;\n                return this.communicationProvider.request({\n                  method: _toruslabs_base_controllers__WEBPACK_IMPORTED_MODULE_10__[/* COMMUNICATION_JRPC_METHODS */ \"b\"].TOPUP,\n                  params: {\n                    provider: provider,\n                    params: params,\n                    windowId: windowId\n                  }\n                });\n\n              case 6:\n                topupResponse = _context17.sent;\n                return _context17.abrupt(\"return\", topupResponse);\n\n              case 8:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee17, this);\n      }));\n\n      function initiateTopup(_x9, _x10) {\n        return _initiateTopup.apply(this, arguments);\n      }\n\n      return initiateTopup;\n    }() // Solana specific API\n\n  }, {\n    key: \"sendTransaction\",\n    value: function () {\n      var _sendTransaction = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee18(transaction) {\n        var response;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee18$(_context18) {\n          while (1) {\n            switch (_context18.prev = _context18.next) {\n              case 0:\n                _context18.next = 2;\n                return this.provider.request({\n                  method: \"send_transaction\",\n                  // params: { message: transaction.serializeMessage().toString(\"hex\") },\n                  params: {\n                    message: transaction.serialize({\n                      requireAllSignatures: false\n                    }).toString(\"hex\")\n                  }\n                });\n\n              case 2:\n                response = _context18.sent;\n                return _context18.abrupt(\"return\", response);\n\n              case 4:\n              case \"end\":\n                return _context18.stop();\n            }\n          }\n        }, _callee18, this);\n      }));\n\n      function sendTransaction(_x11) {\n        return _sendTransaction.apply(this, arguments);\n      }\n\n      return sendTransaction;\n    }()\n  }, {\n    key: \"signTransaction\",\n    value: function () {\n      var _signTransaction = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee19(transaction) {\n        var response, buf, sendTx;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee19$(_context19) {\n          while (1) {\n            switch (_context19.prev = _context19.next) {\n              case 0:\n                _context19.next = 2;\n                return this.provider.request({\n                  method: \"sign_transaction\",\n                  // params: { message: transaction.serializeMessage().toString(\"hex\") },\n                  params: {\n                    message: transaction.serialize({\n                      requireAllSignatures: false\n                    }).toString(\"hex\")\n                  }\n                });\n\n              case 2:\n                response = _context19.sent;\n                buf = Buffer.from(response, \"hex\");\n                sendTx = _solana_web3_js__WEBPACK_IMPORTED_MODULE_9__[/* Transaction */ \"c\"].from(buf);\n                return _context19.abrupt(\"return\", sendTx);\n\n              case 6:\n              case \"end\":\n                return _context19.stop();\n            }\n          }\n        }, _callee19, this);\n      }));\n\n      function signTransaction(_x12) {\n        return _signTransaction.apply(this, arguments);\n      }\n\n      return signTransaction;\n    }()\n  }, {\n    key: \"signAllTransactions\",\n    value: function () {\n      var _signAllTransactions = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee20(transactions) {\n        var encodedTransactions, response, allSignedTransaction;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee20$(_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                encodedTransactions = transactions.map(function (x) {\n                  return x.serialize({\n                    requireAllSignatures: false\n                  }).toString(\"hex\");\n                });\n                _context20.next = 3;\n                return this.provider.request({\n                  method: \"sign_all_transactions\",\n                  params: {\n                    message: encodedTransactions\n                  }\n                });\n\n              case 3:\n                response = _context20.sent;\n                allSignedTransaction = response.map(function (msg) {\n                  return _solana_web3_js__WEBPACK_IMPORTED_MODULE_9__[/* Transaction */ \"c\"].from(Buffer.from(msg, \"hex\"));\n                });\n                return _context20.abrupt(\"return\", allSignedTransaction);\n\n              case 6:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee20, this);\n      }));\n\n      function signAllTransactions(_x13) {\n        return _signAllTransactions.apply(this, arguments);\n      }\n\n      return signAllTransactions;\n    }()\n  }, {\n    key: \"signMessage\",\n    value: function () {\n      var _signMessage = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee21(data) {\n        var response;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee21$(_context21) {\n          while (1) {\n            switch (_context21.prev = _context21.next) {\n              case 0:\n                _context21.next = 2;\n                return this.provider.request({\n                  method: \"sign_message\",\n                  params: {\n                    data: data\n                  }\n                });\n\n              case 2:\n                response = _context21.sent;\n                return _context21.abrupt(\"return\", response);\n\n              case 4:\n              case \"end\":\n                return _context21.stop();\n            }\n          }\n        }, _callee21, this);\n      }));\n\n      function signMessage(_x14) {\n        return _signMessage.apply(this, arguments);\n      }\n\n      return signMessage;\n    }()\n  }, {\n    key: \"getGaslessPublicKey\",\n    value: function () {\n      var _getGaslessPublicKey = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee22() {\n        var response;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee22$(_context22) {\n          while (1) {\n            switch (_context22.prev = _context22.next) {\n              case 0:\n                _context22.next = 2;\n                return this.provider.request({\n                  method: \"get_gasless_public_key\",\n                  params: []\n                });\n\n              case 2:\n                response = _context22.sent;\n                return _context22.abrupt(\"return\", response);\n\n              case 4:\n              case \"end\":\n                return _context22.stop();\n            }\n          }\n        }, _callee22, this);\n      }));\n\n      function getGaslessPublicKey() {\n        return _getGaslessPublicKey.apply(this, arguments);\n      }\n\n      return getGaslessPublicKey;\n    }() // async connect(): Promise<boolean> {\n    //   const response = (await this.provider.request({\n    //     method: \"connect\",\n    //     params: {},\n    //   })) as boolean;\n    //   return response;\n    // }\n\n  }, {\n    key: \"handleDappStorageKey\",\n    value: function handleDappStorageKey(useLocalStorage) {\n      var dappStorageKey = \"\";\n\n      if (isLocalStorageAvailable && useLocalStorage) {\n        var storedKey = window.localStorage.getItem(configuration.localStorageKey);\n        if (storedKey) dappStorageKey = storedKey;else {\n          var generatedKey = \"torus-app-\".concat(getWindowId());\n          window.localStorage.setItem(configuration.localStorageKey, generatedKey);\n          dappStorageKey = generatedKey;\n        }\n      }\n\n      this.dappStorageKey = dappStorageKey;\n      return dappStorageKey;\n    }\n  }, {\n    key: \"_setupWeb3\",\n    value: function () {\n      var _setupWeb = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee23(providerParams) {\n        var _this14 = this;\n\n        var providerStream, communicationStream, inPageProvider, communicationProvider, detectAccountRequestPrototypeModifier, proxiedInPageProvider, proxiedCommunicationProvider;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee23$(_context23) {\n          while (1) {\n            switch (_context23.prev = _context23.next) {\n              case 0:\n                log.info(\"setupWeb3 running\"); // setup background connection\n\n                providerStream = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* BasePostMessageStream */ \"a\"]({\n                  name: \"embed_torus\",\n                  target: \"iframe_torus\",\n                  targetWindow: this.torusIframe.contentWindow\n                }); // We create another LocalMessageDuplexStream for communication between dapp <> iframe\n\n                communicationStream = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_12__[/* BasePostMessageStream */ \"a\"]({\n                  name: \"embed_communication\",\n                  target: \"iframe_communication\",\n                  targetWindow: this.torusIframe.contentWindow\n                }); // compose the inPage provider\n\n                inPageProvider = new TorusInPageProvider(providerStream, {});\n                communicationProvider = new TorusCommunicationProvider(communicationStream, {});\n\n                inPageProvider.tryWindowHandle = function (payload, cb) {\n                  var _payload = payload;\n\n                  if (!Array.isArray(_payload) && PROVIDER_UNSAFE_METHODS.includes(_payload.method)) {\n                    if (!_this14.communicationProvider.isLoggedIn) throw new Error(\"User Not Logged In\");\n                    var windowId = getWindowId();\n\n                    communicationProvider._handleWindow(windowId, {\n                      target: \"_blank\",\n                      features: getPopupFeatures(FEATURES_CONFIRM_WINDOW)\n                    }); // for inPageProvider methods sending windowId in request instead of params\n                    // as params might be positional.\n\n\n                    _payload.windowId = windowId;\n                  }\n\n                  inPageProvider._rpcEngine.handle(_payload, cb);\n                };\n\n                communicationProvider.tryWindowHandle = function (payload, cb) {\n                  var _payload = payload;\n\n                  if (!Array.isArray(_payload) && COMMUNICATION_UNSAFE_METHODS.includes(_payload.method)) {\n                    var windowId = getWindowId();\n\n                    communicationProvider._handleWindow(windowId, {\n                      target: \"_blank\",\n                      features: getPopupFeatures(FEATURES_PROVIDER_CHANGE_WINDOW) // todo: are these features generic for all\n\n                    }); // for communication methods sending window id in jrpc req params\n\n\n                    _payload.params.windowId = windowId;\n                  }\n\n                  communicationProvider._rpcEngine.handle(_payload, cb);\n                }; // detect solana_requestAccounts and pipe to enable for now\n\n\n                detectAccountRequestPrototypeModifier = function detectAccountRequestPrototypeModifier(m) {\n                  var originalMethod = inPageProvider[m]; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n                  var self = _this14;\n\n                  inPageProvider[m] = function providerFunc(request, cb) {\n                    var method = request.method,\n                        _request$params = request.params,\n                        params = _request$params === void 0 ? [] : _request$params;\n\n                    if (method === \"solana_requestAccounts\") {\n                      if (!cb) return self.login({\n                        loginProvider: params[0]\n                      });\n                      self.login({\n                        loginProvider: params[0]\n                      }) // eslint-disable-next-line promise/no-callback-in-promise\n                      .then(function (res) {\n                        return cb(null, res);\n                      }) // eslint-disable-next-line promise/no-callback-in-promise\n                      .catch(function (err) {\n                        return cb(err);\n                      });\n                    }\n\n                    return originalMethod.apply(this, [request, cb]);\n                  };\n                }; // Detects call to solana_requestAccounts in request & sendAsync and passes to login\n\n\n                detectAccountRequestPrototypeModifier(\"request\");\n                detectAccountRequestPrototypeModifier(\"sendAsync\");\n                detectAccountRequestPrototypeModifier(\"send\");\n                proxiedInPageProvider = new Proxy(inPageProvider, {\n                  // straight up lie that we deleted the property so that it doesn't\n                  // throw an error in strict mode\n                  deleteProperty: function deleteProperty() {\n                    return true;\n                  }\n                });\n                proxiedCommunicationProvider = new Proxy(communicationProvider, {\n                  // straight up lie that we deleted the property so that it doesn't\n                  // throw an error in strict mode\n                  deleteProperty: function deleteProperty() {\n                    return true;\n                  }\n                });\n                this.provider = proxiedInPageProvider;\n                this.communicationProvider = proxiedCommunicationProvider;\n                _context23.next = 17;\n                return Promise.all([inPageProvider._initializeState(), communicationProvider._initializeState(_objectSpread(_objectSpread({}, providerParams), {}, {\n                  dappStorageKey: this.dappStorageKey,\n                  torusAlertContainer: this.torusAlertContainer,\n                  torusIframe: this.torusIframe\n                }))]);\n\n              case 17:\n                log.debug(\"Torus - injected provider\");\n\n              case 18:\n              case \"end\":\n                return _context23.stop();\n            }\n          }\n        }, _callee23, this);\n      }));\n\n      function _setupWeb3(_x15) {\n        return _setupWeb.apply(this, arguments);\n      }\n\n      return _setupWeb3;\n    }()\n  }]);\n\n  return Torus;\n}();\n\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(23).Buffer))\n\n/***/ }),\n\n/***/ 1519:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SolanaWalletAdapter\", function() { return SolanaWalletAdapter; });\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(10);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(53);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(38);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(11);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(12);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1);\n/* harmony import */ var _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(14);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _toruslabs_solana_embed__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1400);\n/* harmony import */ var _web3auth_base__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(13);\n/* harmony import */ var _web3auth_solana_provider__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1309);\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(25);\n/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_13__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar SolanaWalletAdapter = /*#__PURE__*/function (_BaseAdapter) {\n  Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_inherits_js__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"])(SolanaWalletAdapter, _BaseAdapter);\n\n  var _super = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createSuper_js__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])(SolanaWalletAdapter);\n\n  function SolanaWalletAdapter() {\n    var _this;\n\n    Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_classCallCheck_js__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(this, SolanaWalletAdapter);\n\n    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _this = _super.call(this);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"name\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WALLET_ADAPTERS */ \"i\"].TORUS_SOLANA);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"adapterNamespace\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_NAMESPACES */ \"c\"].SOLANA);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"currentChainNamespace\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* CHAIN_NAMESPACES */ \"f\"].SOLANA);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"type\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_CATEGORY */ \"a\"].EXTERNAL);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"status\", _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].NOT_READY);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"torusInstance\", null);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"torusWalletOptions\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"initParams\", void 0);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"loginSettings\", {});\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"solanaProvider\", null);\n\n    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9___default()(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_assertThisInitialized_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(_this), \"rehydrated\", false);\n\n    _this.torusWalletOptions = params.adapterSettings || {};\n    _this.initParams = params.initParams || {};\n    _this.loginSettings = params.loginSettings || {};\n    _this.chainConfig = params.chainConfig || null;\n    return _this;\n  }\n\n  Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_createClass_js__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(SolanaWalletAdapter, [{\n    key: \"provider\",\n    get: function get() {\n      if (this.status === _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED && this.solanaProvider) {\n        var _this$solanaProvider;\n\n        return ((_this$solanaProvider = this.solanaProvider) === null || _this$solanaProvider === void 0 ? void 0 : _this$solanaProvider.provider) || null;\n      }\n\n      return null;\n    },\n    set: function set(_) {\n      throw new Error(\"Not implemented\");\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_8___default.a.mark(function _callee(options) {\n        var network, _this$chainConfig, blockExplorer, displayName, ticker, tickerName, rpcTarget, chainId, _this$chainConfig2, _chainId, _blockExplorer, _displayName, _rpcTarget, _ticker, _tickerName;\n\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_8___default.a.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(SolanaWalletAdapter.prototype), \"checkInitializationRequirements\", this).call(this); // set chainConfig for mainnet by default if not set\n\n\n                if (!this.chainConfig) {\n                  this.chainConfig = Object(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* getChainConfig */ \"m\"])(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* CHAIN_NAMESPACES */ \"f\"].SOLANA, \"0x1\");\n                  _this$chainConfig = this.chainConfig, blockExplorer = _this$chainConfig.blockExplorer, displayName = _this$chainConfig.displayName, ticker = _this$chainConfig.ticker, tickerName = _this$chainConfig.tickerName, rpcTarget = _this$chainConfig.rpcTarget, chainId = _this$chainConfig.chainId;\n                  network = {\n                    chainId: chainId,\n                    rpcTarget: rpcTarget,\n                    blockExplorerUrl: blockExplorer,\n                    displayName: displayName,\n                    ticker: ticker,\n                    tickerName: tickerName,\n                    logo: \"\"\n                  };\n                } else {\n                  _this$chainConfig2 = this.chainConfig, _chainId = _this$chainConfig2.chainId, _blockExplorer = _this$chainConfig2.blockExplorer, _displayName = _this$chainConfig2.displayName, _rpcTarget = _this$chainConfig2.rpcTarget, _ticker = _this$chainConfig2.ticker, _tickerName = _this$chainConfig2.tickerName;\n                  network = {\n                    chainId: _chainId,\n                    rpcTarget: _rpcTarget,\n                    blockExplorerUrl: _blockExplorer,\n                    displayName: _displayName,\n                    tickerName: _tickerName,\n                    ticker: _ticker,\n                    logo: \"\"\n                  };\n                }\n\n                this.torusInstance = new _toruslabs_solana_embed__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"](this.torusWalletOptions);\n                _context.next = 5;\n                return this.torusInstance.init(_objectSpread(_objectSpread({\n                  showTorusButton: false\n                }, this.initParams), {}, {\n                  network: network\n                }));\n\n              case 5:\n                this.solanaProvider = new _web3auth_solana_provider__WEBPACK_IMPORTED_MODULE_12__[\"TorusInjectedProvider\"]({\n                  config: {\n                    chainConfig: this.chainConfig\n                  }\n                });\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].READY;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].READY, _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WALLET_ADAPTERS */ \"i\"].TORUS_SOLANA);\n                _context.prev = 8;\n\n                if (!options.autoConnect) {\n                  _context.next = 13;\n                  break;\n                }\n\n                this.rehydrated = true;\n                _context.next = 13;\n                return this.connect();\n\n              case 13:\n                _context.next = 19;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t0 = _context[\"catch\"](8);\n                loglevel__WEBPACK_IMPORTED_MODULE_13___default.a.error(\"Failed to connect with cached torus solana provider\", _context.t0);\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].ERRORED, _context.t0);\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[8, 15]]);\n      }));\n\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_8___default.a.mark(function _callee2() {\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_8___default.a.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_get_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_getPrototypeOf_js__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(SolanaWalletAdapter.prototype), \"checkConnectionRequirements\", this).call(this);\n\n                if (this.torusInstance) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletInitializationError */ \"j\"].notReady(\"Torus wallet is not initialized\");\n\n              case 3:\n                if (this.solanaProvider) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletInitializationError */ \"j\"].notReady(\"Torus wallet is not initialized\");\n\n              case 5:\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTING;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].CONNECTING, {\n                  adapter: _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WALLET_ADAPTERS */ \"i\"].TORUS_SOLANA\n                });\n                _context2.prev = 7;\n                _context2.next = 10;\n                return this.torusInstance.login(this.loginSettings);\n\n              case 10:\n                _context2.next = 12;\n                return this.solanaProvider.setupProvider(this.torusInstance.provider);\n\n              case 12:\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED;\n                this.torusInstance.showTorusButton();\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED, {\n                  adapter: _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WALLET_ADAPTERS */ \"i\"].TORUS_SOLANA,\n                  reconnected: this.rehydrated\n                });\n                return _context2.abrupt(\"return\", this.provider);\n\n              case 18:\n                _context2.prev = 18;\n                _context2.t0 = _context2[\"catch\"](7);\n                // ready again to be connected\n                this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].READY;\n                this.rehydrated = false;\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].ERRORED, _context2.t0);\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletLoginError */ \"k\"].connectionError(\"Failed to login with torus solana wallet\");\n\n              case 24:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[7, 18]]);\n      }));\n\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      return connect;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_8___default.a.mark(function _callee3() {\n        var options,\n            _args3 = arguments;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_8___default.a.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                options = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : {\n                  cleanup: false\n                };\n\n                if (!(this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED)) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletLoginError */ \"k\"].notConnectedError(\"Not connected with wallet\");\n\n              case 3:\n                if (this.torusInstance) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletInitializationError */ \"j\"].notReady(\"Torus wallet is not initialized\");\n\n              case 5:\n                _context3.next = 7;\n                return this.torusInstance.logout();\n\n              case 7:\n                if (options.cleanup) {\n                  // ready to connect again\n                  this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].NOT_READY;\n                  this.torusInstance = null;\n                  this.solanaProvider = null;\n                } else {\n                  // ready to connect again\n                  this.status = _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].READY;\n                }\n\n                this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_EVENTS */ \"b\"].DISCONNECTED);\n\n              case 9:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n\n      return disconnect;\n    }()\n  }, {\n    key: \"getUserInfo\",\n    value: function () {\n      var _getUserInfo = Object(_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])( /*#__PURE__*/_Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_8___default.a.mark(function _callee4() {\n        var userInfo;\n        return _Users_ronankearns_Documents_blockchain_DAO_DAO_start_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_8___default.a.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(this.status !== _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* ADAPTER_STATUS */ \"d\"].CONNECTED)) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletLoginError */ \"k\"].notConnectedError(\"Not connected with wallet\");\n\n              case 2:\n                if (this.torusInstance) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                throw _web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* WalletInitializationError */ \"j\"].notReady(\"Torus wallet is not initialized\");\n\n              case 4:\n                _context4.next = 6;\n                return this.torusInstance.getUserInfo();\n\n              case 6:\n                userInfo = _context4.sent;\n                return _context4.abrupt(\"return\", userInfo);\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getUserInfo() {\n        return _getUserInfo.apply(this, arguments);\n      }\n\n      return getUserInfo;\n    }()\n  }, {\n    key: \"setAdapterSettings\",\n    value: function setAdapterSettings(_) {}\n  }]);\n\n  return SolanaWalletAdapter;\n}(_web3auth_base__WEBPACK_IMPORTED_MODULE_11__[/* BaseAdapter */ \"e\"]);\n\n\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/ronankearns/Documents/blockchain/DAO/DAO-start/node_modules/fast-deep-equal/index.js","/Users/ronankearns/Documents/blockchain/DAO/DAO-start/node_modules/is-stream/index.js","../src/messages.ts","../src/interfaces.ts","../src/config.ts","../src/loglevel.ts","../src/utils.ts","../src/baseProvider.ts","../src/embedUtils.ts","../src/PopupHandler.ts","../src/communicationProvider.ts","../src/inPageProvider.ts","../src/siteMetadata.ts","../src/embed.ts","../src/solanaWalletAdapter.ts"],"names":["module","exports","equal","a","b","constructor","length","i","keys","Array","isArray","RegExp","source","flags","valueOf","Object","prototype","toString","hasOwnProperty","call","key","isStream","stream","pipe","isWritableStream","writable","_write","_writableState","isReadableStream","readable","_read","_readableState","isDuplexStream","isTransformStream","_transform","errors","disconnected","permanentlyDisconnected","unsupportedSync","method","invalidDuplexStream","invalidOptions","maxEventListeners","invalidRequestArgs","invalidRequestMethod","invalidRequestParams","invalidLoggerObject","invalidLoggerMethod","info","connected","chainId","warnings","PAYMENT_PROVIDER","MOONPAY","WYRE","RAMPNETWORK","XANPOOL","MERCURYO","TRANSAK","TORUS_BUILD_ENV","PRODUCTION","DEVELOPMENT","TESTING","BUTTON_POSITION","BOTTOM_LEFT","TOP_LEFT","BOTTOM_RIGHT","TOP_RIGHT","LOGIN_PROVIDER","GOOGLE","FACEBOOK","REDDIT","DISCORD","TWITCH","APPLE","LINE","GITHUB","KAKAO","LINKEDIN","TWITTER","WEIBO","WECHAT","EMAIL_PASSWORDLESS","translations","en","embed","continue","actionRequired","pendingAction","cookiesRequired","enableCookies","clickHere","de","ja","ko","zh","supportedVerifierList","api","prodTorusUrl","localStorageKey","window","loglevel","createErrorMiddleware","req","res","message","data","next","done","error","log","logStreamDisconnectWarning","remoteLabel","emitter","warningMsg","getWindowId","Math","getTorusUrl","torusUrl","logLevel","getUserLanguage","userLanguage","userLanguages","config","FEATURES_PROVIDER_CHANGE_WINDOW","height","width","FEATURES_DEFAULT_WALLET_WINDOW","FEATURES_DEFAULT_POPUP_WINDOW","FEATURES_CONFIRM_WINDOW","storageAvailable","type","storage","x","e","getPopupFeatures","h","dualScreenLeft","dualScreenTop","document","systemZoom","left","top","features","w","getNetworkConfig","label","blockExplorerUrl","displayName","logo","rpcTarget","ticker","tickerName","connectionStream","jsonRpcStreamName","messages","mux","pump","jsonRpcConnection","createStreamMiddleware","rpcEngine","createIdRemapMiddleware","createLoggerMiddleware","origin","location","request","args","params","getRpcPromiseCallback","send","sendAsync","_handleStreamDisconnect","handleEvent","handlerArgs","handlerWrapper","handler","handle","resolve","htmlToElement","html","template","trimmedHtml","target","_setupTimer","Number","setInterval","clearInterval","open","Promise","close","redirect","TorusCommunicationProvider","languageTranslations","configuration","notificationHandler","payload","COMMUNICATION_NOTIFICATIONS","rid","isFull","url","currentLoginProvider","isLoggedIn","isIFrameFullScreen","isConnected","_initializeState","torusIframe","COMMUNICATION_JRPC_METHODS","_handleWindow","finalUrl","handledWindow","windowId","_displayIframe","style","hideTorusButton","showTorusButton","_rpcRequest","cb","_payload","_handleConnect","_handleDisconnect","errorMessage","_handleCloseWindow","_createPopupBlockAlert","logoUrl","torusAlert","successAlert","btnContainer","bindOnLoad","attachOnLoad","documentReady","getLogoUrl","buttonPosition","hasEmittedConnection","torusWidgetVisibility","initialized","isPermanentlyDisconnected","TorusInPageProvider","jsonRpcNotificationHandler","PROVIDER_NOTIFICATIONS","PROVIDER_JRPC_METHODS","isUnlocked","accounts","isInternal","callback","_handleAccountsChanged","isEthAccounts","finalAccounts","dequal","_handleChainChanged","_handleUnlockStateChanged","img","reject","getSiteName","siteName","metaTitle","icon","imgExists","_icon","Boolean","getSiteMetadata","getSiteIcon","name","PROVIDER_UNSAFE_METHODS","COMMUNICATION_UNSAFE_METHODS","isLocalStorageAvailable","torusIframeHtml","modalZIndex","init","buildEnv","enableLogging","useLocalStorage","apiKey","extraParams","setAPIKey","dappStorageKey","torusIframeUrl","hashParams","handleSetup","dappMetadata","network","login","logout","cleanUp","clearInit","element","isElement","setProvider","showWallet","instanceId","finalPath","path","walletWindow","getUserInfo","userInfoResponse","initiateTopup","provider","topupResponse","sendTransaction","requireAllSignatures","response","signTransaction","buf","Buffer","sendTx","Transaction","signAllTransactions","encodedTransactions","allSignedTransaction","msg","signMessage","getGaslessPublicKey","handleDappStorageKey","storedKey","generatedKey","_setupWeb3","providerStream","targetWindow","contentWindow","communicationStream","inPageProvider","communicationProvider","detectAccountRequestPrototypeModifier","m","originalMethod","self","loginProvider","err","proxiedInPageProvider","deleteProperty","proxiedCommunicationProvider","torusAlertContainer","SolanaWalletAdapter","WALLET_ADAPTERS","TORUS_SOLANA","ADAPTER_NAMESPACES","SOLANA","CHAIN_NAMESPACES","ADAPTER_CATEGORY","EXTERNAL","ADAPTER_STATUS","NOT_READY","getChainConfig","chainConfig","ADAPTER_EVENTS","options","connect","WalletInitializationError","adapter","reconnected","rehydrated","WalletLoginError","disconnect","cleanup","userInfo","setAdapterSettings","BaseAdapter"],"mappings":"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","file":"x","sourcesContent":["'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","export function isStream(stream) {\n\treturn stream !== null\n\t\t&& typeof stream === 'object'\n\t\t&& typeof stream.pipe === 'function';\n}\n\nexport function isWritableStream(stream) {\n\treturn isStream(stream)\n\t\t&& stream.writable !== false\n\t\t&& typeof stream._write === 'function'\n\t\t&& typeof stream._writableState === 'object';\n}\n\nexport function isReadableStream(stream) {\n\treturn isStream(stream)\n\t\t&& stream.readable !== false\n\t\t&& typeof stream._read === 'function'\n\t\t&& typeof stream._readableState === 'object';\n}\n\nexport function isDuplexStream(stream) {\n\treturn isWritableStream(stream)\n\t\t&& isReadableStream(stream);\n}\n\nexport function isTransformStream(stream) {\n\treturn isDuplexStream(stream)\n\t\t&& typeof stream._transform === 'function';\n}\n","import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { Transaction } from '@solana/web3.js';\nimport { createLoggerMiddleware, COMMUNICATION_JRPC_METHODS, COMMUNICATION_NOTIFICATIONS, PROVIDER_JRPC_METHODS, PROVIDER_NOTIFICATIONS } from '@toruslabs/base-controllers';\nimport { setAPIKey } from '@toruslabs/http-helpers';\nimport { SafeEventEmitter, ObjectMultiplex, createStreamMiddleware, JRPCEngine, createIdRemapMiddleware, getRpcPromiseCallback, BasePostMessageStream } from '@toruslabs/openlogin-jrpc';\nimport { ethErrors, EthereumRpcError } from 'eth-rpc-errors';\nimport { isDuplexStream } from 'is-stream';\nimport pump from 'pump';\nimport loglevel from 'loglevel';\nimport dequal from 'fast-deep-equal';\n\nvar messages = {\n  errors: {\n    disconnected: () => \"Torus: Lost connection to Torus.\",\n    permanentlyDisconnected: () => \"Torus: Disconnected from iframe. Page reload required.\",\n    unsupportedSync: method => \"Torus: The Torus Ethereum provider does not support synchronous methods like \".concat(method, \" without a callback parameter.\"),\n    invalidDuplexStream: () => \"Must provide a Node.js-style duplex stream.\",\n    invalidOptions: maxEventListeners => \"Invalid options. Received: { maxEventListeners: \".concat(maxEventListeners, \"}\"),\n    invalidRequestArgs: () => \"Expected a single, non-array, object argument.\",\n    invalidRequestMethod: () => \"'args.method' must be a non-empty string.\",\n    invalidRequestParams: () => \"'args.params' must be an object or array if provided.\",\n    invalidLoggerObject: () => \"'args.logger' must be an object if provided.\",\n    invalidLoggerMethod: method => \"'args.logger' must include required method '\".concat(method, \"'.\")\n  },\n  info: {\n    connected: chainId => \"Torus: Connected to chain with ID \\\"\".concat(chainId, \"\\\".\")\n  },\n  warnings: {}\n};\n\nconst PAYMENT_PROVIDER = {\n  MOONPAY: \"moonpay\",\n  WYRE: \"wyre\",\n  RAMPNETWORK: \"rampnetwork\",\n  XANPOOL: \"xanpool\",\n  MERCURYO: \"mercuryo\",\n  TRANSAK: \"transak\"\n};\nconst TORUS_BUILD_ENV = {\n  PRODUCTION: \"production\",\n  DEVELOPMENT: \"development\",\n  TESTING: \"testing\"\n};\nconst BUTTON_POSITION = {\n  BOTTOM_LEFT: \"bottom-left\",\n  TOP_LEFT: \"top-left\",\n  BOTTOM_RIGHT: \"bottom-right\",\n  TOP_RIGHT: \"top-right\"\n};\nconst LOGIN_PROVIDER = {\n  GOOGLE: \"google\",\n  FACEBOOK: \"facebook\",\n  REDDIT: \"reddit\",\n  DISCORD: \"discord\",\n  TWITCH: \"twitch\",\n  APPLE: \"apple\",\n  LINE: \"line\",\n  GITHUB: \"github\",\n  KAKAO: \"kakao\",\n  LINKEDIN: \"linkedin\",\n  TWITTER: \"twitter\",\n  WEIBO: \"weibo\",\n  WECHAT: \"wechat\",\n  EMAIL_PASSWORDLESS: \"email_passwordless\"\n};\n\nconst translations = {\n  en: {\n    embed: {\n      continue: \"Continue\",\n      actionRequired: \"Authorization required\",\n      pendingAction: \"Click continue to proceed with your request in a popup\",\n      cookiesRequired: \"Cookies Required\",\n      enableCookies: \"Please enable cookies in your browser preferences to access Torus\",\n      clickHere: \"More Info\"\n    }\n  },\n  de: {\n    embed: {\n      continue: \"Fortsetzen\",\n      actionRequired: \"Autorisierung erforderlich\",\n      pendingAction: \"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren\",\n      cookiesRequired: \"Cookies benötigt\",\n      enableCookies: \"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen\",\n      clickHere: \"Mehr Info\"\n    }\n  },\n  ja: {\n    embed: {\n      continue: \"継続する\",\n      actionRequired: \"認証が必要です\",\n      pendingAction: \"続行をクリックして、ポップアップでリクエストを続行します\",\n      cookiesRequired: \"必要なクッキー\",\n      enableCookies: \"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。\",\n      clickHere: \"詳しくは\"\n    }\n  },\n  ko: {\n    embed: {\n      continue: \"계속하다\",\n      actionRequired: \"승인 필요\",\n      pendingAction: \"팝업에서 요청을 진행하려면 계속을 클릭하십시오.\",\n      cookiesRequired: \"쿠키 필요\",\n      enableCookies: \"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.\",\n      clickHere: \"더 많은 정보\"\n    }\n  },\n  zh: {\n    embed: {\n      continue: \"继续\",\n      actionRequired: \"需要授权\",\n      pendingAction: \"单击继续以在弹出窗口中继续您的请求\",\n      cookiesRequired: \"必填Cookie\",\n      enableCookies: \"请在您的浏览器首选项中启用cookie以访问Torus。\",\n      clickHere: \"更多信息\"\n    }\n  }\n};\nvar configuration = {\n  supportedVerifierList: [LOGIN_PROVIDER.GOOGLE, LOGIN_PROVIDER.REDDIT, LOGIN_PROVIDER.DISCORD],\n  api: \"https://api.tor.us\",\n  translations,\n  prodTorusUrl: \"\",\n  localStorageKey: \"torus-\".concat(window.location.hostname)\n};\n\nvar log = loglevel.getLogger(\"solana-embed\");\n\n/**\n * json-rpc-engine middleware that logs RPC errors and and validates req.method.\n *\n * @param log - The logging API to use.\n * @returns  json-rpc-engine middleware function\n */\n\nfunction createErrorMiddleware() {\n  return (req, res, next) => {\n    // json-rpc-engine will terminate the request when it notices this error\n    if (typeof req.method !== \"string\" || !req.method) {\n      res.error = ethErrors.rpc.invalidRequest({\n        message: \"The request 'method' must be a non-empty string.\",\n        data: req\n      });\n    }\n\n    next(done => {\n      const {\n        error\n      } = res;\n\n      if (!error) {\n        return done();\n      }\n\n      log.error(\"Torus - RPC Error: \".concat(error.message), error);\n      return done();\n    });\n  };\n}\n/**\n * Logs a stream disconnection error. Emits an 'error' if given an\n * EventEmitter that has listeners for the 'error' event.\n *\n * @param log - The logging API to use.\n * @param remoteLabel - The label of the disconnected stream.\n * @param error - The associated error to log.\n * @param emitter - The logging API to use.\n */\n\nfunction logStreamDisconnectWarning(remoteLabel, error, emitter) {\n  let warningMsg = \"Torus: Lost connection to \\\"\".concat(remoteLabel, \"\\\".\");\n\n  if (error !== null && error !== void 0 && error.stack) {\n    warningMsg += \"\\n\".concat(error.stack);\n  }\n\n  log.warn(warningMsg);\n\n  if (emitter && emitter.listenerCount(\"error\") > 0) {\n    emitter.emit(\"error\", warningMsg);\n  }\n}\nconst getWindowId = () => Math.random().toString(36).slice(2);\nconst getTorusUrl = async buildEnv => {\n  let torusUrl;\n  let logLevel; // const versionUsed = version;\n  // log.info(\"solana embed version used: \", versionUsed);\n\n  switch (buildEnv) {\n    case \"testing\":\n      torusUrl = \"https://solana-testing.tor.us\";\n      logLevel = \"debug\";\n      break;\n\n    case \"development\":\n      torusUrl = \"http://localhost:8080\";\n      logLevel = \"debug\";\n      break;\n\n    default:\n      torusUrl = \"https://solana.tor.us\";\n      logLevel = \"error\";\n      break;\n  }\n\n  return {\n    torusUrl,\n    logLevel\n  };\n};\nconst getUserLanguage = () => {\n  let userLanguage = window.navigator.language || \"en-US\";\n  const userLanguages = userLanguage.split(\"-\");\n  userLanguage = Object.prototype.hasOwnProperty.call(configuration.translations, userLanguages[0]) ? userLanguages[0] : \"en\";\n  return userLanguage;\n};\nconst FEATURES_PROVIDER_CHANGE_WINDOW = {\n  height: 660,\n  width: 375\n};\nconst FEATURES_DEFAULT_WALLET_WINDOW = {\n  height: 740,\n  width: 1315\n};\nconst FEATURES_DEFAULT_POPUP_WINDOW = {\n  height: 700,\n  width: 1200\n};\nconst FEATURES_CONFIRM_WINDOW = {\n  height: 600,\n  width: 400\n};\nfunction storageAvailable(type) {\n  let storage;\n\n  try {\n    storage = window[type];\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return e && ( // everything except Firefox\n    e.code === 22 || // Firefox\n    e.code === 1014 || // test name field too, because code might not be present\n    // everything except Firefox\n    e.name === \"QuotaExceededError\" || // Firefox\n    e.name === \"NS_ERROR_DOM_QUOTA_REACHED\") && // acknowledge QuotaExceededError only if there's something already stored\n    storage && storage.length !== 0;\n  }\n}\n/**\n * popup handler utils\n */\n\nfunction getPopupFeatures(_ref) {\n  let {\n    width: w,\n    height: h\n  } = _ref;\n  // Fixes dual-screen position                             Most browsers      Firefox\n  const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n  const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;\n  const width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : window.screen.width;\n  const height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : window.screen.height;\n  const systemZoom = 1; // No reliable estimate\n\n  const left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);\n  const top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);\n  const features = \"titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=\".concat(h / systemZoom, \",width=\").concat(w / systemZoom, \",top=\").concat(top, \",left=\").concat(left);\n  return features;\n}\nconst getNetworkConfig = label => {\n  switch (label) {\n    case \"mainnet-beta\":\n      return {\n        blockExplorerUrl: \"https://explorer.solana.com\",\n        chainId: \"0x1\",\n        displayName: \"Solana Mainnet\",\n        logo: \"solana.svg\",\n        rpcTarget: \"https://api.mainnet-beta.solana.com\",\n        ticker: \"SOL\",\n        tickerName: \"Solana Token\"\n      };\n\n    case \"testnet\":\n      return {\n        blockExplorerUrl: \"https://explorer.solana.com\",\n        chainId: \"0x2\",\n        displayName: \"Solana Testnet\",\n        logo: \"solana.svg\",\n        rpcTarget: \"https://api.testnet.solana.com\",\n        ticker: \"SOL\",\n        tickerName: \"Solana Token\"\n      };\n\n    case \"devnet\":\n      return {\n        blockExplorerUrl: \"https://explorer.solana.com\",\n        chainId: \"0x3\",\n        displayName: \"Solana Devnet\",\n        logo: \"solana.svg\",\n        rpcTarget: \"https://api.devnet.solana.com\",\n        ticker: \"SOL\",\n        tickerName: \"Solana Token\"\n      };\n\n    default:\n      return undefined;\n  }\n};\n\nclass BaseProvider extends SafeEventEmitter {\n  /**\n   * Indicating that this provider is a Torus provider.\n   */\n  constructor(connectionStream, _ref) {\n    let {\n      maxEventListeners = 100,\n      jsonRpcStreamName = \"provider\"\n    } = _ref;\n    super();\n\n    _defineProperty(this, \"isTorus\", void 0);\n\n    _defineProperty(this, \"_rpcEngine\", void 0);\n\n    _defineProperty(this, \"jsonRpcConnectionEvents\", void 0);\n\n    _defineProperty(this, \"_state\", void 0);\n\n    if (!isDuplexStream(connectionStream)) {\n      throw new Error(messages.errors.invalidDuplexStream());\n    }\n\n    this.isTorus = true;\n    this.setMaxListeners(maxEventListeners);\n    this._handleConnect = this._handleConnect.bind(this);\n    this._handleDisconnect = this._handleDisconnect.bind(this);\n    this._handleStreamDisconnect = this._handleStreamDisconnect.bind(this);\n    this._rpcRequest = this._rpcRequest.bind(this);\n    this._initializeState = this._initializeState.bind(this);\n    this.request = this.request.bind(this);\n    this.sendAsync = this.sendAsync.bind(this); // this.enable = this.enable.bind(this);\n    // setup connectionStream multiplexing\n\n    const mux = new ObjectMultiplex();\n    pump(connectionStream, mux, connectionStream, this._handleStreamDisconnect.bind(this, \"Torus\")); // ignore phishing warning message (handled elsewhere)\n\n    mux.ignoreStream(\"phishing\"); // setup own event listeners\n    // connect to async provider\n\n    const jsonRpcConnection = createStreamMiddleware();\n    pump(jsonRpcConnection.stream, mux.createStream(jsonRpcStreamName), jsonRpcConnection.stream, this._handleStreamDisconnect.bind(this, \"Torus RpcProvider\")); // handle RPC requests via dapp-side rpc engine\n\n    const rpcEngine = new JRPCEngine();\n    rpcEngine.push(createIdRemapMiddleware());\n    rpcEngine.push(createErrorMiddleware());\n    rpcEngine.push(createLoggerMiddleware({\n      origin: location.origin\n    }));\n    rpcEngine.push(jsonRpcConnection.middleware);\n    this._rpcEngine = rpcEngine;\n    this.jsonRpcConnectionEvents = jsonRpcConnection.events;\n  }\n  /**\n   * Submits an RPC request for the given method, with the given params.\n   * Resolves with the result of the method call, or rejects on error.\n   */\n\n\n  async request(args) {\n    if (!args || typeof args !== \"object\" || Array.isArray(args)) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestArgs(),\n        data: args\n      });\n    }\n\n    const {\n      method,\n      params\n    } = args;\n\n    if (typeof method !== \"string\" || method.length === 0) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestMethod(),\n        data: args\n      });\n    }\n\n    if (params !== undefined && !Array.isArray(params) && (typeof params !== \"object\" || params === null)) {\n      throw ethErrors.rpc.invalidRequest({\n        message: messages.errors.invalidRequestParams(),\n        data: args\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      this._rpcRequest({\n        method,\n        params\n      }, getRpcPromiseCallback(resolve, reject));\n    });\n  }\n  /**\n   * Submits an RPC request per the given JSON-RPC request object.\n   */\n\n\n  send(payload, callback) {\n    this._rpcRequest(payload, callback);\n  }\n  /**\n   * Submits an RPC request per the given JSON-RPC request object.\n   */\n\n\n  sendAsync(payload) {\n    return new Promise((resolve, reject) => {\n      this._rpcRequest(payload, getRpcPromiseCallback(resolve, reject));\n    });\n  }\n  /**\n   * Called when connection is lost to critical streams.\n   *\n   * emits TorusInpageProvider#disconnect\n   */\n\n\n  _handleStreamDisconnect(streamName, error) {\n    logStreamDisconnectWarning(streamName, error, this);\n\n    this._handleDisconnect(false, error ? error.message : undefined);\n  }\n\n}\n\nconst handleEvent = function (handle, eventName, handler) {\n  for (var _len = arguments.length, handlerArgs = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    handlerArgs[_key - 3] = arguments[_key];\n  }\n\n  const handlerWrapper = () => {\n    handler(...handlerArgs);\n    handle.removeEventListener(eventName, handlerWrapper);\n  };\n\n  handle.addEventListener(eventName, handlerWrapper);\n};\nasync function documentReady() {\n  return new Promise(resolve => {\n    if (document.readyState !== \"loading\") {\n      resolve();\n    } else {\n      handleEvent(document, \"DOMContentLoaded\", resolve);\n    }\n  });\n}\nconst htmlToElement = html => {\n  const template = window.document.createElement(\"template\");\n  const trimmedHtml = html.trim(); // Never return a text node of whitespace as the result\n\n  template.innerHTML = trimmedHtml;\n  return template.content.firstChild;\n};\n\nclass PopupHandler extends SafeEventEmitter {\n  constructor(_ref) {\n    let {\n      url,\n      target,\n      features\n    } = _ref;\n    super();\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"target\", void 0);\n\n    _defineProperty(this, \"features\", void 0);\n\n    _defineProperty(this, \"window\", void 0);\n\n    _defineProperty(this, \"windowTimer\", void 0);\n\n    _defineProperty(this, \"iClosedWindow\", void 0);\n\n    this.url = url;\n    this.target = target || \"_blank\";\n    this.features = features || getPopupFeatures(FEATURES_DEFAULT_POPUP_WINDOW);\n    this.window = undefined;\n    this.windowTimer = undefined;\n    this.iClosedWindow = false;\n\n    this._setupTimer();\n  }\n\n  _setupTimer() {\n    this.windowTimer = Number(setInterval(() => {\n      if (this.window && this.window.closed) {\n        clearInterval(this.windowTimer);\n\n        if (!this.iClosedWindow) {\n          this.emit(\"close\");\n        }\n\n        this.iClosedWindow = false;\n        this.window = undefined;\n      }\n\n      if (this.window === undefined) clearInterval(this.windowTimer);\n    }, 500));\n  }\n\n  open() {\n    var _this$window;\n\n    this.window = window.open(this.url.href, this.target, this.features);\n    if ((_this$window = this.window) !== null && _this$window !== void 0 && _this$window.focus) this.window.focus();\n    return Promise.resolve();\n  }\n\n  close() {\n    this.iClosedWindow = true;\n    if (this.window) this.window.close();\n  }\n\n  redirect(locationReplaceOnRedirect) {\n    if (locationReplaceOnRedirect) {\n      window.location.replace(this.url.href);\n    } else {\n      window.location.href = this.url.href;\n    }\n  }\n\n}\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$2(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nclass TorusCommunicationProvider extends BaseProvider {\n  constructor(connectionStream, _ref) {\n    let {\n      maxEventListeners = 100,\n      jsonRpcStreamName = \"provider\"\n    } = _ref;\n    super(connectionStream, {\n      maxEventListeners,\n      jsonRpcStreamName\n    }); // private state\n\n    _defineProperty(this, \"embedTranslations\", void 0);\n\n    _defineProperty(this, \"torusUrl\", void 0);\n\n    _defineProperty(this, \"dappStorageKey\", void 0);\n\n    _defineProperty(this, \"windowRefs\", void 0);\n\n    _defineProperty(this, \"tryWindowHandle\", void 0);\n\n    _defineProperty(this, \"torusAlertContainer\", void 0);\n\n    _defineProperty(this, \"torusIframe\", void 0);\n\n    this._state = _objectSpread$2({}, TorusCommunicationProvider._defaultState); // public state\n\n    this.torusUrl = \"\";\n    this.dappStorageKey = \"\";\n    const languageTranslations = configuration.translations[getUserLanguage()];\n    this.embedTranslations = languageTranslations.embed;\n    this.windowRefs = {}; // setup own event listeners\n    // EIP-1193 connect\n\n    this.on(\"connect\", () => {\n      this._state.isConnected = true;\n    });\n\n    const notificationHandler = payload => {\n      const {\n        method,\n        params\n      } = payload;\n\n      if (method === COMMUNICATION_NOTIFICATIONS.IFRAME_STATUS) {\n        const {\n          isFullScreen,\n          rid\n        } = params;\n\n        this._displayIframe({\n          isFull: isFullScreen,\n          rid: rid\n        });\n      } else if (method === COMMUNICATION_NOTIFICATIONS.CREATE_WINDOW) {\n        const {\n          windowId,\n          url\n        } = params;\n\n        this._createPopupBlockAlert(windowId, url);\n      } else if (method === COMMUNICATION_NOTIFICATIONS.CLOSE_WINDOW) {\n        this._handleCloseWindow(params);\n      } else if (method === COMMUNICATION_NOTIFICATIONS.USER_LOGGED_IN) {\n        const {\n          currentLoginProvider\n        } = params;\n        this._state.isLoggedIn = true;\n        this._state.currentLoginProvider = currentLoginProvider;\n      } else if (method === COMMUNICATION_NOTIFICATIONS.USER_LOGGED_OUT) {\n        this._state.isLoggedIn = false;\n        this._state.currentLoginProvider = null;\n\n        this._displayIframe();\n      }\n    };\n\n    this.jsonRpcConnectionEvents.on(\"notification\", notificationHandler);\n  }\n\n  get isLoggedIn() {\n    return this._state.isLoggedIn;\n  }\n\n  get isIFrameFullScreen() {\n    return this._state.isIFrameFullScreen;\n  }\n  /**\n   * Returns whether the inPage provider is connected to Torus.\n   */\n\n\n  isConnected() {\n    return this._state.isConnected;\n  }\n\n  async _initializeState(params) {\n    try {\n      const {\n        torusUrl,\n        dappStorageKey,\n        torusAlertContainer,\n        torusIframe\n      } = params;\n      this.torusUrl = torusUrl;\n      this.dappStorageKey = dappStorageKey;\n      this.torusAlertContainer = torusAlertContainer;\n      this.torusIframe = torusIframe;\n      this.torusIframe.addEventListener(\"load\", () => {\n        // only do this if iframe is not full screen\n        if (!this._state.isIFrameFullScreen) this._displayIframe();\n      });\n      const {\n        currentLoginProvider,\n        isLoggedIn\n      } = await this.request({\n        method: COMMUNICATION_JRPC_METHODS.GET_PROVIDER_STATE,\n        params: []\n      }); // indicate that we've connected, for EIP-1193 compliance\n\n      this._handleConnect(currentLoginProvider, isLoggedIn);\n    } catch (error) {\n      log.error(\"Torus: Failed to get initial state. Please report this bug.\", error);\n    } finally {\n      log.info(\"initialized communication state\");\n      this._state.initialized = true;\n      this.emit(\"_initialized\");\n    }\n  }\n\n  _handleWindow(windowId) {\n    let {\n      url,\n      target,\n      features\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const finalUrl = new URL(url || \"\".concat(this.torusUrl, \"/redirect?windowId=\").concat(windowId));\n\n    if (this.dappStorageKey) {\n      // If multiple instances, it returns the first one\n      if (finalUrl.hash) finalUrl.hash += \"&dappStorageKey=\".concat(this.dappStorageKey);else finalUrl.hash = \"#dappStorageKey=\".concat(this.dappStorageKey);\n    }\n\n    const handledWindow = new PopupHandler({\n      url: finalUrl,\n      target,\n      features\n    });\n    handledWindow.open();\n\n    if (!handledWindow.window) {\n      this._createPopupBlockAlert(windowId, finalUrl.href);\n\n      return;\n    } // Add to collection only if window is opened\n\n\n    this.windowRefs[windowId] = handledWindow; // We tell the iframe that the window has been successfully opened\n\n    this.request({\n      method: COMMUNICATION_JRPC_METHODS.OPENED_WINDOW,\n      params: {\n        windowId\n      }\n    });\n    handledWindow.once(\"close\", () => {\n      // user closed the window\n      delete this.windowRefs[windowId];\n      this.request({\n        method: COMMUNICATION_JRPC_METHODS.CLOSED_WINDOW,\n        params: {\n          windowId\n        }\n      });\n    });\n  }\n\n  _displayIframe() {\n    let {\n      isFull = false,\n      rid = \"\"\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const style = {}; // set phase\n\n    if (!isFull) {\n      style.display = this._state.torusWidgetVisibility ? \"block\" : \"none\";\n      style.height = \"70px\";\n      style.width = \"70px\";\n\n      switch (this._state.buttonPosition) {\n        case BUTTON_POSITION.TOP_LEFT:\n          style.top = \"0px\";\n          style.left = \"0px\";\n          style.right = \"auto\";\n          style.bottom = \"auto\";\n          break;\n\n        case BUTTON_POSITION.TOP_RIGHT:\n          style.top = \"0px\";\n          style.right = \"0px\";\n          style.left = \"auto\";\n          style.bottom = \"auto\";\n          break;\n\n        case BUTTON_POSITION.BOTTOM_RIGHT:\n          style.bottom = \"0px\";\n          style.right = \"0px\";\n          style.top = \"auto\";\n          style.left = \"auto\";\n          break;\n\n        case BUTTON_POSITION.BOTTOM_LEFT:\n        default:\n          style.bottom = \"0px\";\n          style.left = \"0px\";\n          style.top = \"auto\";\n          style.right = \"auto\";\n          break;\n      }\n    } else {\n      style.display = \"block\";\n      style.width = \"100%\";\n      style.height = \"100%\";\n      style.top = \"0px\";\n      style.right = \"0px\";\n      style.left = \"0px\";\n      style.bottom = \"0px\";\n    }\n\n    Object.assign(this.torusIframe.style, style);\n    this._state.isIFrameFullScreen = isFull;\n    this.request({\n      method: COMMUNICATION_JRPC_METHODS.IFRAME_STATUS,\n      params: {\n        isIFrameFullScreen: isFull,\n        rid\n      }\n    });\n  }\n\n  hideTorusButton() {\n    this._state.torusWidgetVisibility = false;\n\n    this._displayIframe();\n  }\n\n  showTorusButton() {\n    this._state.torusWidgetVisibility = true;\n\n    this._displayIframe();\n  }\n  /**\n   * Internal RPC method. Forwards requests to background via the RPC engine.\n   * Also remap ids inbound and outbound\n   */\n\n\n  _rpcRequest(payload, callback) {\n    const cb = callback;\n    const _payload = payload;\n\n    if (!Array.isArray(_payload)) {\n      if (!_payload.jsonrpc) {\n        _payload.jsonrpc = \"2.0\";\n      }\n    }\n\n    this.tryWindowHandle(_payload, cb);\n  }\n  /**\n   * When the provider becomes connected, updates internal state and emits\n   * required events. Idempotent.\n   *\n   * @param currentLoginProvider - The login Provider\n   * emits TorusInpageProvider#connect\n   */\n\n\n  _handleConnect(currentLoginProvider, isLoggedIn) {\n    if (!this._state.isConnected) {\n      this._state.isConnected = true;\n      this.emit(\"connect\", {\n        currentLoginProvider,\n        isLoggedIn\n      });\n      log.debug(messages.info.connected(currentLoginProvider));\n    }\n  }\n  /**\n   * When the provider becomes disconnected, updates internal state and emits\n   * required events. Idempotent with respect to the isRecoverable parameter.\n   *\n   * Error codes per the CloseEvent status codes as required by EIP-1193:\n   * https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\n   *\n   * @param isRecoverable - Whether the disconnection is recoverable.\n   * @param errorMessage - A custom error message.\n   * emits TorusInpageProvider#disconnect\n   */\n\n\n  _handleDisconnect(isRecoverable, errorMessage) {\n    if (this._state.isConnected || !this._state.isPermanentlyDisconnected && !isRecoverable) {\n      this._state.isConnected = false;\n      let error;\n\n      if (isRecoverable) {\n        error = new EthereumRpcError(1013, // Try again later\n        errorMessage || messages.errors.disconnected());\n        log.debug(error);\n      } else {\n        error = new EthereumRpcError(1011, // Internal error\n        errorMessage || messages.errors.permanentlyDisconnected());\n        log.error(error);\n        this._state.currentLoginProvider = null;\n        this._state.isLoggedIn = false;\n        this._state.torusWidgetVisibility = false;\n        this._state.isIFrameFullScreen = false;\n        this._state.isPermanentlyDisconnected = true;\n      }\n\n      this.emit(\"disconnect\", error);\n    }\n  } // Called if the iframe wants to close the window cause it is done processing the request\n\n\n  _handleCloseWindow(params) {\n    const {\n      windowId\n    } = params;\n\n    if (this.windowRefs[windowId]) {\n      this.windowRefs[windowId].close();\n      delete this.windowRefs[windowId];\n    }\n  }\n\n  async _createPopupBlockAlert(windowId, url) {\n    const logoUrl = this.getLogoUrl();\n    const torusAlert = htmlToElement('<div id=\"torusAlert\" class=\"torus-alert--v2\">' + \"<div id=\\\"torusAlert__logo\\\"><img src=\\\"\".concat(logoUrl, \"\\\" /></div>\") + \"<div>\" + \"<h1 id=\\\"torusAlert__title\\\">\".concat(this.embedTranslations.actionRequired, \"</h1>\") + \"<p id=\\\"torusAlert__desc\\\">\".concat(this.embedTranslations.pendingAction, \"</p>\") + \"</div>\" + \"</div>\");\n    const successAlert = htmlToElement(\"<div><a id=\\\"torusAlert__btn\\\">\".concat(this.embedTranslations.continue, \"</a></div>\"));\n    const btnContainer = htmlToElement('<div id=\"torusAlert__btn-container\"></div>');\n    btnContainer.appendChild(successAlert);\n    torusAlert.appendChild(btnContainer);\n\n    const bindOnLoad = () => {\n      successAlert.addEventListener(\"click\", () => {\n        this._handleWindow(windowId, {\n          url,\n          target: \"_blank\",\n          features: getPopupFeatures(FEATURES_CONFIRM_WINDOW)\n        });\n\n        torusAlert.remove();\n        if (this.torusAlertContainer.children.length === 0) this.torusAlertContainer.style.display = \"none\";\n      });\n    };\n\n    const attachOnLoad = () => {\n      this.torusAlertContainer.appendChild(torusAlert);\n    };\n\n    await documentReady();\n    attachOnLoad();\n    bindOnLoad();\n    this.torusAlertContainer.style.display = \"block\";\n  }\n\n  getLogoUrl() {\n    const logoUrl = \"\".concat(this.torusUrl, \"/images/torus_icon-blue.svg\");\n    return logoUrl;\n  }\n\n}\n\n_defineProperty(TorusCommunicationProvider, \"_defaultState\", {\n  buttonPosition: \"bottom-left\",\n  currentLoginProvider: null,\n  isIFrameFullScreen: false,\n  hasEmittedConnection: false,\n  torusWidgetVisibility: false,\n  initialized: false,\n  isLoggedIn: false,\n  isPermanentlyDisconnected: false,\n  isConnected: false\n});\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nclass TorusInPageProvider extends BaseProvider {\n  /**\n   * The chain ID of the currently connected Solana chain.\n   * See [chainId.network]{@link https://chainid.network} for more information.\n   */\n\n  /**\n   * The user's currently selected Solana address.\n   * If null, Torus is either locked or the user has not permitted any\n   * addresses to be viewed.\n   */\n  constructor(connectionStream, _ref) {\n    let {\n      maxEventListeners = 100,\n      jsonRpcStreamName = \"provider\"\n    } = _ref;\n    super(connectionStream, {\n      maxEventListeners,\n      jsonRpcStreamName\n    }); // private state\n\n    _defineProperty(this, \"chainId\", void 0);\n\n    _defineProperty(this, \"selectedAddress\", void 0);\n\n    _defineProperty(this, \"tryWindowHandle\", void 0);\n\n    this._state = _objectSpread$1({}, TorusInPageProvider._defaultState); // public state\n\n    this.selectedAddress = null;\n    this.chainId = null;\n    this._handleAccountsChanged = this._handleAccountsChanged.bind(this);\n    this._handleChainChanged = this._handleChainChanged.bind(this);\n    this._handleUnlockStateChanged = this._handleUnlockStateChanged.bind(this); // setup own event listeners\n    // EIP-1193 connect\n\n    this.on(\"connect\", () => {\n      this._state.isConnected = true;\n    });\n\n    const jsonRpcNotificationHandler = payload => {\n      const {\n        method,\n        params\n      } = payload;\n\n      if (method === PROVIDER_NOTIFICATIONS.ACCOUNTS_CHANGED) {\n        this._handleAccountsChanged(params);\n      } else if (method === PROVIDER_NOTIFICATIONS.UNLOCK_STATE_CHANGED) {\n        this._handleUnlockStateChanged(params);\n      } else if (method === PROVIDER_NOTIFICATIONS.CHAIN_CHANGED) {\n        this._handleChainChanged(params);\n      }\n    }; // json rpc notification listener\n\n\n    this.jsonRpcConnectionEvents.on(\"notification\", jsonRpcNotificationHandler);\n  }\n  /**\n   * Returns whether the inpage provider is connected to Torus.\n   */\n\n\n  isConnected() {\n    return this._state.isConnected;\n  } // Private Methods\n  //= ===================\n\n  /**\n   * Constructor helper.\n   * Populates initial state by calling 'wallet_getProviderState' and emits\n   * necessary events.\n   */\n\n\n  async _initializeState() {\n    try {\n      const {\n        accounts,\n        chainId,\n        isUnlocked\n      } = await this.request({\n        method: PROVIDER_JRPC_METHODS.GET_PROVIDER_STATE,\n        params: []\n      }); // indicate that we've connected, for EIP-1193 compliance\n\n      this.emit(\"connect\", {\n        chainId\n      });\n\n      this._handleChainChanged({\n        chainId\n      });\n\n      this._handleUnlockStateChanged({\n        accounts,\n        isUnlocked\n      });\n\n      this._handleAccountsChanged(accounts);\n    } catch (error) {\n      log.error(\"Torus: Failed to get initial state. Please report this bug.\", error);\n    } finally {\n      log.info(\"initialized provider state\");\n      this._state.initialized = true;\n      this.emit(\"_initialized\");\n    }\n  }\n  /**\n   * Internal RPC method. Forwards requests to background via the RPC engine.\n   * Also remap ids inbound and outbound\n   */\n\n\n  _rpcRequest(payload, callback) {\n    let isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    let cb = callback;\n    const _payload = payload;\n\n    if (!Array.isArray(_payload)) {\n      if (!_payload.jsonrpc) {\n        _payload.jsonrpc = \"2.0\";\n      }\n\n      if (_payload.method === \"solana_accounts\" || _payload.method === \"solana_requestAccounts\") {\n        // handle accounts changing\n        cb = (err, res) => {\n          this._handleAccountsChanged(res.result || [], _payload.method === \"solana_accounts\", isInternal);\n\n          callback(err, res);\n        };\n      } else if (_payload.method === \"wallet_getProviderState\") {\n        this._rpcEngine.handle(payload, cb);\n\n        return;\n      }\n    }\n\n    this.tryWindowHandle(_payload, cb);\n  }\n  /**\n   * When the provider becomes connected, updates internal state and emits\n   * required events. Idempotent.\n   *\n   * @param chainId - The ID of the newly connected chain.\n   * emits TorusInpageProvider#connect\n   */\n\n\n  _handleConnect(chainId) {\n    if (!this._state.isConnected) {\n      this._state.isConnected = true;\n      this.emit(\"connect\", {\n        chainId\n      });\n      log.debug(messages.info.connected(chainId));\n    }\n  }\n  /**\n   * When the provider becomes disconnected, updates internal state and emits\n   * required events. Idempotent with respect to the isRecoverable parameter.\n   *\n   * Error codes per the CloseEvent status codes as required by EIP-1193:\n   * https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\n   *\n   * @param isRecoverable - Whether the disconnection is recoverable.\n   * @param errorMessage - A custom error message.\n   * emits TorusInpageProvider#disconnect\n   */\n\n\n  _handleDisconnect(isRecoverable, errorMessage) {\n    if (this._state.isConnected || !this._state.isPermanentlyDisconnected && !isRecoverable) {\n      this._state.isConnected = false;\n      let error;\n\n      if (isRecoverable) {\n        error = new EthereumRpcError(1013, // Try again later\n        errorMessage || messages.errors.disconnected());\n        log.debug(error);\n      } else {\n        error = new EthereumRpcError(1011, // Internal error\n        errorMessage || messages.errors.permanentlyDisconnected());\n        log.error(error);\n        this.chainId = null;\n        this._state.accounts = null;\n        this.selectedAddress = null;\n        this._state.isUnlocked = false;\n        this._state.isPermanentlyDisconnected = true;\n      }\n\n      this.emit(\"disconnect\", error);\n    }\n  }\n  /**\n   * Called when accounts may have changed.\n   */\n\n\n  _handleAccountsChanged(accounts) {\n    let isEthAccounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let isInternal = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    // defensive programming\n    let finalAccounts = accounts;\n\n    if (!Array.isArray(finalAccounts)) {\n      log.error(\"Torus: Received non-array accounts parameter. Please report this bug.\", finalAccounts);\n      finalAccounts = [];\n    }\n\n    for (const account of accounts) {\n      if (typeof account !== \"string\") {\n        log.error(\"Torus: Received non-string account. Please report this bug.\", accounts);\n        finalAccounts = [];\n        break;\n      }\n    } // emit accountsChanged if anything about the accounts array has changed\n\n\n    if (!dequal(this._state.accounts, finalAccounts)) {\n      // we should always have the correct accounts even before solana_accounts\n      // returns, except in cases where isInternal is true\n      if (isEthAccounts && Array.isArray(this._state.accounts) && this._state.accounts.length > 0 && !isInternal) {\n        log.error('Torus: \"solana_accounts\" unexpectedly updated accounts. Please report this bug.', finalAccounts);\n      }\n\n      this._state.accounts = finalAccounts;\n      this.emit(\"accountsChanged\", finalAccounts);\n    } // handle selectedAddress\n\n\n    if (this.selectedAddress !== finalAccounts[0]) {\n      this.selectedAddress = finalAccounts[0] || null;\n    }\n  }\n  /**\n   * Upon receipt of a new chainId and networkVersion, emits corresponding\n   * events and sets relevant public state.\n   * Does nothing if neither the chainId nor the networkVersion are different\n   * from existing values.\n   *\n   * emits TorusInpageProvider#chainChanged\n   * @param networkInfo - An object with network info.\n   */\n\n\n  _handleChainChanged() {\n    let {\n      chainId\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (!chainId) {\n      log.error(\"Torus: Received invalid network parameters. Please report this bug.\", {\n        chainId\n      });\n      return;\n    }\n\n    if (chainId === \"loading\") {\n      this._handleDisconnect(true);\n    } else {\n      this._handleConnect(chainId);\n\n      if (chainId !== this.chainId) {\n        this.chainId = chainId;\n\n        if (this._state.initialized) {\n          this.emit(\"chainChanged\", this.chainId);\n        }\n      }\n    }\n  }\n  /**\n   * Upon receipt of a new isUnlocked state, sets relevant public state.\n   * Calls the accounts changed handler with the received accounts, or an empty\n   * array.\n   *\n   * Does nothing if the received value is equal to the existing value.\n   * There are no lock/unlock events.\n   *\n   * @param opts - Options bag.\n   */\n\n\n  _handleUnlockStateChanged() {\n    let {\n      accounts,\n      isUnlocked\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (typeof isUnlocked !== \"boolean\") {\n      log.error(\"Torus: Received invalid isUnlocked parameter. Please report this bug.\", {\n        isUnlocked\n      });\n      return;\n    }\n\n    if (isUnlocked !== this._state.isUnlocked) {\n      this._state.isUnlocked = isUnlocked;\n\n      this._handleAccountsChanged(accounts || []);\n    }\n  }\n\n}\n\n_defineProperty(TorusInPageProvider, \"_defaultState\", {\n  accounts: null,\n  isConnected: false,\n  isUnlocked: false,\n  initialized: false,\n  isPermanentlyDisconnected: false,\n  hasEmittedConnection: false\n});\n\n/**\n * Returns whether the given image URL exists\n */\nfunction imgExists(url) {\n  return new Promise((resolve, reject) => {\n    try {\n      const img = document.createElement(\"img\");\n\n      img.onload = () => resolve(true);\n\n      img.onerror = () => resolve(false);\n\n      img.src = url;\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n/**\n * Extracts a name for the site from the DOM\n */\n\n\nconst getSiteName = window => {\n  const {\n    document\n  } = window;\n  const siteName = document.querySelector('head > meta[property=\"og:site_name\"]');\n\n  if (siteName) {\n    return siteName.content;\n  }\n\n  const metaTitle = document.querySelector('head > meta[name=\"title\"]');\n\n  if (metaTitle) {\n    return metaTitle.content;\n  }\n\n  if (document.title && document.title.length > 0) {\n    return document.title;\n  }\n\n  return window.location.hostname;\n};\n/**\n * Extracts an icon for the site from the DOM\n */\n\n\nasync function getSiteIcon(window) {\n  try {\n    const {\n      document\n    } = window; // Use the site's favicon if it exists\n\n    let icon = document.querySelector('head > link[rel=\"shortcut icon\"]');\n\n    if (icon && (await imgExists(icon.href))) {\n      return icon.href;\n    } // Search through available icons in no particular order\n\n\n    icon = Array.from(document.querySelectorAll('head > link[rel=\"icon\"]')).find(_icon => Boolean(_icon.href));\n\n    if (icon && (await imgExists(icon.href))) {\n      return icon.href;\n    }\n\n    return \"\";\n  } catch (error) {\n    return \"\";\n  }\n}\n/**\n * Gets site metadata and returns it\n *\n */\n\n\nconst getSiteMetadata = async () => ({\n  name: getSiteName(window),\n  icon: await getSiteIcon(window)\n});\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nconst PROVIDER_UNSAFE_METHODS = [\"send_transaction\", \"sign_transaction\", \"sign_all_transactions\", \"sign_message\", \"connect\"];\nconst COMMUNICATION_UNSAFE_METHODS = [COMMUNICATION_JRPC_METHODS.SET_PROVIDER];\nconst isLocalStorageAvailable = storageAvailable(\"localStorage\"); // preload for iframe doesn't work https://bugs.chromium.org/p/chromium/issues/detail?id=593267\n\n(async function preLoadIframe() {\n  try {\n    if (typeof document === \"undefined\") return;\n    const torusIframeHtml = document.createElement(\"link\");\n    const {\n      torusUrl\n    } = await getTorusUrl(\"production\");\n    torusIframeHtml.href = \"\".concat(torusUrl, \"/frame\");\n    torusIframeHtml.crossOrigin = \"anonymous\";\n    torusIframeHtml.type = \"text/html\";\n    torusIframeHtml.rel = \"prefetch\";\n\n    if (torusIframeHtml.relList && torusIframeHtml.relList.supports) {\n      if (torusIframeHtml.relList.supports(\"prefetch\")) {\n        document.head.appendChild(torusIframeHtml);\n      }\n    }\n  } catch (error) {\n    log.warn(error);\n  }\n})();\n\nclass Torus {\n  constructor() {\n    let {\n      modalZIndex = 99999\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _defineProperty(this, \"isInitialized\", void 0);\n\n    _defineProperty(this, \"torusAlert\", void 0);\n\n    _defineProperty(this, \"modalZIndex\", void 0);\n\n    _defineProperty(this, \"alertZIndex\", void 0);\n\n    _defineProperty(this, \"requestedLoginProvider\", void 0);\n\n    _defineProperty(this, \"provider\", void 0);\n\n    _defineProperty(this, \"communicationProvider\", void 0);\n\n    _defineProperty(this, \"dappStorageKey\", void 0);\n\n    _defineProperty(this, \"torusAlertContainer\", void 0);\n\n    _defineProperty(this, \"torusUrl\", void 0);\n\n    _defineProperty(this, \"torusIframe\", void 0);\n\n    _defineProperty(this, \"styleLink\", void 0);\n\n    this.torusUrl = \"\";\n    this.isInitialized = false; // init done\n\n    this.requestedLoginProvider = null;\n    this.modalZIndex = modalZIndex;\n    this.alertZIndex = modalZIndex + 1000;\n    this.dappStorageKey = \"\";\n  }\n\n  get isLoggedIn() {\n    if (!this.communicationProvider) return false;\n    return this.communicationProvider.isLoggedIn;\n  }\n\n  async init() {\n    let {\n      buildEnv = TORUS_BUILD_ENV.PRODUCTION,\n      enableLogging = false,\n      network,\n      showTorusButton = false,\n      useLocalStorage = false,\n      buttonPosition = BUTTON_POSITION.BOTTOM_LEFT,\n      apiKey = \"torus-default\",\n      extraParams = {}\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (this.isInitialized) throw new Error(\"Already initialized\");\n    setAPIKey(apiKey);\n    const {\n      torusUrl,\n      logLevel\n    } = await getTorusUrl(buildEnv);\n    log.info(torusUrl, \"url loaded\");\n    this.torusUrl = torusUrl;\n    log.setDefaultLevel(logLevel);\n    if (enableLogging) log.enableAll();else log.disableAll();\n    const dappStorageKey = this.handleDappStorageKey(useLocalStorage);\n    const torusIframeUrl = new URL(torusUrl);\n    if (torusIframeUrl.pathname.endsWith(\"/\")) torusIframeUrl.pathname += \"frame\";else torusIframeUrl.pathname += \"/frame\";\n    const hashParams = new URLSearchParams();\n    if (dappStorageKey) hashParams.append(\"dappStorageKey\", dappStorageKey);\n    hashParams.append(\"origin\", window.location.origin);\n    torusIframeUrl.hash = hashParams.toString(); // Iframe code\n\n    this.torusIframe = htmlToElement(\"<iframe\\n        id=\\\"torusIframe\\\"\\n        class=\\\"torusIframe\\\"\\n        src=\\\"\".concat(torusIframeUrl.href, \"\\\"\\n        style=\\\"display: none; position: fixed; top: 0; right: 0; width: 100%;\\n        height: 100%; border: none; border-radius: 0; z-index: \").concat(this.modalZIndex.toString(), \"\\\"\\n      ></iframe>\"));\n    this.torusAlertContainer = htmlToElement(\"<div id=\\\"torusAlertContainer\\\" style=\\\"display:none; z-index: \".concat(this.alertZIndex.toString(), \"\\\"></div>\"));\n    this.styleLink = htmlToElement(\"<link href=\\\"\".concat(torusUrl, \"/css/widget.css\\\" rel=\\\"stylesheet\\\" type=\\\"text/css\\\">\"));\n\n    const handleSetup = async () => {\n      return new Promise((resolve, reject) => {\n        try {\n          window.document.head.appendChild(this.styleLink);\n          window.document.body.appendChild(this.torusIframe);\n          window.document.body.appendChild(this.torusAlertContainer);\n          this.torusIframe.addEventListener(\"load\", async () => {\n            const dappMetadata = await getSiteMetadata(); // send init params here\n\n            this.torusIframe.contentWindow.postMessage({\n              buttonPosition,\n              apiKey,\n              network: typeof network === \"string\" ? getNetworkConfig(network) : network,\n              dappMetadata,\n              extraParams\n            }, torusIframeUrl.origin);\n            await this._setupWeb3({\n              torusUrl\n            });\n            if (showTorusButton) this.showTorusButton();else this.hideTorusButton();\n            this.isInitialized = true;\n            window.torus = this;\n            resolve();\n          });\n        } catch (error) {\n          reject(error);\n        }\n      });\n    };\n\n    await documentReady();\n    await handleSetup();\n  }\n\n  async login() {\n    let params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!this.isInitialized) throw new Error(\"Call init() first\");\n\n    try {\n      this.requestedLoginProvider = params.loginProvider || null;\n\n      if (!this.requestedLoginProvider) {\n        this.communicationProvider._displayIframe({\n          isFull: true\n        });\n      } // If user is already logged in, we assume they have given access to the website\n\n\n      const res = await new Promise((resolve, reject) => {\n        // We use this method because we want to update inPage provider state with account info\n        this.provider._rpcRequest({\n          method: \"solana_requestAccounts\",\n          params: [this.requestedLoginProvider, params.login_hint]\n        }, getRpcPromiseCallback(resolve, reject));\n      });\n\n      if (Array.isArray(res) && res.length > 0) {\n        return res;\n      } // This would never happen, but just in case\n\n\n      throw new Error(\"Login failed\");\n    } catch (error) {\n      log.error(\"login failed\", error);\n      throw error;\n    } finally {\n      if (this.communicationProvider.isIFrameFullScreen) this.communicationProvider._displayIframe();\n    }\n  }\n\n  async logout() {\n    if (!this.communicationProvider.isLoggedIn) throw new Error(\"Not logged in\");\n    await this.communicationProvider.request({\n      method: COMMUNICATION_JRPC_METHODS.LOGOUT,\n      params: []\n    });\n    this.requestedLoginProvider = null;\n  }\n\n  async cleanUp() {\n    if (this.communicationProvider.isLoggedIn) {\n      await this.logout();\n    }\n\n    this.clearInit();\n  }\n\n  clearInit() {\n    function isElement(element) {\n      return element instanceof Element || element instanceof Document;\n    }\n\n    if (isElement(this.styleLink) && window.document.body.contains(this.styleLink)) {\n      this.styleLink.remove();\n      this.styleLink = undefined;\n    }\n\n    if (isElement(this.torusIframe) && window.document.body.contains(this.torusIframe)) {\n      this.torusIframe.remove();\n      this.torusIframe = undefined;\n    }\n\n    if (isElement(this.torusAlertContainer) && window.document.body.contains(this.torusAlertContainer)) {\n      this.torusAlert = undefined;\n      this.torusAlertContainer.remove();\n      this.torusAlertContainer = undefined;\n    }\n\n    this.isInitialized = false;\n  }\n\n  hideTorusButton() {\n    this.communicationProvider.hideTorusButton();\n  }\n\n  showTorusButton() {\n    this.communicationProvider.showTorusButton();\n  }\n\n  async setProvider(params) {\n    await this.communicationProvider.request({\n      method: COMMUNICATION_JRPC_METHODS.SET_PROVIDER,\n      params: _objectSpread({}, params)\n    });\n  }\n\n  async showWallet(path) {\n    let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const instanceId = await this.communicationProvider.request({\n      method: COMMUNICATION_JRPC_METHODS.WALLET_INSTANCE_ID,\n      params: []\n    });\n    const finalPath = path ? \"/\".concat(path) : \"\";\n    const finalUrl = new URL(\"\".concat(this.torusUrl, \"/wallet\").concat(finalPath)); // Using URL constructor to prevent js injection and allow parameter validation.!\n\n    finalUrl.searchParams.append(\"instanceId\", instanceId);\n    Object.keys(params).forEach(x => {\n      finalUrl.searchParams.append(x, params[x]);\n    });\n\n    if (this.dappStorageKey) {\n      finalUrl.hash = \"#dappStorageKey=\".concat(this.dappStorageKey);\n    } // No need to track this window state. Hence, no _handleWindow call.\n\n\n    const walletWindow = new PopupHandler({\n      url: finalUrl,\n      features: getPopupFeatures(FEATURES_DEFAULT_WALLET_WINDOW)\n    });\n    walletWindow.open();\n  }\n\n  async getUserInfo() {\n    const userInfoResponse = await this.communicationProvider.request({\n      method: COMMUNICATION_JRPC_METHODS.USER_INFO,\n      params: []\n    });\n    return userInfoResponse;\n  }\n\n  async initiateTopup(provider, params) {\n    if (!this.isInitialized) throw new Error(\"Torus is not initialized\");\n    const windowId = getWindowId();\n\n    this.communicationProvider._handleWindow(windowId);\n\n    const topupResponse = await this.communicationProvider.request({\n      method: COMMUNICATION_JRPC_METHODS.TOPUP,\n      params: {\n        provider,\n        params,\n        windowId\n      }\n    });\n    return topupResponse;\n  } // Solana specific API\n\n\n  async sendTransaction(transaction) {\n    const response = await this.provider.request({\n      method: \"send_transaction\",\n      // params: { message: transaction.serializeMessage().toString(\"hex\") },\n      params: {\n        message: transaction.serialize({\n          requireAllSignatures: false\n        }).toString(\"hex\")\n      }\n    });\n    return response;\n  }\n\n  async signTransaction(transaction) {\n    const response = await this.provider.request({\n      method: \"sign_transaction\",\n      // params: { message: transaction.serializeMessage().toString(\"hex\") },\n      params: {\n        message: transaction.serialize({\n          requireAllSignatures: false\n        }).toString(\"hex\")\n      }\n    });\n    const buf = Buffer.from(response, \"hex\");\n    const sendTx = Transaction.from(buf);\n    return sendTx;\n  }\n\n  async signAllTransactions(transactions) {\n    const encodedTransactions = transactions.map(x => x.serialize({\n      requireAllSignatures: false\n    }).toString(\"hex\"));\n    const response = await this.provider.request({\n      method: \"sign_all_transactions\",\n      params: {\n        message: encodedTransactions\n      }\n    });\n    const allSignedTransaction = response.map(msg => Transaction.from(Buffer.from(msg, \"hex\")));\n    return allSignedTransaction;\n  }\n\n  async signMessage(data) {\n    const response = await this.provider.request({\n      method: \"sign_message\",\n      params: {\n        data\n      }\n    });\n    return response;\n  }\n\n  async getGaslessPublicKey() {\n    const response = await this.provider.request({\n      method: \"get_gasless_public_key\",\n      params: []\n    });\n    return response;\n  } // async connect(): Promise<boolean> {\n  //   const response = (await this.provider.request({\n  //     method: \"connect\",\n  //     params: {},\n  //   })) as boolean;\n  //   return response;\n  // }\n\n\n  handleDappStorageKey(useLocalStorage) {\n    let dappStorageKey = \"\";\n\n    if (isLocalStorageAvailable && useLocalStorage) {\n      const storedKey = window.localStorage.getItem(configuration.localStorageKey);\n      if (storedKey) dappStorageKey = storedKey;else {\n        const generatedKey = \"torus-app-\".concat(getWindowId());\n        window.localStorage.setItem(configuration.localStorageKey, generatedKey);\n        dappStorageKey = generatedKey;\n      }\n    }\n\n    this.dappStorageKey = dappStorageKey;\n    return dappStorageKey;\n  }\n\n  async _setupWeb3(providerParams) {\n    log.info(\"setupWeb3 running\"); // setup background connection\n\n    const providerStream = new BasePostMessageStream({\n      name: \"embed_torus\",\n      target: \"iframe_torus\",\n      targetWindow: this.torusIframe.contentWindow\n    }); // We create another LocalMessageDuplexStream for communication between dapp <> iframe\n\n    const communicationStream = new BasePostMessageStream({\n      name: \"embed_communication\",\n      target: \"iframe_communication\",\n      targetWindow: this.torusIframe.contentWindow\n    }); // compose the inPage provider\n\n    const inPageProvider = new TorusInPageProvider(providerStream, {});\n    const communicationProvider = new TorusCommunicationProvider(communicationStream, {});\n\n    inPageProvider.tryWindowHandle = (payload, cb) => {\n      const _payload = payload;\n\n      if (!Array.isArray(_payload) && PROVIDER_UNSAFE_METHODS.includes(_payload.method)) {\n        if (!this.communicationProvider.isLoggedIn) throw new Error(\"User Not Logged In\");\n        const windowId = getWindowId();\n\n        communicationProvider._handleWindow(windowId, {\n          target: \"_blank\",\n          features: getPopupFeatures(FEATURES_CONFIRM_WINDOW)\n        }); // for inPageProvider methods sending windowId in request instead of params\n        // as params might be positional.\n\n\n        _payload.windowId = windowId;\n      }\n\n      inPageProvider._rpcEngine.handle(_payload, cb);\n    };\n\n    communicationProvider.tryWindowHandle = (payload, cb) => {\n      const _payload = payload;\n\n      if (!Array.isArray(_payload) && COMMUNICATION_UNSAFE_METHODS.includes(_payload.method)) {\n        const windowId = getWindowId();\n\n        communicationProvider._handleWindow(windowId, {\n          target: \"_blank\",\n          features: getPopupFeatures(FEATURES_PROVIDER_CHANGE_WINDOW) // todo: are these features generic for all\n\n        }); // for communication methods sending window id in jrpc req params\n\n\n        _payload.params.windowId = windowId;\n      }\n\n      communicationProvider._rpcEngine.handle(_payload, cb);\n    }; // detect solana_requestAccounts and pipe to enable for now\n\n\n    const detectAccountRequestPrototypeModifier = m => {\n      const originalMethod = inPageProvider[m]; // eslint-disable-next-line @typescript-eslint/no-this-alias\n\n      const self = this;\n\n      inPageProvider[m] = function providerFunc(request, cb) {\n        const {\n          method,\n          params = []\n        } = request;\n\n        if (method === \"solana_requestAccounts\") {\n          if (!cb) return self.login({\n            loginProvider: params[0]\n          });\n          self.login({\n            loginProvider: params[0]\n          }) // eslint-disable-next-line promise/no-callback-in-promise\n          .then(res => cb(null, res)) // eslint-disable-next-line promise/no-callback-in-promise\n          .catch(err => cb(err));\n        }\n\n        return originalMethod.apply(this, [request, cb]);\n      };\n    }; // Detects call to solana_requestAccounts in request & sendAsync and passes to login\n\n\n    detectAccountRequestPrototypeModifier(\"request\");\n    detectAccountRequestPrototypeModifier(\"sendAsync\");\n    detectAccountRequestPrototypeModifier(\"send\");\n    const proxiedInPageProvider = new Proxy(inPageProvider, {\n      // straight up lie that we deleted the property so that it doesn't\n      // throw an error in strict mode\n      deleteProperty: () => true\n    });\n    const proxiedCommunicationProvider = new Proxy(communicationProvider, {\n      // straight up lie that we deleted the property so that it doesn't\n      // throw an error in strict mode\n      deleteProperty: () => true\n    });\n    this.provider = proxiedInPageProvider;\n    this.communicationProvider = proxiedCommunicationProvider;\n    await Promise.all([inPageProvider._initializeState(), communicationProvider._initializeState(_objectSpread(_objectSpread({}, providerParams), {}, {\n      dappStorageKey: this.dappStorageKey,\n      torusAlertContainer: this.torusAlertContainer,\n      torusIframe: this.torusIframe\n    }))]);\n    log.debug(\"Torus - injected provider\");\n  }\n\n}\n\nexport { BUTTON_POSITION, LOGIN_PROVIDER, PAYMENT_PROVIDER, TORUS_BUILD_ENV, TorusInPageProvider, Torus as default };\n//# sourceMappingURL=solanaEmbed.esm.js.map\n",null,null,null,null,null,null,null,null,null,null,null,"import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport Torus from '@toruslabs/solana-embed';\nimport { BaseAdapter, WALLET_ADAPTERS, ADAPTER_NAMESPACES, CHAIN_NAMESPACES, ADAPTER_CATEGORY, ADAPTER_STATUS, getChainConfig, ADAPTER_EVENTS, WalletInitializationError, WalletLoginError } from '@web3auth/base';\nimport { TorusInjectedProvider } from '@web3auth/solana-provider';\nimport log from 'loglevel';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nclass SolanaWalletAdapter extends BaseAdapter {\n  constructor() {\n    let params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n\n    _defineProperty(this, \"name\", WALLET_ADAPTERS.TORUS_SOLANA);\n\n    _defineProperty(this, \"adapterNamespace\", ADAPTER_NAMESPACES.SOLANA);\n\n    _defineProperty(this, \"currentChainNamespace\", CHAIN_NAMESPACES.SOLANA);\n\n    _defineProperty(this, \"type\", ADAPTER_CATEGORY.EXTERNAL);\n\n    _defineProperty(this, \"status\", ADAPTER_STATUS.NOT_READY);\n\n    _defineProperty(this, \"torusInstance\", null);\n\n    _defineProperty(this, \"torusWalletOptions\", void 0);\n\n    _defineProperty(this, \"initParams\", void 0);\n\n    _defineProperty(this, \"loginSettings\", {});\n\n    _defineProperty(this, \"solanaProvider\", null);\n\n    _defineProperty(this, \"rehydrated\", false);\n\n    this.torusWalletOptions = params.adapterSettings || {};\n    this.initParams = params.initParams || {};\n    this.loginSettings = params.loginSettings || {};\n    this.chainConfig = params.chainConfig || null;\n  }\n\n  get provider() {\n    if (this.status === ADAPTER_STATUS.CONNECTED && this.solanaProvider) {\n      var _this$solanaProvider;\n\n      return ((_this$solanaProvider = this.solanaProvider) === null || _this$solanaProvider === void 0 ? void 0 : _this$solanaProvider.provider) || null;\n    }\n\n    return null;\n  }\n\n  set provider(_) {\n    throw new Error(\"Not implemented\");\n  }\n\n  async init(options) {\n    super.checkInitializationRequirements(); // set chainConfig for mainnet by default if not set\n\n    let network;\n\n    if (!this.chainConfig) {\n      this.chainConfig = getChainConfig(CHAIN_NAMESPACES.SOLANA, \"0x1\");\n      const {\n        blockExplorer,\n        displayName,\n        ticker,\n        tickerName,\n        rpcTarget,\n        chainId\n      } = this.chainConfig;\n      network = {\n        chainId,\n        rpcTarget,\n        blockExplorerUrl: blockExplorer,\n        displayName,\n        ticker,\n        tickerName,\n        logo: \"\"\n      };\n    } else {\n      const {\n        chainId,\n        blockExplorer,\n        displayName,\n        rpcTarget,\n        ticker,\n        tickerName\n      } = this.chainConfig;\n      network = {\n        chainId,\n        rpcTarget,\n        blockExplorerUrl: blockExplorer,\n        displayName,\n        tickerName,\n        ticker,\n        logo: \"\"\n      };\n    }\n\n    this.torusInstance = new Torus(this.torusWalletOptions);\n    await this.torusInstance.init(_objectSpread(_objectSpread({\n      showTorusButton: false\n    }, this.initParams), {}, {\n      network\n    }));\n    this.solanaProvider = new TorusInjectedProvider({\n      config: {\n        chainConfig: this.chainConfig\n      }\n    });\n    this.status = ADAPTER_STATUS.READY;\n    this.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.TORUS_SOLANA);\n\n    try {\n      if (options.autoConnect) {\n        this.rehydrated = true;\n        await this.connect();\n      }\n    } catch (error) {\n      log.error(\"Failed to connect with cached torus solana provider\", error);\n      this.emit(ADAPTER_EVENTS.ERRORED, error);\n    }\n  }\n\n  async connect() {\n    super.checkConnectionRequirements();\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    if (!this.solanaProvider) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    this.status = ADAPTER_STATUS.CONNECTING;\n    this.emit(ADAPTER_EVENTS.CONNECTING, {\n      adapter: WALLET_ADAPTERS.TORUS_SOLANA\n    });\n\n    try {\n      await this.torusInstance.login(this.loginSettings);\n      await this.solanaProvider.setupProvider(this.torusInstance.provider);\n      this.status = ADAPTER_STATUS.CONNECTED;\n      this.torusInstance.showTorusButton();\n      this.emit(ADAPTER_STATUS.CONNECTED, {\n        adapter: WALLET_ADAPTERS.TORUS_SOLANA,\n        reconnected: this.rehydrated\n      });\n      return this.provider;\n    } catch (error) {\n      // ready again to be connected\n      this.status = ADAPTER_STATUS.READY;\n      this.rehydrated = false;\n      this.emit(ADAPTER_EVENTS.ERRORED, error);\n      throw WalletLoginError.connectionError(\"Failed to login with torus solana wallet\");\n    }\n  }\n\n  async disconnect() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      cleanup: false\n    };\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    await this.torusInstance.logout();\n\n    if (options.cleanup) {\n      // ready to connect again\n      this.status = ADAPTER_STATUS.NOT_READY;\n      this.torusInstance = null;\n      this.solanaProvider = null;\n    } else {\n      // ready to connect again\n      this.status = ADAPTER_STATUS.READY;\n    }\n\n    this.emit(ADAPTER_EVENTS.DISCONNECTED);\n  }\n\n  async getUserInfo() {\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n    if (!this.torusInstance) throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n    const userInfo = await this.torusInstance.getUserInfo();\n    return userInfo;\n  }\n\n  setAdapterSettings(_) {}\n\n}\n\nexport { SolanaWalletAdapter };\n//# sourceMappingURL=torusSolanaAdapter.esm.js.map\n"]}}